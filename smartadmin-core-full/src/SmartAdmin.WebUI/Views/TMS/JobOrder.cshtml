@{
    ViewData["Title"] = "Job Order";
    ViewData["PageName"] = "job_order";
    ViewData["Category1"] = "TMS";
    ViewData["Heading"] = "";
    @using ViewModels.JobOrder;
    @model JobOrderViewModel;
    @using Data;
    @using System.Text.Json;
}
@section HeadBlock {
    <link rel="stylesheet" media="screen, print" href="css/fa-solid.css">
    <link rel="stylesheet" media="screen, print" href="css/fa-duotone.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/reactions/reactions.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/fullcalendar/fullcalendar.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/jqvmap/jqvmap.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/fa-regular.css">
    <link rel="stylesheet" media="screen, print" href="~/css/notifications/sweetalert2/sweetalert2.bundle.css">
}
    <style>

        .ajax-loader {
            visibility: hidden;
            background-color: rgba(255,255,255,0.7);
            position: absolute;
            z-index: +100 !important;
            width: 100%;
            height: 100%;
        }

            .ajax-loader img {
                position: relative;
                top: 75%;
                left: 47%;
            }


    </style>
<div class="ajax-loader">
    <img src="@Href("~/img/loading.gif")" class="img-responsive" />
</div>
    <div class="row justify-content-between px-5">
        @if (Model.DeletedDate != null)
    {
        <div class="col-12 mb-3 text-center">
            <i class="fad fa-exclamation-triangle fa-lg" style="color: red;"></i>
            <span style="color:red;">
                Note that this job order has been deleted.
            </span>
        </div>
    }
    <div class="col-lg-6 mb-3 text-center">
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Group</label>
            <div class="col text-left">
                <a target="_blank" style="text-decoration: none !important; color: #BA9765;" href="https://myplusbeta.publicisgroupe.net/OrgGroup?groupid=@ViewBag.GroupID">
                    @(ViewBag.GroupID + " - " + ViewBag.GroupName)
                </a>
                @if (ViewBag.GroupDeleted != "")
                {
                    <span class="font-italic" style="color: red;">@Html.Raw(ViewBag.GroupDeleted)</span>
                }
            </div>
        </div>
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Organisation</label>
            <div class="col text-left">
                <a target="_blank" style="text-decoration: none !important; color: #BA9765;" href="https://myplusbeta.publicisgroupe.net/Organisation?id=@ViewBag.OrgID">
                    @(ViewBag.OrgID + " - " + ViewBag.OrgName)
                </a>
                @if (ViewBag.OrgDeleted != "")
                {
                    <span class="font-italic" style="color: red;">@Html.Raw(ViewBag.OrgDeleted)</span>
                }
            </div>
        </div>
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Contact</label>
            <div class="col text-left">
                <a target="_blank" style="text-decoration: none !important; color: #BA9765;" href="https://myplusbeta.publicisgroupe.net/Contact?contactid=@ViewBag.ContactID">
                    @(ViewBag.ContactID + " - " + ViewBag.ContactName)
                </a>
                @if (ViewBag.ContactDeleted != "")
                {
                    <span class="font-italic" style="color: red;">@Html.Raw(ViewBag.ContactDeleted)</span>
                }
            </div>
        </div>
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Job order</label>
            <label class="col text-left">@(Model.Id + " - " + Model.JobName)</label>

            @*<div class="col text-left">
            <a target="_blank" style="text-decoration: none !important; color: #BA9765;" href="http://myplus/Order.aspx?OrderID=@Model.Id">
            @(Model.Id + " - " + Model.JobName)
            </a>
            </div>*@
        </div>

        @if (Model.OriginatedFromEnquiryId != null && Model.OriginatedFromEnquiryId > 0)
        {
            <div class="row">
                <label class="form-label col-lg-3 d-flex align-items-center px-0" style="text-align:left;">Originated from enquiry</label>
                @*<label class="col text-left">@(Model.Id + " - " + Model.JobName)</label>*@

                <div class="col text-left">
                    <a target="_blank" style="text-decoration: none !important; color: #BA9765;" href="https://myplusbeta.publicisgroupe.net/enquiry?ID=@Model.OriginatedFromEnquiryId">
                        @("Enquiry " + Model.OriginatedFromEnquiryId)
                    </a>
                </div>
            </div>
        }
    </div>

    @*<div class="row justify-content-lg-end">
    <label class="form-label px-4">@chargeLabel</label>
    <label class="form-label px-1">@Model.ChargeToClient.GetValueOrDefault().ToString("N2") (@Model.AdditionalDetails.OrderCurrencyName)</label>
    </div>*@

    <div class="col-lg-6 mb-3 text-center">
        <div class="row justify-content-lg-end">
            @if (ViewBag.NetworkJobPath != "")
            {
                <a class="p-2" href="@Html.Raw(ViewBag.NetworkJobPath)">
                    <i class="fal fa-folder-open fa-2x color-black d-block"></i>
                    Job folder
                </a>
            }
        </div>
        <div class="row justify-content-lg-end">
            <label class="form-label px-4">Total order value</label>
            <label class="form-label px-1">@Html.Raw(ViewBag.TotalOrderValue)</label>
        </div>
        <div class="row justify-content-lg-end">
            <label class="form-label px-4">Margin</label>
            <label class="form-label px-1">@Html.Raw(ViewBag.Margin)</label>
        </div>
    </div>
</div>

<div class="panel-container show">
    <div class="modal fade" id="createStudioTaskPopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="tradosautomationheaderHeader">
                        <strong><label id="modal_header1">Start Trados Studio automation</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <table class="table table-borderless" style="width:450px;" id="breakdownTable2">
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <table id="innerCategoryTable2" style="width: 100%; border-spacing: 0px; padding: 0px;">

                                    <tr>
                                        <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; width: 320px;border: hidden;">
                                            <select class="select2 form-control w-100">
                                                @foreach (KeyValuePair<string, string> TMPath in @Model.AllTMPaths)
                                                {
                                                    <option value="@TMPath.Value">@TMPath.Key</option>
                                                }
                                            </select>
                                        </td>
                                        <td style="border: hidden;">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr class="table-hover">

                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                &nbsp;<div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" id="prepfilescheckbox" name="prepfilescheckbox" checked>
                                    <label class="custom-control-label" for="prepfilescheckbox">Use prep files for all languages</label>
                                </div>
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;" align="right">
                                <br />
                                <a class="btn btn-success" onclick="CreateStudioTask(@Model.Id);">Create studio</a>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="panel-container show">
    <div class="modal fade" id="surchargePopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="surchargeHeader">
                        <strong><label id="modal_header1">Surcharge</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <table class="table table-borderless" style="width:450px;" id="breakdownTable2">
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Surcharge:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <table id="innerCategoryTable2" style="width: 100%; border-spacing: 0px; padding: 0px;">
                                    <tr>
                                        <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; width: 320px;border: hidden;">
                                            <select class="select2 form-control w-100" id="surchargecategoryselect" onchange="surchargecategoryselectupdate('@ViewBag.InvoiceLang.ToString()')">
                                                <option value="-1" selected>No Surcharge</option>
                                                @for (var j = 0; j < Model.SurchargesCategories.Count(); j++)
                                                {
                                                    @if (Model.SurchargeDetails != null)
                                                    {
                                                        @if (Model.SurchargesCategories.ElementAt(j).Id == Model.SurchargeDetails.SurchargeCategory)
                                                        {
                                                            <option value="@Model.SurchargesCategories.ElementAt(j).Id" selected>@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@Model.SurchargesCategories.ElementAt(j).Id">@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <option value="@Model.SurchargesCategories.ElementAt(j).Id">@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                    }
                                                }
                                            </select>
                                        </td>
                                        <td style="border: hidden;">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Description:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    string surchargedesc = "";
                                                        @if (Model.SurchargeDetails != null)
                                    {
                                        surchargedesc = @Model.SurchargeDetails.Description;
                                    }
                                }
                                <textarea id="Surchargedescriptioninput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">@surchargedesc</textarea>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Percentage or value:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    var percentchecked = "";
                                    var valuechecked = "";
                                                        @if (Model.SurchargeDetails != null)
                                    {
                                                            @if (Model.SurchargeDetails.PercentageOrValue == true)
                                        {
                                            valuechecked = "checked";
                                        }
                                        else
                                        {
                                            percentchecked = "checked";
                                        }
                                    }
                                }
                                <input type="radio" id="SurchargePerc" name="SurchargePercOrValue" value="0" @percentchecked>
                                <label for="SurchargePerc">Percentage</label><br>
                                <input type="radio" id="SurchargeVal" name="SurchargePercOrValue" value="1" @valuechecked>
                                <label for="SurchargeVal">Value</label><br>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                <label class="form-label" for="simpleinput">Amount</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                @{
                                    decimal surchargeamount = 0;
                                                        @if (Model.SurchargeDetails != null)
                                    {
                                        surchargeamount = @Model.SurchargeDetails.SurchargeAmount;
                                    }
                                }
                                <input type="number" id="SurchargeAmountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@surchargeamount">
                                <br />@ViewBag.Currency
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;" align="right">
                                <br />
                                @{
                                    var surchargeid = 0;

                                                        @if (@Model.SurchargeDetails != null)
                                    {
                                        surchargeid = @Model.SurchargeDetails.SurchargeId;
                                    }
                                }
                                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="SaveSurchargePopup();">Save</button>
                                <label id="popup-surcharge-id" style="display: none;">@surchargeid</label>
                                @*<a class="btn btn-success" onclick="SaveSurcharge(@Model.Id, @surchargeid);">Save</a>*@
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel-container show">
    <div class="modal fade" id="discountPopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="discountHeader">
                        <strong><label id="modal_header1">Discount</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <table class="table table-borderless" style="width:450px;" id="breakdownTable2">
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Discount:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <table id="innerCategoryTable2" style="width: 100%; border-spacing: 0px; padding: 0px;">

                                    <tr>
                                        <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; width: 320px;border: hidden;">
                                            <select class="select2 form-control w-100" id="discountcategoryselect" onchange="discountcategoryselectupdate('@ViewBag.InvoiceLang.ToString()')">
                                                <option value="-1" selected>No Discount</option>
                                                @for (var j = 0; j < Model.DiscountCategories.Count(); j++)
                                                {
                                                    @if (Model.DiscountDetails != null)
                                                    {
                                                        @if (Model.DiscountCategories.ElementAt(j).Id == Model.DiscountDetails.DiscountCategory)
                                                        {
                                                            <option value="@Model.DiscountCategories.ElementAt(j).Id" selected>@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@Model.DiscountCategories.ElementAt(j).Id">@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <option value="@Model.DiscountCategories.ElementAt(j).Id">@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                    }
                                                }
                                            </select>
                                        </td>
                                        <td style="border: hidden;">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Description:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    string discountdesc = "";
                                                        @if (Model.DiscountDetails != null)
                                    {
                                        discountdesc = @Model.DiscountDetails.Description;
                                    }
                                }
                                <textarea id="Discountdescriptioninput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">@discountdesc</textarea>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Percentage or value:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    percentchecked = "";
                                    valuechecked = "";
                                                        @if (Model.DiscountDetails != null)
                                    {
                                                            @if (Model.DiscountDetails.PercentageOrValue == true)
                                        {
                                            valuechecked = "checked";
                                        }
                                        else
                                        {
                                            percentchecked = "checked";
                                        }
                                    }
                                }
                                <input type="radio" id="DiscountPerc" name="DiscountePercOrValue" value="0" @percentchecked>
                                <label for="DiscountPerc">Percentage</label><br>
                                <input type="radio" id="DiscountVal" name="DiscountePercOrValue" value="1" @valuechecked>
                                <label for="DiscountVal">Value</label><br>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                <label class="form-label" for="simpleinput">Amount</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                @{
                                    decimal discountamount = 0;
                                                        @if (Model.DiscountDetails != null)
                                    {
                                        discountamount = @Model.DiscountDetails.DiscountAmount;
                                    }
                                }
                                <input type="number" id="DiscountAmountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@discountamount">
                                <br />@ViewBag.Currency
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;" align="right">
                                <br />
                                @{
                                    var discountid = 0;

                                                        @if (@Model.DiscountDetails != null)
                                    {
                                        discountid = @Model.DiscountDetails.DiscountId;
                                    }
                                }
                                @*<a class="btn btn-success" onclick="SaveDiscount(@Model.Id, @discountid);">Save</a>*@
                                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="SaveDiscountPopup();">Save</button>
                                <label id="popup-discount-id" style="display: none;">@discountid</label>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="panel-container show">
    <div class="modal fade" id="updateDeadlinesPopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="updatedeadlinesHeader">
                        <strong><label id="modal_header1">Update client deadlines of all open job items in this job order?</label> </strong>
                    </h5>
                </div>
                <div class="modal-body bg-faded">
                    <a class="btn btn-success" onclick="promptdeadlinesupdate('yes');">Yes</a>
                    &nbsp;
                    <a class="btn btn-success" onclick="promptdeadlinesupdate('no');">No</a>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-6">
        <div id="panel-2" class="panel" data-panel-fullscreen="false" data-panel-close="false">
            <div class="panel-hdr">
                <i class="fal fa-info-circle fa-2x color-black color-black"></i> &nbsp; &nbsp;
                <h2>
                    Key information
                </h2>
            </div>



            <div class="panel-container collapse">
                <div class="panel-content p-0">
                    <div class="d-flex flex-column">
                        @*<div class="bg-subtlelight-fade custom-scroll" style="height: fit-content">*@
                        <div class="h-100" style="width:100%">
                            @*<form method="post" asp-action="UpdateKeyInformation">*@
                            <form>
                                <div class="d-flex flex-row px-3 pt-3 pb-2">

                                    @*<div style="white-space:nowrap;">*@
                                    <table width="100%">
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Order for contact:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.ClientInfo)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Job order number:</label>&nbsp;
                                            </td>
                                            <td>
                                                <input type="text" readonly="readonly" id="IDinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.Id">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Job name:</label>&nbsp;
                                            </td>
                                            <td>
                                                @if (Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue)
                                                {
                                                    <input type="text" id="JobNameinput" asp-for="JobName" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Html.Encode(Model.JobName)">
                                                }
                                                else
                                                {
                                                    <input type="text" readonly id="JobNameinput" asp-for="JobName" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Html.Encode(Model.JobName)">
                                                }
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Type of order:</label>&nbsp;
                                            </td>
                                            <td>
                                                <select id="TypeofOrderinput" asp-for="IsCls" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                    @{
                                                                            @if (Model.IsCls != null)
                                                        {
                                                                                @if (Model.IsCls == false)
                                                            {
                                                                                    <option value="0" selected>General Linguistic Services</option>
                                                                                    <option value="1">Creative Language Services / Transcreation & Production</option>
                                                            }
                                                            else
                                                            {
                                                                                    <option value="0">General Linguistic Services</option>
                                                                                    <option value="1" selected>Creative Language Services / Transcreation & Production</option>
                                                            }
                                                        }
                                                        else
                                                        {
                                                                                @if (Model.TypeOfOrder == 2)
                                                            {
                                                                                    <option value="2" selected>External Clients - General Linguistic Service</option>
                                                                                    <option value="3">External Clients - Creative Language Services</option>
                                                                                    <option value="4">Internal (PGD) Clients - Creative Language Services</option>
                                                                                    <option value="5">Internal (PGD) Clients - General Linguistic Service</option>
                                                            }
                                                            else if (Model.TypeOfOrder == 3)
                                                            {
                                                                                    <option value="2">External Clients - General Linguistic Service</option>
                                                                                    <option value="3" selected>External Clients - Creative Language Services</option>
                                                                                    <option value="4">Internal (PGD) Clients - Creative Language Services</option>
                                                                                    <option value="5">Internal (PGD) Clients - General Linguistic Service</option>
                                                            }
                                                            else if (Model.TypeOfOrder == 4)
                                                            {
                                                                                    <option value="2">External Clients - General Linguistic Service</option>
                                                                                    <option value="3">External Clients - Creative Language Services</option>
                                                                                    <option value="4" selected>Internal (PGD) Clients - Creative Language Services</option>
                                                                                    <option value="5">Internal (PGD) Clients - General Linguistic Service</option>
                                                            }
                                                            else if (Model.TypeOfOrder == 5)
                                                            {
                                                                                    <option value="2">External Clients - General Linguistic Service</option>
                                                                                    <option value="3">External Clients - Creative Language Services</option>
                                                                                    <option value="4">Internal (PGD) Clients - Creative Language Services</option>
                                                                                    <option value="5" selected>Internal (PGD) Clients - General Linguistic Service</option>
                                                            }
                                                        }
                                                    }
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Margin:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.Margin)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Overall job deadline (GMT):</label>&nbsp;
                                            </td>
                                            <td>
                                                @if (Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue)
                                                {
                                                    <input type="datetime-local" asp-for="OverallDeliveryDeadline" id="Deadlineinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.OverallDeliveryDeadline.ToString("yyyy-MM-ddTHH:mm")">
                                                    <input value="0" type="hidden" id="updatedeadlinesinput" />
                                                }
                                                else
                                                {
                                                    <input type="datetime-local" readonly asp-for="OverallDeliveryDeadline" id="Deadlineinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.OverallDeliveryDeadline.ToString("yyyy-MM-ddTHH:mm")">
                                                }
                                            </td>
                                        </tr>
                                        @if (Model.DeadlineChangeReason != null && Model.DeadlineChangeReason != "")
                                        {
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput" id="DeadlineReasonLabel">Deadline change reason:</label>&nbsp;
                                                </td>
                                                <td>
                                                    @*@{ var deadlineReason = Model.DeadlineChangeReason;}
                                                <select id="DeadlineReasonInput" asp-for="DeadlineChangeReason" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" onchange="deadlineReason()">
                                                @{
                                                @if (Model.DeadlineChangeReason == null || Model.DeadlineChangeReason == "")
                                                {
                                                <option value="-1" selected>Please select</option>
                                                }

                                                string dr = "Deadline extension agreed with client – save e-mail in Gen Docs";
                                                var selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Deadline extension agreed with client – save e-mail in Gen Docs" selectedoption>Deadline extension agreed with client – save e-mail in Gen Docs</option>

                                                dr = "Client selected a dummy or wrong deadline";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Client selected a dummy or wrong deadline" selectedoption>Client selected a dummy or wrong deadline</option>

                                                dr = "Higher word count than standard agreement for this turnaround time";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Higher word count than standard agreement for this turnaround time" selectedoption>Higher word count than standard agreement for this turnaround time</option>

                                                dr = "Availability of preferred linguist(s)";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Availability of preferred linguist(s)" selectedoption>Availability of preferred linguist(s)</option>

                                                dr = "Additional work required";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Additional work required" selectedoption>Additional work required</option>

                                                dr = "Other – explain in notes";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Other – explain in notes" selectedoption>Other – explain in notes</option>
                                                }
                                                </select>*@

                                                    <select id="DeadlineReasonInput" asp-for="DeadlineChangeReason" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" onchange="deadlineReason()">
                                                        <option value="-1">(Please select)</option>
                                                        @for (var i = 0; i < Model.AllDeadlineChangeReason.Count; i++)
                                                        {
                                                            <option value="@Model.AllDeadlineChangeReason.ElementAt(i).ReasonText" selected="@(Model.DeadlineChangeReason == Model.AllDeadlineChangeReason.ElementAt(i).ReasonText)">@Model.AllDeadlineChangeReason.ElementAt(i).ReasonText</option>
                                                        }
                                                    </select>
                                                    <label id="deadlineReasonRequired" class="text-danger" hidden>Please select a deadline change reason.</label>
                                                </td>
                                            </tr>
                                        }
                                        else
                                        {
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput" id="DeadlineReasonLabel" hidden>Deadline change reason:</label>&nbsp;
                                                </td>
                                                <td>
                                                    @*@{ var deadlineReason = Model.DeadlineChangeReason;}
                                                <select id="DeadlineReasonInput" asp-for="DeadlineChangeReason" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" onchange="deadlineReason()" hidden>
                                                @{
                                                @if (Model.DeadlineChangeReason == null || Model.DeadlineChangeReason == "")
                                                {
                                                <option value="-1" selected>Please select</option>
                                                }

                                                string dr = "Deadline extension agreed with client – save e-mail in Gen Docs";
                                                var selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Deadline extension agreed with client – save e-mail in Gen Docs" selectedoption>Deadline extension agreed with client – save e-mail in Gen Docs</option>

                                                dr = "Client selected a dummy or wrong deadline";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Client selected a dummy or wrong deadline" selectedoption>Client selected a dummy or wrong deadline</option>

                                                dr = "Higher word count than standard agreement for this turnaround time";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Higher word count than standard agreement for this turnaround time" selectedoption>Higher word count than standard agreement for this turnaround time</option>

                                                dr = "Availability of preferred linguist(s)";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Availability of preferred linguist(s)" selectedoption>Availability of preferred linguist(s)</option>

                                                dr = "Additional work required";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Additional work required" selectedoption>Additional work required</option>

                                                dr = "Other – explain in notes";
                                                selectedOption = Model.DeadlineChangeReason == dr ? "selected" : "";
                                                <option value="Other – explain in notes" selectedoption>Other – explain in notes</option>
                                                }
                                                </select>*@
                                                    <select id="DeadlineReasonInput" asp-for="DeadlineChangeReason" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" onchange="deadlineReason()" hidden>
                                                        <option value="-1">(Please select)</option>
                                                        @for (var i = 0; i < Model.AllDeadlineChangeReason.Count; i++)
                                                        {
                                                            <option value="@Model.AllDeadlineChangeReason.ElementAt(i).ReasonText">@Model.AllDeadlineChangeReason.ElementAt(i).ReasonText</option>
                                                        }
                                                    </select>
                                                    <label id="deadlineReasonRequired" class="text-danger" hidden>Please select a deadline change reason.</label>
                                                </td>
                                            </tr>
                                        }
                                        @if (Model.OverallDeliveryDeadline < DateTime.Now)
                                        {
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput">Overdue reason:</label>&nbsp;
                                                </td>
                                                <td>
                                                    @{
                                                        var overduereasonid = Model.OverdueReasonId;
                                                    }
                                                    <select id="OverdueReasonIDinput" asp-for="OverdueReasonId" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                        @{
                                                                                @if (Model.OverdueReasonId == null || Model.OverdueReasonId == 0)
                                                            {
                                                                                    <option value="-1" selected>Please select</option>
                                                            }

                                                            byte? odid = 1;
                                                            var selectedoption = Model.OverdueReasonId == odid ? "selected" : "";
                                                                                <option value="1" selectedoption>Missing PO</option>

                                                            odid = 2;
                                                            selectedoption = Model.OverdueReasonId == odid ? "selected" : "";
                                                                                <option value="2" selectedoption>Client review</option>

                                                            odid = 3;
                                                            selectedoption = Model.OverdueReasonId == odid ? "selected" : "";
                                                                                <option value="3" sselectedoption>Quality feedback investigation</option>

                                                            odid = 4;
                                                            selectedoption = Model.OverdueReasonId == odid ? "selected" : "";
                                                                                <option value="4" selectedoption>Missing source file/On hold</option>

                                                            odid = 5;
                                                            selectedoption = Model.OverdueReasonId == odid ? "selected" : "";
                                                                                <option value="5" selectedoption>Other (please comment)</option>
                                                        }
                                                    </select>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput">Overdue comment:</label>&nbsp;
                                                </td>
                                                <td>
                                                    <textarea id="OverdueReasonCommentinput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="OverdueComment">@Html.Encode(Model.OverdueComment)</textarea>
                                                </td>
                                            </tr>
                                        }
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Escalated to Sales lead:</label>&nbsp;
                                            </td>
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="escalatedcheckbox" name="escalatedcheckbox" @ViewBag.EscalatedToAccountManagerBool>
                                                    <label id="escalatedlabel" class="custom-control-label" for="escalatedcheckbox">@Html.Raw(ViewBag.EscalatedToAccountManagerStatus)</label>
                                                </div>

                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">
                                                @if (Model.EscalatedToAccountManager != null)
                                                {
                                                if ((bool)Model.EscalatedToAccountManager)
                                                {<span>This overdue job has been escalated to the Sales lead after following the established process</span>}
                                                else
                                                {<span>This overdue job has <b> not </b>been escalated to the Sales lead</span>}
                                                }
                                                else
                                                {<span>This overdue job has <b> not </b>been escalated to the Sales lead</span>}
                                                </label>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Linked to job order:</label>&nbsp;
                                            </td>
                                            @if (ViewBag.LinkedJobOrderID > 0)
                                            {
                                                <td>
                                                    <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.LinkedJobOrder)</label>
                                                </td>
                                            }
                                            else
                                            {
                                                
                                                <td>
                                                    <input type="text" id="Linkedjoborderinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                </td>
                                            }
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Order status:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label id="orderstatus" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.CompletedString)</label>
                                                @*@if (Model.ClientInvoiceId == null || Model.ClientInvoiceId == 0 || (Model.ClientInvoiceId != null && (Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue)))
                                                {*@
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" @ViewBag.JobCompletedReadOnly class="custom-control-input" id="completedcheckbox" name="completedcheckbox" @ViewBag.JobCompletedBool>
                                                    <label class="custom-control-label" for="completedcheckbox">Completed</label>
                                                </div>
                                                <input asp-for="OverallCompletedDateTime" value="@Model.OverallCompletedDateTime" type="hidden" />
                                                <input asp-for="ClientInvoiceId" value="@Model.ClientInvoiceId" type="hidden" />
                                                @*}*@
                                            </td>
                                        </tr>
                                    </table>
                                    <input asp-for="Id" value="@Model.Id" type="hidden" id="updatekeyinfojobitemid" />
                                </div>

                                @*<table width="100%" align="right" cellpadding="15">
                                <tr>
                                <td align="right">
                                <span class="d-inline 1-h-n hover-bg">*@
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-right:20px;padding-bottom:20px">
                                    @*@if (Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue)
                                    {*@
                                    @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateKeyInformation"><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                    @if (Model.EditPageEnabled == true)
                                    {
                                        <button id="updatekeyinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatekeyinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                    }
                                    @*}*@
                                </div>
                                @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateKeyInformation" disabled><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                @*</span>
                                </td>
                                </tr>
                                </table>*@
                            </form>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div id="panel-2" class="panel" data-panel-fullscreen="false" data-panel-close="false">
            <div class="panel-hdr">
                <i class="fal fa-info fa-2x color-black"></i> &nbsp; &nbsp;
                <h2>
                    General information
                </h2>
            </div>
            <div class="panel-container collapse">
                <div class="panel-content p-0">
                    <div class="d-flex flex-column">
                        @*<div class="bg-subtlelight-fade custom-scroll" style="height: fit-content">*@
                        <div class="h-100" style="width:100%">
                            <div class="d-flex flex-row px-3 pt-3 pb-2">
                                <table width="100%">
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Job order set up on:</label>&nbsp;
                                        </td>
                                        <td>
                                            <input type="text" readonly="readonly" id="SetUpDateinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.SubmittedDateTime.ToString("dddd dd MMMM yyyy HH:mm")">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Job order set up by:</label>&nbsp;
                                        </td>
                                        <td>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <div class="d-inline-block align-middle status status-success mr-3">
                                                            @{
                                                                var profileImage = ViewBag.SetUpByEmployeeImageBase64 != null ? ViewBag.SetUpByEmployeeImageBase64 : "/img/demo/avatars/" + (Settings.Theme.Avatar);
                                                            }
                                                            <span class="profile-image rounded-circle d-block" style="background-image:url('@(profileImage)'); background-size: cover;"></span>
                                                        </div>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.SetUpByEmployee)</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Order details last modified:</label>&nbsp;
                                        </td>
                                        <td>
                                            @*<input type="text" readonly="readonly" id="LastModifiedDateinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.LastModifiedDate">*@
                                            <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.LastModifiedDate)</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Order details last modified by:</label>&nbsp;
                                        </td>
                                        <td>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <div class="d-inline-block align-middle status status-success mr-3">
                                                            @{
                                                                var profileImageBase64 = ViewBag.LastModifiedByEmployeeImageBase64 != null ? ViewBag.LastModifiedByEmployeeImageBase64 : "/img/demo/avatars/" + (Settings.Theme.Avatar);
                                                            }
                                                            <span class="profile-image rounded-circle d-block" style="background-image:url('@(profileImageBase64)'); background-size: cover;"></span>
                                                        </div>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.LastModifiedByEmployee)</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-6">
        <div id="panel-2" class="panel" data-panel-fullscreen="false" data-panel-close="false">
            <div class="panel-hdr">
                <i class="fal fa-project-diagram fa-2x color-black"></i> &nbsp; &nbsp;
                <h2>
                    Project information
                </h2>
            </div>
            <div class="panel-container collapse">
                <div class="panel-content p-0">
                    <div class="d-flex flex-column">
                        @*<div class="bg-subtlelight-fade custom-scroll" style="height: fit-content;">*@
                        <div class="h-100" style="width:100%">
                            <form>
                                <div class="d-flex flex-row px-3 pt-3 pb-2">
                                    @*<div style="white-space: nowrap;">*@
                                    <table width="100%">
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Project manager:</label>&nbsp;
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <div class="d-inline-block align-middle status status-success mr-3">
                                                                @{
                                                                    var profileImagePM = ViewBag.ImageBase64 != null ? ViewBag.ImageBase64 : "/img/demo/avatars/" + (Settings.Theme.Avatar);
                                                                }
                                                                <span id="PMProfilImg" class="profile-image rounded-circle d-block" style="background-image: url('@(profileImagePM)'); background-size: cover; cursor:pointer" onclick="javascript:window.location.href='https://myplusbeta.publicisgroupe.net/HR/EmployeeProfile/'+@ViewBag.ProjectManagerID"></span>
                                                            </div>
                                                            &nbsp;
                                                        </td>
                                                        <td>
                                                            @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.ProjectManager)</label>*@

                                                            <select id="PMEmpIDinput" asp-for="ProjectManagerEmployeeId" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                                @for (var j = 0; j < Model.AllProjectManagerEmployees.Count(); j++)
                                                                {
                                                                    @if (Model.AllProjectManagerEmployees.ElementAt(j).Id == ViewBag.ProjectManagerID)
                                                                    {
                                                                        <option value="@Model.AllProjectManagerEmployees.ElementAt(j).Id" selected>@Model.AllProjectManagerEmployees.ElementAt(j).FirstName  @Model.AllProjectManagerEmployees.ElementAt(j).Surname</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@Model.AllProjectManagerEmployees.ElementAt(j).Id">@Model.AllProjectManagerEmployees.ElementAt(j).FirstName  @Model.AllProjectManagerEmployees.ElementAt(j).Surname</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">How we received this order:</label>&nbsp;
                                            </td>
                                            <td>
                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.JobOrderChannel)</label>*@

                                                <table>
                                                    <tr>
                                                        <td>
                                                            <select id="JobOrderChannelinput" asp-for="JobOrderChannelId" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                                @for (var j = 0; j < Model.AllJobOrderChannels.Count(); j++)
                                                                {
                                                                    @if (Model.AllJobOrderChannels.ElementAt(j).Id == ViewBag.JobOrderChannelID)
                                                                    {
                                                                        <option value="@Model.AllJobOrderChannels.ElementAt(j).Id" selected>@Model.AllJobOrderChannels.ElementAt(j).Name</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@Model.AllJobOrderChannels.ElementAt(j).Id">@Model.AllJobOrderChannels.ElementAt(j).Name</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </td>
                                                    </tr>
                                                </table>

                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Client notes:</label>&nbsp;
                                            </td>
                                            <td>
                                                <textarea id="ClientNotesinput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="ClientNotes">@Html.Encode(Model.ClientNotes)</textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Internal notes:</label>&nbsp;
                                            </td>
                                            <td>
                                                <textarea id="InternalNotesinput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="InternalNotes">@Html.Encode(Model.InternalNotes)</textarea>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Trial/test project?</label>&nbsp;
                                            </td>
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="trialcheckbox" name="trialcheckbox" @ViewBag.IsAtrialProjectBool>
                                                    <label class="custom-control-label" for="trialcheckbox">@Html.Raw(ViewBag.IsAtrialProjectStatus)</label>
                                                </div>

                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">
                                                @if (Model.IsAtrialProject)
                                                {<span>This is a <a href="TrialProjects.aspx">trial project/test piece</a> which the client will be using to evaluate our services</span>}
                                                else
                                                {<span>No</span>}
                                                </label>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Printing/packaging project?</label>&nbsp;
                                            </td>
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="PrintingProjectheckbox" name="PrintingProjectheckbox" @ViewBag.PrintingProjectBool>
                                                    <label class="custom-control-label" for="PrintingProjectheckbox">@Html.Raw(ViewBag.PrintingProjectStatus)</label>
                                                </div>

                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">
                                                @if (Model.PrintingProject != null)
                                                {
                                                if ((bool)Model.PrintingProject)
                                                {<span>This is a printing/packaging project, and the relevant workflow stated in the Operations Guidebook must be followed at all times. Please speak to your line manager</span>}
                                                else
                                                {<span>Not a printing/packaging project</span>}
                                                }
                                                else
                                                {<span>Not a printing/packaging project</span>}
                                                </label>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Sensitivity:</label>&nbsp;
                                            </td>
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="IsHighlyConfidentialcheckbox" name="IsHighlyConfidentialcheckbox" @ViewBag.IsHighlyConfidentialBool>
                                                    <label class="custom-control-label" for="IsHighlyConfidentialcheckbox">@Html.Raw(ViewBag.IsHighlyConfidentialStatus)</label>
                                                </div>

                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">
                                                @if (Model.IsHighlyConfidential)
                                                {<span><font color="red"><b>Highly confidential</b></font></span>}
                                                else
                                                {<span>Normal</span>}
                                                </label>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Priority:</label>&nbsp;
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            @{
                                                                var AllowPriority = !Model.AllowPriority;
                                                            }
                                                            <select id="Priorityinput" asp-for="Priority" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" disabled="@AllowPriority">

                                                                @if (Model.Priority == null)
                                                                {
                                                                    <option value="0" selected>(none selected)</option>
                                                                    <option value="1" style="font:bold;color:red">High</option>
                                                                    <option value="2" style="font:bold;color:green">Medium</option>
                                                                    <option value="3">Low</option>
                                                                }
                                                                else
                                                                {
                                                                    if (Model.Priority == 0)
                                                                    {
                                                                        <option value="0" selected>(none selected)</option>
                                                                        <option value="1" style="font:bold;color:red">High</option>
                                                                        <option value="2" style="font:bold;color:green">Medium</option>
                                                                        <option value="3">Low</option>
                                                                    }
                                                                    else if (Model.Priority == 1)
                                                                    {
                                                                        <option value="0">(none selected)</option>
                                                                        <option value="1" style="font:bold;color:red" selected>High</option>
                                                                        <option value="2" style="font:bold;color:green">Medium</option>
                                                                        <option value="3">Low</option>
                                                                    }
                                                                    else if (Model.Priority == 2)
                                                                    {
                                                                        <option value="0">(none selected)</option>
                                                                        <option value="1" style="font:bold;color:red">High</option>
                                                                        <option value="2" style="font:bold;color:green" selected>Medium</option>
                                                                        <option value="3">Low</option>
                                                                    }
                                                                    else if (Model.Priority == 3)
                                                                    {
                                                                        <option value="0">(none selected)</option>
                                                                        <option value="1" style="font:bold;color:red">High</option>
                                                                        <option value="2" style="font:bold;color:green">Medium</option>
                                                                        <option value="3" selected>Low</option>
                                                                    }
                                                                }
                                                            </select>

                                                            @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.Priority)</label>*@
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Network job folder:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.NetworkJobFolder)</label>
                                            </td>
                                        </tr>
                                    </table>
                                    <input asp-for="Id" value="@Model.Id" type="hidden" />
                                </div>
                                @*<table width="100%" align="right" cellpadding="15">
                                <tr>
                                <td align="right">
                                <span class="d-inline 1-h-n hover-bg">*@
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-right:20px;padding-bottom:20px">
                                    @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) && Model.EditPageEnabled == true)
                                    {
                                        @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateProjectInformation"><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                        <button id="updateprojectinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updateprojectinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                    }
                                </div>
                                @*</span>
                                </td>
                                </tr>
                                </table>*@
                            </form>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div id="panel-2" class="panel" data-panel-fullscreen="false" data-panel-close="false">
            <div class="panel-hdr">
                <i class="fal fa-money-check-alt fa-2x color-black"></i> &nbsp; &nbsp;
                <h2>
                    Financial information
                </h2>
            </div>
            <div class="panel-container collapse">
                <div class="panel-content p-0">
                    <div class="d-flex flex-column">
                        @*<div class="bg-subtlelight-fade custom-scroll" style="height: fit-content">*@
                        <div class="h-100" style="width:100%">
                            @*<form method="post" asp-action="UpdateFinancialInformation">*@
                            <form>
                                <div class="d-flex flex-row px-3 pt-3 pb-2">
                                    @*<div style="white-space: nowrap;">*@
                                    <table width="100%">
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Client currency:</label>&nbsp;
                                            </td>
                                            <td>
                                                <select id="ClientCurrencyinput" asp-for="ClientCurrencyId" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                    @for (var j = 0; j < Model.Currencies.Count(); j++)
                                                    {
                                                        @if (Model.Currencies.ElementAt(j).Id == Model.ClientCurrencyId)
                                                        {
                                                            <option value="@Model.Currencies.ElementAt(j).Id" selected>@Model.Currencies.ElementAt(j).Name</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@Model.Currencies.ElementAt(j).Id">@Model.Currencies.ElementAt(j).Name</option>
                                                        }
                                                    }
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Sub total order value:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.SubTotalOrderValue)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Surcharge value:</label>
                                                @if (Model.EarlyInvoiceDateTime == null || Model.EarlyInvoiceDateTime == DateTime.MinValue)
                                                {
                                                    <a id="surcharge-btn" href="#" data-toggle="modal" data-target="#surchargePopup" class="btn">
                                                        <i class="ni ni-settings"></i>
                                                    </a>
                                                }
                                                &nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput" id="surcharge-value-label">@Html.Raw(ViewBag.SurchargeValue)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Discount value:</label>
                                                @if (Model.EarlyInvoiceDateTime == null || Model.EarlyInvoiceDateTime == DateTime.MinValue)
                                                {
                                                    <a id="discount-btn" href="#" data-toggle="modal" data-target="#discountPopup" class="btn">
                                                        <i class="ni ni-settings"></i>
                                                    </a>
                                                }
                                                &nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput" id="discount-value-label">@Html.Raw(ViewBag.DiscountValue)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Total order value:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.TotalOrderValue)</label>
                                            </td>
                                        </tr>
                                        @if (ViewBag.AnticipatedOrderValueVisible == "true")
                                        {
                                            <tr>
                                                <td>
                                                <label class="form-label" for="simpleinput">Anticipated total order value:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.AnticipatedOrderValue)</label>
                                            </td>
                                        </tr>
                                        }
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Total payments to supplier:</label>&nbsp;
                                                <i class="fal fa-info-circle" style="font-size: 1.2rem;" data-toggle="popover" data-trigger="click" data-placement="top" title="" data-html="true" data-content='<span class="font-weight-lighter font-italic">(This is a GBP-based calculation which, where necessary, will have involved <a target="_blank" href="http://myplus/ExchangeRates.aspx">currency conversions</a>)</span>'></i>
                                                @*<i class="ni ni-info" title="This is a GBP total which, where necessary, will have involved currency conversions"></i>*@
                                                &nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.SterlingPaymentToSuppier)</label>
                                                @*<br />
                                                <i>
                                                (This is a GBP total which, where necessary, will have involved
                                                <a href="http://myplus/ExchangeRates.aspx">currency conversions</a>)
                                                </i>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Margin:</label>&nbsp;
                                                <i class="fal fa-info-circle" style="font-size: 1.2rem;" data-toggle="popover" data-trigger="click" data-placement="top" title="" data-html="true" data-content='<span class="font-weight-lighter font-italic">(This is a GBP-based calculation which, where necessary, will have involved <a target="_blank" href="http://myplus/ExchangeRates.aspx">currency conversions.</a> Any job items with language services "Commission/referral fees" or "Travel expenses" are excluded from margin calculations)</span>'></i>
                                                @*<i class="ni ni-info" title="This is a GBP-based calculation which, where necessary, will have involved currency conversions. Any job items with language services 'Commission/referral fees' or 'Travel expenses' are excluded from margin calculations"></i>*@
                                                &nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.Margin)</label>


                                                @*<br />
                                                <i>
                                                <label>
                                                (This is a GBP-based calculation which, where necessary, will have involved
                                                <a href="http://myplus/ExchangeRates.aspx">currency conversions</a>)
                                                </label>
                                                </i>
                                                <br />
                                                <i>
                                                <label>
                                                (Any job items with language services "Commission/referral fees" or "Travel expenses"
                                                are excluded from margin calculations)
                                                </label>
                                                </i>*@
                                            </td>
                                        </tr>
                                        @if (ViewBag.AnticipatedOrderValueVisible == "true")
                                        {
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput">Anticipated margin:</label>&nbsp;
                                                    <i class="fal fa-info-circle" style="font-size: 1.2rem;" data-toggle="popover" data-trigger="click" data-placement="top" title="" data-html="true" data-content='<span class="font-weight-lighter font-italic">(This is a GBP-based calculation which, where necessary, will have involved <a target="_blank" href="http://myplus/ExchangeRates.aspx">currency conversions.</a> Any job items with language services "Commission/referral fees" or "Travel expenses" are excluded from margin calculations)</span>'></i>
                                                    @*<i class="ni ni-info" title="This is a GBP-based calculation which, where necessary, will have involved currency conversions. Any job items with language services 'Commission/referral fees' or 'Travel expenses' are excluded from margin calculations"></i>*@
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.AnticipatedMargin)</label>
                                                </td>
                                            </tr>
                                        }
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Invoicing notes:</label>&nbsp;
                                            </td>
                                            <td>
                                                <textarea id="InvoicingNotesinput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="InvoicingNotes">@Html.Encode(Model.InvoicingNotes)</textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Client's PO number:</label>&nbsp;
                                            </td>
                                            <td>
                                                <input id="ClientPONumberimput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="ClientPonumber" value="@Model.ClientPonumber">
                                            </td>
                                        </tr>
                                        @if (ViewBag.OrgGroupId == 72112 || ViewBag.OrgGroupId == 72113 || ViewBag.OrgGroupId == 72114 || ViewBag.OrgGroupId == 72115)
                                        {
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput">HFM code IS:</label>&nbsp;
                                                </td>
                                                <td>
                                                    <input id="OrgHfmcodeIs" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="OrgHfmcodeIs" value="@Model.OrgHfmcodeIs">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label class="form-label" for="simpleinput">HFM code BS:</label>&nbsp;
                                                </td>
                                                <td>
                                                    <input id="OrgHfmcodeBs" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="OrgHfmcodeBs" value="@Model.OrgHfmcodeBs">
                                                </td>
                                            </tr>
                                        }
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Client invoice:</label>&nbsp;
                                            </td>
                                            <td>
                                                <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.ClientInvoice)</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">Early invoicing:</label>&nbsp;
                                            </td>
                                            @{
                                                var AllowEarlyInvoicing = !Model.AllowEarlyInvoicing;
                                            }
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" id="earlyinvoicingcheckbox" disabled="@AllowEarlyInvoicing" name="earlyinvoicingcheckbox" @ViewBag.EarlyInvoicingBool>
                                                    <label id="earlyinvoicinglabel" class="custom-control-label" for="earlyinvoicingcheckbox">@Html.Raw(ViewBag.EarlyInvoicing)</label>
                                                </div>
                                                @*<label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.EarlyInvoicing)</label>*@
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput" style="white-space:nowrap">@Html.Raw(ViewBag.HeaderCustomerSpecificField1Label):</label>&nbsp;
                                            </td>
                                            <td>
                                                <input id="CustomerSpecificField1Value" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="CustomerSpecificField1Value" value="@Model.CustomerSpecificField1Value">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">@Html.Raw(ViewBag.HeaderCustomerSpecificField2Label):</label>&nbsp;
                                            </td>
                                            <td>
                                                <input id="CustomerSpecificField2Value" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="CustomerSpecificField2Value" value="@Model.CustomerSpecificField2Value">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">@Html.Raw(ViewBag.HeaderCustomerSpecificField3Label):</label>&nbsp;
                                            </td>
                                            <td>
                                                <input id="CustomerSpecificField3Value" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="CustomerSpecificField3Value" value="@Model.CustomerSpecificField3Value">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label" for="simpleinput">@Html.Raw(ViewBag.HeaderCustomerSpecificField4Label):</label>&nbsp;
                                            </td>
                                            <td>
                                                <input id="CustomerSpecificField4Value" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" asp-for="CustomerSpecificField4Value" value="@Model.CustomerSpecificField4Value">
                                            </td>
                                        </tr>
                                    </table>
                                    <input asp-for="Id" value="@Model.Id" type="hidden" />
                                    <input id="EarlyInvoiceByEmpId" value="@Model.EarlyInvoiceByEmpId" type="hidden" />
                                    <input id="EarlyInvoiceDateTime" value="@Model.EarlyInvoiceDateTime" type="hidden" />
                                </div>
                                @*<table width="100%" align="right" cellpadding="15">
                                <tr>
                                <td align="right">
                                <span class="d-inline 1-h-n hover-bg">*@
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-right:20px;padding-bottom:20px">
                                    @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) && Model.EditPageEnabled == true)
                                    {
                                        @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateFinancialInformation"><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                        <button id="updatefinanceinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatefinanceinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                    }
                                </div>
                                @*</span>
                                </td>
                                </tr>
                                </table>*@
                            </form>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@if ((Model.IsCls == true || Model.TypeOfOrder == 3 || Model.TypeOfOrder == 4 || Model.TypeOfOrder == 5) || (ViewBag.GroupID == "72112" || ViewBag.GroupID == "72113"))
{
    <div class="row">

        @if (Model.IsCls == true || Model.TypeOfOrder == 3 || Model.TypeOfOrder == 4 || Model.TypeOfOrder == 5)
        {

            <div class="col-sm-6">
                <div id="panel-6" class="panel" data-panel-fullscreen="false" data-panel-close="false">
                    <div class="panel-hdr">
                        <i class="fal fa-list-alt fa-2x color-black color-black"></i> &nbsp; &nbsp;
                        <h2>
                            Creative Language Services / Transcreation & Production
                        </h2>
                    </div>
                    <div class="panel-container collapse">
                        <div class="panel-content p-0">
                            <div class="d-flex flex-column">
                                <div class="h-100" style="width:100%">
                                    <form>
                                        <div class="d-flex flex-row px-3 pt-3 pb-2">
                                            <table width="100%">
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Third party ID:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="ThirdPartyIDinput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(Model.PGDDetails == null ? "" : Model.PGDDetails.ThirdPartyId)">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Production contact:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="ProductionContactinput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(Model.PGDDetails == null ? "" : Model.PGDDetails.ProductionContact)">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Project status:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select name="pgdStatus" id="pgdStatus" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                            @foreach (var status in Model.PGDStatuses)
                                                            {
                                                                if (Model.PGDDetails == null)
                                                                {
                                                                    <option value="@status.Name">@status.Name</option>
                                                                }
                                                                else
                                                                {
                                                                    if (@Model.PGDDetails.ProjectStatus == status.Name)
                                                                    {
                                                                        <option value="@status.Name" selected="selected">@status.Name</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@status.Name">@status.Name</option>
                                                                    }
                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">IC PO number:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="ICPOnumberinput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(Model.PGDDetails == null ? "" : Model.PGDDetails.Icponumber)">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Glossary and reference material updated:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        @{
                                                            var glossarystatus = "";
                                                            var glossarychecked = "";
                                                            if (Model.PGDDetails == null)
                                                            {
                                                                glossarystatus = "<font color=\"red\">Glossary and reference material <b>not</b> updated</font>";
                                                            }
                                                            else
                                                            {
                                                                glossarychecked = Model.PGDDetails.GlossaryUpdated ? "checked" : "";
                                                                glossarystatus = Model.PGDDetails.GlossaryUpdated ? "<font color=\"green\">Glossary and reference material updated</font>" : "<font color=\"red\">Glossary and reference material <b>not</b> updated</font>";
                                                            }
                                                                                <div class="custom-control custom-switch">
                                                                                    <input type="checkbox" class="custom-control-input" id="glossaryupdatedcheckbox" name="glossaryupdatedcheckbox" @glossarychecked>
                                                                                    <label id="glossarystatusinput" class="custom-control-label" for="glossaryupdatedcheckbox">@Html.Raw(glossarystatus)</label>
                                                                                </div>
                                                        }
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">End client:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select name="endclient" id="endclient" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" onchange="endclientupdate()">
                                                            @*@if (@Model.EndClientId == null)
                                                    {*@
                                                            <option value="-1">(Please select)</option>
                                                            @*}*@
                                                            @foreach (var endclient in Model.EndClients)
                                                            {
                                                                if (@Model.EndClientId == endclient.Id)
                                                                {
                                                                    <option value="@endclient.Id" selected="selected">@endclient.Name</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@endclient.Id">@endclient.Name</option>
                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Campaign:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select name="campaign" id="campaign" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                            @*@if (@Model.CampaignId == null)
                                                    {*@
                                                            <option value="-1">(Please select)</option>
                                                            @*}*@
                                                            @foreach (var campaign in Model.Campaigns)
                                                            {
                                                                if (@Model.CampaignId == campaign.Id)
                                                                {
                                                                    <option value="@campaign.Id" selected="selected">@campaign.DataObjectName</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@campaign.Id">@campaign.DataObjectName</option>
                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Brand:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select name="brand" id="brand" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                            @*@if (@Model.BrandId == null)
                                                    {*@
                                                            <option value="-1">(Please select)</option>
                                                            @*}*@
                                                            @foreach (var brand in Model.Brands)
                                                            {
                                                                if (@Model.BrandId == brand.Id)
                                                                {
                                                                    <option value="@brand.Id" selected="selected">@brand.DataObjectName</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@brand.Id">@brand.DataObjectName</option>
                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Category:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select name="category" id="category" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                            @*@if (@Model.CategoryId == null)
                                                    {*@
                                                            <option value="-1">(Please select)</option>
                                                            @*}*@
                                                            @foreach (var category in Model.Categories)
                                                            {
                                                                if (@Model.CategoryId == category.Id)
                                                                {
                                                                    <option value="@category.Id" selected="selected">@category.DataObjectName</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@category.Id">@category.DataObjectName</option>
                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>

                                            </table>
                                        </div>

                                        <div class="form-group-row d-flex flex-row-reverse" style="padding-right:20px;padding-bottom:20px">
                                            @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) && Model.EditPageEnabled == true)
                                            {
                                                <button id="updateclsinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updateclsinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                            }
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }

        @if ((ViewBag.GroupID == "72112" || ViewBag.GroupID == "72113"))

        @*@if (ViewBag.GroupID == "18520")*@
        {
            <div class="col-sm-6">
                <div id="panel-7" class="panel" data-panel-fullscreen="false" data-panel-close="false">
                    <div class="panel-hdr">
                        <i class="fal fa-info-square fa-2x color-black color-black"></i> &nbsp; &nbsp;
                        <h2>
                            PGD Details
                        </h2>
                    </div>
                    <div class="panel-container collapse">
                        <div class="panel-content p-0">
                            <div class="d-flex flex-column">
                                <div class="h-100" style="width:100%">
                                    <form>
                                        <div class="d-flex flex-row px-3 pt-3 pb-2">
                                            <table width="100%">
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Approved end client charge:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="ApprovedEndClientChargeinput" type="number" min="0.00" step="0.01" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(Model.PGDDetails == null ? "":Model.PGDDetails.ApprovedEndClientCharge.ToString("0.00"))">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">End client charge currency:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <select id="endclientCurrencyIDinput" class="col-lg-7 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                            @if (Model.PGDDetails != null)
                                                            {
                                                                @if (Model.PGDDetails.EndClientChargeCurrencyId < 1)
                                                                {
                                                                    <option value="-1" selected="selected">Please select</option>
                                                                }
                                                                @foreach (var currency in Model.Currencies)
                                                                {
                                                                    @if (Model.PGDDetails.EndClientChargeCurrencyId == currency.Id)
                                                                    {
                                                                        <option value="@currency.Id" selected="selected">@(currency.Name + " (" + currency.StringValue + ")")</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@currency.Id">@(currency.Name + " (" + currency.StringValue + ")")</option>
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @foreach (var currency in Model.Currencies)
                                                                {
                                                                    <option value="@currency.Id">@(currency.Name + " (" + currency.StringValue + ")")</option>

                                                                }
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Approved end client charge (GBP):</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" id="ApprovedEndClientChargeGBPinput" for="simpleinput">@(Model.PGDDetails == null ? "" : Model.PGDDetails.ApprovedEndClientChargeGbp.ToString("0.00"))</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Variance (GBP):</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" id="Varianceinput" for="simpleinput">@(Model.PGDDetails == null ? "" : Model.PGDDetails.Variance)</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Balance sheet HFM number:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="BSHFnumberinput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(ViewBag.BSHFMNumber)">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label class="form-label" for="simpleinput">Income statement number:</label>&nbsp;
                                                    </td>
                                                    <td>
                                                        <input id="ISnumberinput" type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@(ViewBag.ISNumber)">
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>

                                        <div class="form-group-row d-flex flex-row-reverse" style="padding-right:20px;padding-bottom:20px">
                                            @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) && Model.EditPageEnabled == true)
                                            {
                                                @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateKeyInformation"><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                                <button id="updatepgdinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatepgdinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                            }
                                        </div>
                                        @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" asp-action="UpdateKeyInformation" disabled><i class="far fa-cloud-upload fa-3x"></i></button>*@
                                        @*</span>
                                </td>
                                </tr>
                                </table>*@
                                    </form>
                                    @*</div>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}

<div class="row">
    <div class="col-sm-12">
        <div id="panel-8" class="panel panel-locked" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-color="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
            <div class="panel-hdr">
                <h2>
                    Job order action centre
                </h2>
            </div>
            <div class="panel-hdr">
                <div class="panel-toolbar pr-3 align-self-end">
                    <ul id="demo_panel-tabs" class="nav nav-tabs border-bottom-0 nav-tabs-clean" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#tab_default-1" role="tab"><i class="fal fa-cogs fa-1x"></i>&nbsp;Automation</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab_default-2" role="tab"><i class="fal fa-child fa-1x"></i>&nbsp;Supplier</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab_default-3" role="tab"><i class="fal fa-ballot-check fa-1x"></i>&nbsp;Job management</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab_default-4" role="tab"><i class="fal fa-money-bill-wave fa-1x"></i>&nbsp;Finance</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="tab-content p-3">
                <div class="tab-pane fade show active" id="tab_default-1" role="tabpanel">
                    <div class="row justify-content-center">
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a id="create-ncc-btn" href="#" data-toggle="modal" data-target="#createStudioTaskPopup" class="btn">
                                    <div class="rounded-top w-100 bg-success-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-list icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Trados Studio automation</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        @{
                            var AllowImportWordCounts = "";
                            if (Model.EditPageEnabled == true)
                            {
                                AllowImportWordCounts = "#importJobOrderWordCounts";
                            }
                        }
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                @*<a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn">*@
                                <a class="btn btn-icon align-middle" id="select-div" href="#" data-toggle="modal"
                                   data-target="@AllowImportWordCounts" style="display:contents;">
                                    <div class="rounded-top w-100 bg-success-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-upload color-primary-500 icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Import word counts</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="@Html.Raw(ViewBag.CalculateCostLink)" class="btn">
                                    <div class="rounded-top w-100 bg-success-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-calculator color-primary-500 icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        @if (ViewBag.GroupID == "18584")
                        {
                            <div class="col-md col-lg-2 justify-content-center align-items-center">
                                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                    <a onclick="runFEAutomation()" class="btn" id="FEAutomation">
                                        <div class="rounded-top w-100 bg-success-50">
                                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                                <div class="icon-stack fa-6x">
                                                    <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                    <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                    <i class="fal fa-file-spreadsheet color-primary-500 icon-stack-1x text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                            <span class="d-block text-truncate text-muted">Run FE automation</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="col-md col-lg-2 justify-content-center align-items-center">
                                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                    <a onclick="runFEDeliveryAutomation()" class="btn" id="FEAutomationMerge">
                                        <div class="rounded-top w-100 bg-success-50">
                                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                                <div class="icon-stack fa-6x">
                                                    <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                    <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                    <i class="fal fa-files-medical color-primary-500 icon-stack-1x text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                            <span class="d-block text-truncate text-muted">Run FE merge automation</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="tab-pane fade" id="tab_default-2" role="tabpanel">
                    <div class="row justify-content-center">
                        @*<div class="col-md col-lg-2 justify-content-center align-items-center">
                        <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                        <a href="#" class="btn">
                        <div class="rounded-top w-100 bg-primary-50">
                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                        <div class="icon-stack fa-6x">
                        <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                        <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                        <i class="fal fa-file icon-stack-1x text-white"></i>
                        </div>
                        </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                        <span class="d-block text-truncate text-muted">Generate job briefs</span>
                        </div>
                        </a>
                        </div>
                        </div>*@
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="http://myplus/UpdateSupplierDeadlines.aspx?OrderID=@Model.Id" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-watch icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Update supplier deadline(s)</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        @if (Model.BMWSendTranslation == true)
                        {
                            <div class="col-md col-lg-2 justify-content-center align-items-center">
                                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                    <a href="http://myplus/SendTranslationJobItemsToSupplier.aspx?OrderID=@Model.Id" class="btn">
                                        <div class="rounded-top w-100 bg-primary-50">
                                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                                <div class="icon-stack fa-6x">
                                                    <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                    <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                    <i class="fal fa-send-backward icon-stack-1x text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                            <span class="d-block text-truncate text-muted">Send job items to suplier(s)</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        }
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-envelope icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Send an e-mail to all suppliers</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab_default-3" role="tabpanel">
                    <div class="row justify-content-center">
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="http://myplus/CloseJobItems.aspx?OrderID=@Model.Id" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-check-double icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Complete job item(s)</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="@Html.Raw(ViewBag.MoveOrderLink)" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-shipping-fast icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Move this order</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="@Html.Raw(ViewBag.DeleteJobFilesLink)" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-remove-format icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Delete job files</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="@Html.Raw(ViewBag.DeleteLink)" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-recycle icon-stack-1x text-white"></i>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Delete this order</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab_default-4" role="tabpanel">
                    <div class="row justify-content-center">
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-dollar-sign icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Cost confirmation</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="@Html.Raw(ViewBag.InvoiceOrderLink)" class="btn">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-receipt icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Invoice this order</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="#" class="btn" onclick="runfinanceauditlog();">
                                    <div class="rounded-top w-100 bg-primary-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-book icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Finance audit log</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*<div style="overflow-x: auto; width: max-content">*@
<div>

    <div class="row justify-content-left px-3">

        @*<div class="col-sm-12">*@
        <div>
            <div id="panel-9" class="panel" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
                <div class="panel-hdr">


                    <h2>
                        <i class="fal fa-language fa-2x color-black"></i> &nbsp; &nbsp;
                        Job items&nbsp;
                        @if ((Model.EarlyInvoiceDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) && ViewBag.AllowedToAddJobItem == "1")
                        {
                            <a asp-controller="JobItem" asp-action="JobItem" asp-route-OrderID=@Model.Id target="_blank" class="btn p-1"><i class="fad fa-plus-circle d-flex align-items-center" style="--fa-primary-color: white; --fa-secondary-color: green; font-size: 18px;" data-toggle="popover" data-trigger="hover" data-placement="top" title="" data-html="true" data-content="Add job item"></i></a>
                        }
                    </h2>
                </div>

                <div class="tab-content p-12">
                    <div>

                        @for (var j = 0; j < Model.JobItems.Count(); j++)
                        {
                            @if (j == 0 || (j > 0 && (Model.JobItems.ElementAt(j).SourceLanguageIANACode != Model.JobItems.ElementAt(j - 1).SourceLanguageIANACode)))
                            {
                                @*<div style="overflow-x:auto;">*@
                                <div>
                                    <table style="width: max-content" border="1">
                                        <tbody>
                                            <tr>
                                                <td width="150px" align="center">
                                                    @{
                                                        var sourcepath = (String.Format(ViewBag.CurrentDirectory + "/img/Flags/{0}.png", Model.JobItems.ElementAt(j).SourceLanguageIANACode.ToString())).Replace(" /", "/");

                                                        if (System.IO.File.Exists(@sourcepath) == true)
                                                        {
                                                                                <img src="/img/Flags/@(Model.JobItems.ElementAt(j).SourceLanguageIANACode.ToString()).png" style="height:48px;" />
                                                        }
                                                        else
                                                        {
                                                            sourcepath = (String.Format(ViewBag.CurrentDirectory + "/img/Flags/{0}.png", Model.JobItems.ElementAt(j).SourceLanguageIANACode.ToString().Substring(0, 2))).Replace(" /", "/");

                                                            if (System.IO.File.Exists(@sourcepath) == true)
                                                            {
                                                                                    <img src="/img/Flags/@(Model.JobItems.ElementAt(j).SourceLanguageIANACode.ToString().Substring(0, 2)).png" style="height:48px;" />
                                                            }
                                                            else
                                                            {
                                                                                    <img src="/img/Flags/none.png" style="height:48px;" />
                                                            }
                                                        }
                                                    }
                                                    <br />
                                                    <span title="@Model.JobItems.ElementAt(j).SourceLanguageName"><b>@Model.JobItems.ElementAt(j).SourceLanguageIANACode</b></span>
                                                </td>
                                                <td style="padding-bottom: 10px; padding-top: 10px ">
                                                    @*Select all languages
                                            <br /><br />*@
                                                    @{
                                                        int counter = j;
                                                        int pos = j;

                                                                            @while (counter < Model.JobItems.Count())
                                                        {
                                                                                <div style="padding-left: 15px; padding-right: 15px; padding-top: 5px">
                                                                                    <table style="width:max-content" border="1">
                                                                                        <tbody>

                                                                                            <tr>

                                                                                                @for (var i = counter; i < Model.JobItems.Count(); i++)
                                                                            {
                                                                                                    @if ((Model.JobItems.ElementAt(i).SourceLanguageIANACode == Model.JobItems.ElementAt(j).SourceLanguageIANACode) && ((i == counter) || (i > 0 && (Model.JobItems.ElementAt(i).TargetLanguageIANACode == Model.JobItems.ElementAt(i - 1).TargetLanguageIANACode))))
                                                                                {
                                                                                    if (i == counter)
                                                                                    {
                                                                                                            <td style="width:100px">
                                                                                                                <table style="width:110px">
                                                                                                                    <tr>

                                                                                                                        <!--<td>-->
                                                                                                                        @*<button class="btn btn-panel" id="@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode expand" onclick="expandCurrentRow('@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode')">+</button>*@
                                                                                                                        <!--<img src="/img/Flags/DE.png" style="height:32px;" id="@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode expand" onclick="expandCurrentRow('@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode')">
                                                                                                                        </td>-->
                                                                                                                        <td style="vertical-align:middle;align-items:start" colspan="2">
                                                                                                                            @{
                                                                                                            var path = (String.Format(ViewBag.CurrentDirectory + "/img/Flags/{0}.png", Model.JobItems.ElementAt(i).TargetLanguageIANACode.ToString())).Replace(" /", "/");

                                                                                                            if (System.IO.File.Exists(@path) == true)
                                                                                                            {
                                                                                                                                                        <img src="/img/Flags/@(Model.JobItems.ElementAt(i).TargetLanguageIANACode.ToString()).png" style="height:32px;cursor:pointer" title="Expand/Collapse" id="@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode expand" onclick="expandCurrentRow('@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode')" />
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                path = (String.Format(ViewBag.CurrentDirectory + "/img/Flags/{0}.png", Model.JobItems.ElementAt(i).TargetLanguageIANACode.ToString().Substring(0, 2))).Replace(" /", "/");

                                                                                                                if (System.IO.File.Exists(@path) == true)
                                                                                                                {
                                                                                                                                                            <img src="/img/Flags/@(Model.JobItems.ElementAt(i).TargetLanguageIANACode.ToString().Substring(0, 2)).png" style="height:32px;cursor:pointer" title="Expand/Collapse" id="@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode expand" onclick="expandCurrentRow('@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode')" />
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                                                            <img src="/img/Flags/none.png" style="height:32px;cursor:pointer" title="Expand/Collapse" id="@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode expand" onclick="expandCurrentRow('@Model.JobItems.ElementAt(i).SourceLanguageIANACode$@Model.JobItems.ElementAt(i).TargetLanguageIANACode')" />
                                                                                                                }
                                                                                                            }
                                                                                                                            }
                                                                                                                            &nbsp;
                                                                                                                            <span title="@Model.JobItems.ElementAt(i).TargetLanguageName"><font color="black"><b>@Model.JobItems.ElementAt(i).TargetLanguageIANACode</b></font></span>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>

                                                                                                            </td>
                                                                                        pos = i;
                                                                                    }

                                                                                                        <td bgcolor="@Model.JobItems.ElementAt(i).StatusColour" style="width: 400px; vertical-align: middle; padding-left: 15px; padding-right: 15px">
                                                                                                            @*;align-items:stretch*@
                                                                                                            @*<table width="100%">
                                                                <tr>
                                                                <td>*@
                                                                                                            <font color="black"><b>@Model.JobItems.ElementAt(i).LanguageServiceName</b></font>
                                                                                                            @*</td>
                                                                <td align="right">*@
                                                                                                            &nbsp;
                                                                                                            @*<button class="@(Settings.Theme.IconPrefix) btn btn-outline-default" style="background-color:white" type="submit" title="Save" onclick="savejobitem(@Model.JobItems.ElementAt(i).Id);"><i class="far fa-cloud-upload fa-1x"></i></button>*@
                                                                                                            @*</td>
                                                                </tr>
                                                                </table>*@
                                                                                                            |
                                                                                                            &nbsp;
                                                                                                            @Convert.ToDecimal(Model.JobItems.ElementAt(i).Margin).ToString("N2")%

                                                                                                            &nbsp;
                                                                                                            @{
                                                                                            var opacity = 0;
                                                                                            if (Model.JobItems.ElementAt(i).VisibleStatus == "(Not visible)")
                                                                                            {
                                                                                                opacity = 1;
                                                                                            }

                                                                                                                                    @*<img id="@Model.JobItems.ElementAt(i).Id$Invisible" src="/img/InvisibleIcon_small.png" style="opacity:@(opacity)">*@

                                                                                                                                    <i id="@Model.JobItems.ElementAt(i).Id$Invisible" class="fas fa-eye-slash" style="opacity:@(opacity)"></i>
                                                                                                            }

                                                                                                            &nbsp;
                                                                                                            <a style="float:right;" href="https://myplusbeta.publicisgroupe.net/JobItem?Id=@Model.JobItems.ElementAt(i).Id"><font color="black"><u>@Model.JobItems.ElementAt(i).Id</u></font></a>
                                                                                                            &nbsp;

                                                                                                            @{
                                                                                            if (Model.JobItems.ElementAt(i).Status == "Completed")
                                                                                            {
                                                                                                                                        <label style="float: right;">&nbsp;&nbsp;</label>
                                                                                                                                        <i class="far fa-check-circle" style="float: right;padding:4px;color:#fff"></i>

                                                                                                                                        @*<img src="/img/SuccessIcon.gif" style="float:right;" />*@



                                                                                            }
                                                                                                            }

                                                                                                        </td>
                                                                                    if (i == (Model.JobItems.Count() - 1))
                                                                                    {
                                                                                        counter = (i + 1);
                                                                                    }

                                                                                }
                                                                                else
                                                                                {
                                                                                    //if (i == 0 || i == (Model.JobItems.Count() - 1))
                                                                                    if (i == 0 || i == Model.JobItems.Count())
                                                                                    {
                                                                                        counter = (i + 1);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                                            @if (Model.JobItems.ElementAt(i).SourceLanguageIANACode == Model.JobItems.ElementAt(j).SourceLanguageIANACode)
                                                                                        {
                                                                                            counter = i;
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            counter = (i + 1);
                                                                                        }
                                                                                    }

                                                                                    break;
                                                                                }
                                                                            }
                                                                                            </tr>
                                                                                            <tr id="@Model.JobItems.ElementAt(j).SourceLanguageIANACode$@Model.JobItems.ElementAt(pos).TargetLanguageIANACode row" style="display: none">
                                                                                                @*;width:max-content*@
                                                                                                @*<td>
                                                            <table class="table m-0 table-bordered table-striped" id="table-example">
                                                            <tbody>
                                                            <tr>*@
                                                                                                <td width="100px">
                                                                                                    @* @Model.JobItems.ElementAt(pos).TargetLanguageName*@
                                                                                                </td>
                                                                                                @for (var k = pos; k < Model.JobItems.Count(); k++)
                                                                            {
                                                                                                    @if (k == pos || (Model.JobItems.ElementAt(k).SourceLanguageIANACode == Model.JobItems.ElementAt(pos).SourceLanguageIANACode && Model.JobItems.ElementAt(k).TargetLanguageIANACode == Model.JobItems.ElementAt(pos).TargetLanguageIANACode))
                                                                                {



                                                                                                        <td bgcolor="@Model.JobItems.ElementAt(k).StatusBGColour" width="400px" style="padding-top:5px;padding-left:15px;padding-right:15px">
                                                                                                            <form>
                                                                                                                <table bgcolor="@Model.JobItems.ElementAt(k).StatusBGColour">
                                                                                                                    <tbody>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Visible</b>

                                                                                                                            </td>
                                                                                                                            <td colspan="2">

                                                                                                                                @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                            {
                                                                                                                                    <div class="custom-control custom-switch bg-transparent">
                                                                                                                                        <input type="checkbox" class="custom-control-input" id="@Model.JobItems.ElementAt(k).Id$visiblecheckbox" @Model.JobItems.ElementAt(k).Visible>
                                                                                                                                        <label class="custom-control-label" for="@Model.JobItems.ElementAt(k).Id$visiblecheckbox" id="@Model.JobItems.ElementAt(k).Id$visiblemessage">@Model.JobItems.ElementAt(k).VisibleStatus</label>
                                                                                                                                    </div>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <div class="custom-control custom-switch bg-transparent">
                                                                                                                                        <input type="checkbox" class="custom-control-input" id="@Model.JobItems.ElementAt(k).Id$visiblecheckbox" @Model.JobItems.ElementAt(k).Visible disabled>
                                                                                                                                        <label class="custom-control-label" for="@Model.JobItems.ElementAt(k).Id$visiblecheckbox">@Model.JobItems.ElementAt(k).VisibleStatus</label>
                                                                                                                                    </div>
                                                                                                            }


                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Supplier deadline</b>
                                                                                                                            </td>
                                                                                                                            <td colspan="2">
                                                                                                                                @{
                                                                                                                string supplierdeadline = "";
                                                                                                                                                        @if (Model.JobItems.ElementAt(k).SupplierCompletionDeadline != null && Model.JobItems.ElementAt(k).SupplierCompletionDeadline != DateTime.MinValue)
                                                                                                                {
                                                                                                                    supplierdeadline = @Convert.ToDateTime(Model.JobItems.ElementAt(k).SupplierCompletionDeadline).ToString("yyyy-MM-ddTHH:mm");
                                                                                                                }
                                                                                                                                }
                                                                                                                                @if ((Model.JobItems.ElementAt(k).WeCompletedItemDateTime == null || Model.JobItems.ElementAt(k).WeCompletedItemDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                            {
                                                                                                                                    <input type="datetime-local" id="@Model.JobItems.ElementAt(k).Id$Deadlineinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="text-indent:2px" value="@supplierdeadline">
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <input type="datetime-local" id="@Model.JobItems.ElementAt(k).Id$Deadlineinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="text-indent:2px" value="@supplierdeadline" readonly>
                                                                                                            }
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                <b>Assigned</b>&nbsp;
                                                                                                                            </td>
                                                                                                                            @*@if (Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId != null)
                                                                                {
                                                                                @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                {
                                                                                <td>Linguistic supplier</td>
                                                                                }
                                                                                else
                                                                                {
                                                                                <td>Client contact</td>
                                                                                }*@

                                                                                                                            <td width="170px">
                                                                                                                                @*@if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                    {
                                                                                    <select id="@Model.JobItems.ElementAt(k).Id$SupplierOrContactinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white">
                                                                                    @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == null || Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                    {
                                                                                    <option value="true" selected>Linguistic supplier</option>
                                                                                    <option value="false">Client contact</option>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                    <option value="false" selected>Linguistic supplier</option>
                                                                                    <option value="true" selected>Client contact</option>
                                                                                    }
                                                                                    </select>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                    <select id="@Model.JobItems.ElementAt(k).Id$SupplierOrContactinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" disabled>
                                                                                    @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == null || Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                    {
                                                                                    <option value="true" selected>Linguistic supplier</option>
                                                                                    <option value="false">Client contact</option>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                    <option value="false" selected>Linguistic supplier</option>
                                                                                    <option value="true" selected>Client contact</option>
                                                                                    }
                                                                                    </select>
                                                                                    }*@
                                                                                                                                @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == null || Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                                            {
                                                                                                                                    <input type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 border-bottom-0 px-0 bg-transparent" value="Linguistic supplier" readonly>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <input type="text" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 border-bottom-0 px-0 bg-transparent" value="Client contact" readonly>
                                                                                                            }
                                                                                                                            </td>

                                                                                                                            <td>
                                                                                                                                @*@if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                    {
                                                                                    <input type="number" id="@Model.JobItems.ElementAt(k).Id$SupplierOrReviewerIDinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="text-indent:2px" value="@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId">
                                                                                    }
                                                                                    else
                                                                                    {*@
                                                                                                                                @*<input type="number" id="@Model.JobItems.ElementAt(k).Id$SupplierOrReviewerIDinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="text-indent:2px" value="@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId" readonly>*@
                                                                                                                                @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                                            {
                                                                                                                                    <a href="https://myplusbeta.publicisgroupe.net/Linguist?id=@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId" target="_blank" id="@Model.JobItems.ElementAt(k).Id$SupplierIDinput" title="@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId">@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId</a>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <a href="http://myplusbeta.publicisgroupe.net/Contact?contactid=@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId" target="_blank">@Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId</a>
                                                                                                            }
                                                                                                                                @*}*@
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                @*width="200px"*@
                                                                                                                                @if (Model.JobItems.ElementAt(k).LinguisticSupplierOrClientReviewerId != null)
                                                                                                            {
                                                                                                                                    @if (Model.JobItems.ElementAt(k).SupplierIsClientReviewer == false)
                                                                                                                {
                                                                                                                                        <div style="width:25px; line-height:25px; border-radius:50%; text-align:center; border: 0; background-color:orangered" title="@Model.JobItems.ElementAt(k).SupplierName">
                                                                                                                                            <font color="white">@Model.JobItems.ElementAt(k).SuppliersInitials.ToString()</font>
                                                                                                                                        </div>
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                                        <div style="width:25px; line-height:25px; border-radius:50%; text-align:center; border: 0; background-color:orangered" title="@Model.JobItems.ElementAt(k).ContactName">
                                                                                                                                            <font color="white">@Model.JobItems.ElementAt(k).ContactsInitials.ToString()</font>
                                                                                                                                        </div>
                                                                                                                }
                                                                                                            }
                                                                                                                                @*&nbsp;
                                                                                    @if (Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue)
                                                                                    {
                                                                                    <div class="custom-control custom-switch col-4">
                                                                                    <input type="checkbox" class="custom-control-input" id="internalLinguist">
                                                                                    <label class="custom-control-label" for="internalLinguist">Use translate plus internal linguist</label>
                                                                                    </div>
                                                                                    }*@
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Costs</b>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                Client<br />
                                                                                                                                <table>
                                                                                                                                    <tr>
                                                                                                                                        <td>@Model.JobItems.ElementAt(k).ClientCurrency&nbsp;</td>
                                                                                                                                        <td>
                                                                                                                                            @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                                        {
                                                                                                                                                <input type="text" id="@Model.JobItems.ElementAt(k).Id$ChargeToClientinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width:80px;text-indent:2px" value="@String.Format("{0:N2}", Model.JobItems.ElementAt(k).ChargeToClient)">
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                                                <input type="text" id="@Model.JobItems.ElementAt(k).Id$ChargeToClientinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@String.Format("{0:N2}", Model.JobItems.ElementAt(k).ChargeToClient)" readonly>
                                                                                                                        }
                                                                                                                                        </td>
                                                                                                                                    </tr>
                                                                                                                                </table>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                Supplier<br />
                                                                                                                                <table>
                                                                                                                                    <tr>
                                                                                                                                        <td>
                                                                                                                                            @Model.JobItems.ElementAt(k).SupplierCurrency&nbsp;
                                                                                                                                        </td>
                                                                                                                                        <td>
                                                                                                                                            @if ((Model.JobItems.ElementAt(k).WeCompletedItemDateTime == null || Model.JobItems.ElementAt(k).WeCompletedItemDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                                        {
                                                                                                                                                <input type="text" id="@Model.JobItems.ElementAt(k).Id$PaymentToSupplierinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width: 80px; text-indent: 2px" value="@String.Format("{0:N2}", Model.JobItems.ElementAt(k).PaymentToSupplier)">
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                                                <input type="text" id="@Model.JobItems.ElementAt(k).Id$PaymentToSupplierinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@String.Format("{0:N2}", Model.JobItems.ElementAt(k).PaymentToSupplier)" readonly>
                                                                                                                        }
                                                                                                                                        </td>
                                                                                                                                    </tr>
                                                                                                                                </table>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Minimum charge</b>
                                                                                                                            </td>
                                                                                                                            @*@if (Model.JobItems.ElementAt(k).MinimumSupplierChargeApplied == true)
                                                                                {
                                                                                <td colspan="2">Yes</td>
                                                                                }
                                                                                else
                                                                                {
                                                                                <td colspan="2">No</td>
                                                                                }*@
                                                                                                                            <td colspan="2">
                                                                                                                                @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                            {
                                                                                                                                    <select id="@Model.JobItems.ElementAt(k).Id$MinSupplierChargeAppliedinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width:50px">
                                                                                                                                        @if (Model.JobItems.ElementAt(k).MinimumSupplierChargeApplied == true)
                                                                                                                    {
                                                                                                                                            <option value="false">No</option>
                                                                                                                                            <option value="true" selected>Yes</option>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                                            <option value="false" selected>No</option>
                                                                                                                                            <option value="true">Yes</option>
                                                                                                                    }
                                                                                                                                    </select>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <select id="@Model.JobItems.ElementAt(k).Id$MinSupplierChargeAppliedinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" disabled>
                                                                                                                                        @if (Model.JobItems.ElementAt(k).MinimumSupplierChargeApplied == true)
                                                                                                                    {
                                                                                                                                            <option value="false">No</option>
                                                                                                                                            <option value="true" selected>Yes</option>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                                            <option value="false" selected>No</option>
                                                                                                                                            <option value="true">Yes</option>
                                                                                                                    }
                                                                                                                                    </select>
                                                                                                            }
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Margin</b>
                                                                                                                            </td>
                                                                                                                            <td colspan="2">
                                                                                                                                @Convert.ToDecimal(Model.JobItems.ElementAt(k).Margin).ToString("N2")%
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="1">
                                                                                                                                <b>Status</b>
                                                                                                                            </td>
                                                                                                                            <td colspan="3" align="center">
                                                                                                                                @Model.JobItems.ElementAt(k).Status
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Work time</b>
                                                                                                                            </td>
                                                                                                                            <td colspan="2" style="white-space: nowrap">
                                                                                                                                <table style="white-space: nowrap">
                                                                                                                                    <tr style="white-space: nowrap">
                                                                                                                                        <td>
                                                                                                                                            @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                                        {
                                                                                                                                                <input type="number" min="0" id="@Model.JobItems.ElementAt(k).Id$WorkTimeHourinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width: 45px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes / 60)">
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                                                <input type="number" min="0" id="@Model.JobItems.ElementAt(k).Id$WorkTimeHourinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 45px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes / 60)" readonly>
                                                                                                                        }
                                                                                                                                        </td>
                                                                                                                                        <td style="vertical-align: middle ">
                                                                                                                                            h&nbsp;
                                                                                                                                        </td>
                                                                                                                                        <td>
                                                                                                                                            @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                                        {
                                                                                                                                                <input type="number" max="60" maxlength="2" min="0" id="@Model.JobItems.ElementAt(k).Id$WorkTimeMinutesinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width: 45px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes % 60).ToString("00")">
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                                                <input type="number" max="60" maxlength="2" min="0" id="@Model.JobItems.ElementAt(k).Id$WorkTimeMinutesinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 45px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes % 60).ToString("00")" readonly>
                                                                                                                        }
                                                                                                                                        </td>
                                                                                                                                        <td style="vertical-align:middle">
                                                                                                                                            m
                                                                                                                                        </td>
                                                                                                                                    </tr>
                                                                                                                                </table>

                                                                                                                                @*@Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes / 60)h  @Convert.ToInt32(Model.JobItems.ElementAt(k).WorkMinutes % 60).ToString("00")m*@

                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        @*<tr>
                                                                            <td colspan="4" align="center">
                                                                            <b>Word counts</b>
                                                                            </td>
                                                                            </tr>*@
                                                                                                                        <tr>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Client word counts</b>
                                                                                                                            </td>
                                                                                                                            <td colspan="2">
                                                                                                                                <b>Supplier word counts</b>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                <b>New</b>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                            {
                                                                                                                                    <input type="number" min="0" id="@Model.JobItems.ElementAt(k).Id$NewClientWordCountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).NewClientWordCount)">
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <input type="number" min="0" id="@Model.JobItems.ElementAt(k).Id$NewClientWordCountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).NewClientWordCount)" readonly>
                                                                                                            }
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                <b>New</b>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                            {
                                                                                                                                    <input type="number" pattern="[0-9]{2}" min="0" id="@Model.JobItems.ElementAt(k).Id$NewSupplierWordCountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-white" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).NewSupplierWordCount)">
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                                    <input type="number" pattern="[0-9]{2}" min="0" id="@Model.JobItems.ElementAt(k).Id$NewSupplierWordCountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).NewSupplierWordCount)" readonly>
                                                                                                            }
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                <b>Total</b>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                <input type="number" readonly="readonly" min="0" id="@Model.JobItems.ElementAt(k).Id$TotalClientWordCount" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 border-bottom-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).TotalClientWordCount)">
                                                                                                                                @*@Convert.ToInt32(Model.JobItems.ElementAt(k).TotalClientWordCount)*@
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                <b>Total</b>
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                <input type="number" readonly="readonly" min="0" id="@Model.JobItems.ElementAt(k).Id$TotalSupplierWordCount" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 border-bottom-0 px-0 bg-transparent" style="width: 80px; text-indent: 2px" value="@Convert.ToInt32(Model.JobItems.ElementAt(k).TotalSupplierWordCount)">
                                                                                                                                @*@Convert.ToInt32(Model.JobItems.ElementAt(k).TotalSupplierWordCount)*@
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </tbody>
                                                                                                                </table>
                                                                                                                <table bgcolor="@Model.JobItems.ElementAt(k).StatusBGColour" width="100%">
                                                                                                                    <tbody>
                                                                                                                        <tr>
                                                                                                                            <td colspan="4">
                                                                                                                                <div class="tab-content p-1">
                                                                                                                                    <div class="tab-pane fade show active" id="tab_default-1" role="tabpanel">
                                                                                                                                        <div class="row" style="width: 100%; padding: 0px">

                                                                                                                                            <div class="col-sm-2" style="height: 44px">
                                                                                                                                                @*<div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                <a href="http://myplus/CalculateJobCosts.aspx?JobItemID=@Model.JobItems.ElementAt(k).Id" class="btn btn-outline-success" title="Calculate job costs" style="width:57px;padding:5px">
                                                                                                                                                    @*<div class="rounded-top w-100 bg-primary-50">*@
                                                                                                                                                    <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                        <span class="icon-stack fa-2x">
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                            <i class="fal fa-percentage icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                        </span>
                                                                                                                                                    </div>
                                                                                                                                                    @*</div>*@
                                                                                                                                                    @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                </a>
                                                                                                                                                @*</div>*@
                                                                                                                                            </div>




                                                                                                                                            <div class="col-sm-2" style="height: 44px">
                                                                                                                                                @*<div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                <a href="http://myplus/SendItemToLinguistOrReviewerViaiplus.aspx?JobItemID=@Model.JobItems.ElementAt(k).Id" class="btn btn-outline-success" title="Send job item" style="width:57px;padding:5px">
                                                                                                                                                    @*<div class="rounded-top w-100 bg-primary-50">*@
                                                                                                                                                    <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                        <span class="icon-stack fa-2x">
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                            <i class="fal fa-arrow-square-up icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                        </span>
                                                                                                                                                    </div>
                                                                                                                                                    @*</div>*@
                                                                                                                                                    @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                </a>
                                                                                                                                                @*</div>*@
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-2" style="height: 44px">
                                                                                                                            @* <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                            <a href="#" class="btn btn-outline-success" title="Clone this job item" style="width:57px;padding:5px" onclick="cloneOrder(@Model.JobItems.ElementAt(k).Id,@Model.Id)">
                                                                                                                                @*<div class="rounded-top w-100 h-100 bg-primary-50">*@
                                                                                                                                <div class="rounded-top d-flex align-items-lg-center justify-content-lg-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                    <div class="icon-stack fa-2x">
                                                                                                                                        <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                        <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                        <i class="far fa-copy icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                                @*</div>*@
                                                                                                                                @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                            </a>
                                                                                                                            @*</div>*@
                                                                                                                        </div>
                                                                                                                                            @if (Model.JobItems.ElementAt(k).SupplierCompletedItemDateTime != null)
                                                                                                                        {
                                                                                                                                                @if (Model.RateTheLinguist == true)
                                                                                                                            {
                                                                                                                                                    <div class="col-sm-2" style="height: 44px">
                                                                                                                                                        @*<div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                        <a href="http://myplus/RateTheLinguist.aspx?JobItemID=@Model.JobItems.ElementAt(k).Id&DeliverViaiPlus=1" class="btn btn-outline-success" title="Deliver job item" style="width:57px;padding:5px">
                                                                                                                                                            @*<div class="rounded-top w-100 bg-primary-50">*@
                                                                                                                                                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                                <span class="icon-stack fa-2x">
                                                                                                                                                                    <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                                    <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                                    <i class="fal fa-globe icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                                </span>
                                                                                                                                                            </div>
                                                                                                                                                            @*</div>*@
                                                                                                                                                            @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                        </a>
                                                                                                                                                        @*</div>*@
                                                                                                                                                    </div>
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                                    <div class="col-sm-2" style="height: 44px">
                                                                                                                                                        @*<div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                        <a href="http://myplus/DeliverItemViaiplus.aspx?JobItemID=@Model.JobItems.ElementAt(k).Id" class="btn btn-outline-success" title="Deliver job item" style="width:57px;padding:5px">
                                                                                                                                                            @*<div class="rounded-top w-100 bg-primary-50">*@
                                                                                                                                                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                                <span class="icon-stack fa-2x">
                                                                                                                                                                    <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                                    <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                                    <i class="fal fa-globe icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                                </span>
                                                                                                                                                            </div>
                                                                                                                                                            @*</div>*@
                                                                                                                                                            @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                        </a>
                                                                                                                                                        @*</div>*@
                                                                                                                                                    </div>
                                                                                                                            }
                                                                                                                        }
                                                                                                                                            <div class="col-sm-2" style="height: 44px">
                                                                                                                                                @*<div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                <a href="http://myplus/CloseJobItems.aspx?OrderID=@Model.JobItems.ElementAt(k).JobOrderId" class="btn btn-outline-success" title="Close job item" style="width:57px;padding:5px">
                                                                                                                                                    @*<div class="rounded-top w-100 bg-primary-50">*@
                                                                                                                                                    <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                        <span class="icon-stack fa-2x">
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                            <i class="fal fa-tasks icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                        </span>
                                                                                                                                                    </div>
                                                                                                                                                    @*</div>*@
                                                                                                                                                    @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                </a>
                                                                                                                                                @*</div>*@
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-2" style="height: 44px">
                                                                                                                                                @* <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">*@
                                                                                                                                                <a href="http://myplus/ConfirmJobDeletion.aspx?ID=@Model.JobItems.ElementAt(k).Id&Delete=Item" class="btn btn-outline-success" title="Delete this job item" style="width:57px;padding:5px">
                                                                                                                                                    @*<div class="rounded-top w-100 h-100 bg-primary-50">*@
                                                                                                                                                    <div class="rounded-top d-flex align-items-lg-center justify-content-lg-center w-100 pt-0 pb-0 pr-0 pl-0">
                                                                                                                                                        <div class="icon-stack fa-2x">
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-500"></i>
                                                                                                                                                            <i class="base base-7 icon-stack-3x opacity-100 color-primary-300"></i>
                                                                                                                                                            <i class="fal fa-trash icon-stack-2x opacity-100 color-white"></i>
                                                                                                                                                        </div>
                                                                                                                                                    </div>
                                                                                                                                                    @*</div>*@
                                                                                                                                                    @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                        <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                        </div>*@
                                                                                                                                                </a>
                                                                                                                                                @*</div>*@
                                                                                                                                            </div>
                                                                                                                                            
                                                                                                                                            <!--<div class="col-2 justify-content-center align-items-center mb-g">
                                                                                                                                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                                                                                                                                <a href="@Html.Raw(ViewBag.CalculateCostLink)" class="btn btn-outline-success">
                                                                                                                                                    <div class="rounded-top w-100 bg-primary-50">
                                                                                                                                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                                                                                                                                            <span class="icon-stack fa-2x">
                                                                                                                                                                <i class="base-2 icon-stack-3x color-primary-600"></i>
                                                                                                                                                                <i class="base-3 icon-stack-2x color-primary-700"></i>
                                                                                                                                                                <i class="ni ni-settings icon-stack-1x text-white"></i>
                                                                                                                                                            </span>
                                                                                                                                                        </div>
                                                                                                                                                    </div>-->
                                                                                                                                            @*<div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                                                                                <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                                                                                                </div>*@
                                                                                                                                            <!--</a>
                                                                                                                                                </div>
                                                                                                                                            </div>-->

                                                                                                                                            <div class="col-12 text-center ml-3" style="height:44px">
                                                                                                                                                @*<div class="col-sm-2 justify-content-center align-items-center mb-g">
                                                                                                    <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                                                                                    <div class="rounded-top w-100 bg-primary-50">
                                                                                                    <div class="rounded-top d-flex align-items-sm-start  w-100 pt-0 pb-0 pr-0 pl-0 hover-bg">*@
                                                                                                                                                @if ((Model.OverallCompletedDateTime == null || Model.OverallCompletedDateTime == DateTime.MinValue) || Model.JobItems.ElementAt(k).LanguageServiceName.Contains("review") == true)
                                                                                                                            {
                                                                                                                                                    <button id="@Model.JobItems.ElementAt(k).Id$Saveinput" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="savejobitem(@Model.JobItems.ElementAt(k).Id);" style="height: 40px; width:63px; padding: 5px"><i class="far fa-cloud-upload fa-2x"></i></button>
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                                    <button id="@Model.JobItems.ElementAt(k).Id$Saveinput" class="@(Settings.Theme.IconPrefix) btn btn-outline-warning" title="" style="height: 40px; width: 55px; padding: 5px " disabled><i class="far fa-cloud-upload fa-2x"></i></button>
                                                                                                                            }
                                                                                                                                                &nbsp;
                                                                                                                                            </div>
                                                                                                                        
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </tbody>
                                                                                                                </table>
                                                                                                            </form>
                                                                                                        </td>
                                                                                }
                                                                                else
                                                                                {
                                                                                    break;
                                                                                }
                                                                            }
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                                @*<br />*@
                                                        }
                                                    }
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div id="importJobOrderWordCounts" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 shadow-3">
            <div class="modal-header">
                <h5 class="modal-title" id="timeLogEditHeader">
                    <strong><label id="importWordCountsHeader">Import word counts</label></strong>
                </h5>
                <a onclick="" data-dismiss="modal" class="close" aria-label="Close">
                    <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                </a>
            </div>
            <div class="modal-body bg-faded">
                <label class="form-label">Please paste the folder where the analysis XMLs for this Job Order are stored. <label class="text-danger">(The folder should be on the server where the Job order is stored.)</label> </label>
                <br />
                <input type="text" id="folder-path" class="form-control form-control-sm rounded-0" placeholder="Folder path">
                <label id="folderPathRequired" class="text-danger" hidden>Please enter folder path.</label><br />
                <input type="radio" value="2" checked name="wordCountsImport" id="import-both" /> <label class="form-label" for="import-both">Import for both</label>
                &nbsp; <input type="radio" value="1" name="wordCountsImport" id="import-client" /> <label class="form-label" for="import-client">Import for Client</label>
                &nbsp;<input type="radio" value="0" name="wordCountsImport" id="import-linguist" /> <label class="form-label" for="import-linguist">Import for Linguist</label>
                <br />
                <br />
                <br />
                <br />
                <div style="position:relative;left:365px;">
                    <button type="button" class="btn btn-success" data-toggle="modal" data-dismiss="modal" onclick="importWordCounts(@Model.Id);">Import</button>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal modal-alert fade" id="job-order-word-counts-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><label id="header-text"></label></h5>
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                </button>*@
            </div>
            <div class="modal-body">
                <label id="job-order-word-counts-success-string"></label>&nbsp;<label class="text-success md-header" id="job-order-word-counts-success-dates"></label>
                <label class="text-warning md-header" id="job-order-word-counts-warning-string"></label>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="refreshPage(@Model.Id)">Close</button>

                @*<button type="button" class="btn btn-primary">Save changes</button>*@
            </div>
        </div>
    </div>
</div>
@*<div class="tab-pane fade show active" id="tab_default-1" role="tabpanel">
        <div class="row">
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a id="create-ncc-btn" href="#" data-toggle="modal" data-target="#createStudioTaskPopup" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Trados Studio automation</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Import word counts</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="@Html.Raw(ViewBag.CalculateCostLink)" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Calculate client/supplier cost</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_default-2" role="tabpanel">
        <div class="row">
            <div class="col-3 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <div class="rounded-top w-100 bg-primary-50">
                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                            <span class="icon-stack fa-6x">
                                <i class="base-2 icon-stack-3x color-primary-600"></i>
                                <i class="base-3 icon-stack-2x color-primary-700"></i>
                                <i class="ni ni-settings icon-stack-1x text-white"></i>
                            </span>
                        </div>
                    </div>
                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                        <span class="d-block text-truncate text-muted">Generate job briefs</span>
                    </div>
                </div>
            </div>
            <div class="col-3 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/UpdateSupplierDeadlines.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Update supplier deadline(s)</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-3 justify-content-center  align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/SendTranslationJobItemsToSupplier.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Send job items to suplier(s)</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-3 justify-content-center  align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Send an e-mail to all suppliers</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_default-3" role="tabpanel">
        <div class="row">
            <div class="col-3 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/CloseJobItems.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Complete job item(s)</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-3 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="@Html.Raw(ViewBag.MoveOrderLink)" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Move this order</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-3 justify-content-center  align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="@Html.Raw(ViewBag.DeleteJobFilesLink)" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Delete job files</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-3 justify-content-center  align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="@Html.Raw(ViewBag.DeleteLink)" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>

                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Delete this order</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_default-4" role="tabpanel">
        <div class="row">
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="http://myplus/Order.aspx?OrderID=@Model.Id" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>@(Settings.Theme.IconPrefix) btn btn-outline-default
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Cost confirmation</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="@Html.Raw(ViewBag.InvoiceOrderLink)" class="btn btn-outline-success">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Invoice this order</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-4 justify-content-center align-items-center mb-g">
                <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                    <a href="#" class="btn btn-outline-success" onclick="runfinanceauditlog();">
                        <div class="rounded-top w-100 bg-primary-50">
                            <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                <span class="icon-stack fa-6x">
                                    <i class="base-2 icon-stack-3x color-primary-600"></i>
                                    <i class="base-3 icon-stack-2x color-primary-700"></i>
                                    <i class="ni ni-settings icon-stack-1x text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                            <span class="d-block text-truncate text-muted">Finance audit log</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>*@
@*</div>
                        </div>
                        </div>
    </div>*@
@section ScriptsBlock {

    <script src="~/js/notifications/sweetalert2/sweetalert2.bundle.js"></script>

    <script type="text/javascript">
        /* Activate smart panels */
        $('#js-page-content').smartPanel();
    </script>
    <script>

        $(document).ready(function() {
            //debugger;
            var EditPageEnabled = @(JsonSerializer.Serialize(Model.EditPageEnabled));

            if (!EditPageEnabled) {
                $('input').attr('disabled', 'disabled');
                $('select').attr('disabled', 'disabled');
                $('textarea').attr('disabled', 'disabled');
                $('radio').attr('disabled', 'disabled');
                //$("#form *").prop("disabled", true);
            }
        });
        $("input, textarea, select").on("input", function() {
            try {
                $(this).parents('form').children().children().children().children().children().children().children().children().children('button.btn-outline-default').css({ background: 'red' });
                $(this).parents('form').children('div.flex-row-reverse').children('button.btn-outline-default').css({ background: 'red' });
            }
            catch (e) {
                alert("error");
            }
        });

        function endclientupdate() {
            var endclientselect = document.getElementById('endclient');
            var endclientid = endclientselect.value;

            var campaignselect = document.getElementById('campaign');
            var brandselect = document.getElementById('brand');
            var categoryselect = document.getElementById('category');

            campaignselect.options.length = 1;
            brandselect.options.length = 1;
            categoryselect.options.length = 1;

            //var opt = document.createElement('option');
            //    opt.value = "-1";
            //    opt.innerHTML = "(Please select)";
            //    campaignselect.add(opt);
            //    opt = document.createElement('option');
            //    opt.value = "-1";
            //opt.innerHTML = "(Please select)";
            //    brandselect.add(opt);
            //    opt = document.createElement('option');
            //    opt.value = "-1";
            //opt.innerHTML = "(Please select)";
            //categoryselect.add(opt);

            if (endclientid != "-1") {
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/EndclientUpdate", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(endclientid);

                var campaigns = xhrjobitems.responseText.split("$")[0];
                var brands = xhrjobitems.responseText.split("$")[1];
                var categories = xhrjobitems.responseText.split("$")[2];



                if (campaigns != "") {
                    // campaignselect.options.length = campaigns.split(",").length + 1;
                    campaigns.split(",").forEach((campaign) => {
                        var opt = document.createElement('option');
                        opt.value = campaign.split("-")[0];
                        opt.innerHTML = campaign.split("-")[1];
                        campaignselect.add(opt);
                    });

                }

                if (brands != "") {
                    //brands.options.length = brands.split(",").length + 1;
                    brands.split(",").forEach((brand) => {
                        // alert(brand);
                        var opt = document.createElement('option');
                        opt.value = brand.split("-")[0];
                        opt.innerHTML = brand.split("-")[1];
                        brandselect.add(opt);
                    });

                }

                if (categories != "") {
                    // alert(categories.split(",").length);
                    //   categories.options.length = categories.split(",").length + 1;
                    //  alert(categories.options.length);
                    categories.split(",").forEach((category) => {
                        //alert(category);
                        var opt = document.createElement('option');
                        opt.value = category.split("-")[0];
                        opt.innerHTML = category.split("-")[1];
                        categoryselect.add(opt);
                    });

                }
            }


            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

        }

        function CreateStudioTask(joborderid) {
            var categoryTable = document.getElementById('innerCategoryTable2');

            var prepfilescheckbox = document.getElementById('prepfilescheckbox');

            //var logJsonString = JSON.stringify(timesheetLogArray);

            var thisRow = categoryTable.rows[0];
            var categoryControl = thisRow.cells[0].children[0];
            // alert(categoryControl.value);
            if ((categoryControl.value != "Please select template")) {
                //var breakdownJsonString = JSON.stringify(breakdownArray);

                /*var stringToSend = JSON.stringify(categoryControl.value) + "$tp$" + JSON.stringify(prepfilescheckbox.checked);*/
                var stringToSend = categoryControl.value + "$tp$" + prepfilescheckbox.checked + "$tp$" + joborderid;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "TMSJobOrder/CreateTradosStudioTask", false);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                xhr.send(stringToSend);
                window.location.reload(false);
            } else {
                alert("Please select a template");

            }
            //debugger;
            //createButton.attributes["href"].nodeValue = window.location.href;
            //window.location.reload(false);
            //window.location.href = '@Url.Action("CreateTradosStudioTask", "TMSJobOrder")/' + stringToSend;

        }

        function runfinanceauditlog() {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "TMSJobOrder/RunFinanceAuditLogTask", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            //xhr.send(stringToSend);
            window.location.reload(false);
        }

        function expandCurrentRow(name) {

            var row = document.getElementById(arguments[0] + ' row');
            var expandrow = document.getElementById(arguments[0] + ' expand');
            if (row.style.display === 'none') {
                row.style.display = '';
                // expandrow.innerText = '-';
            } else {
                row.style.display = 'none';
                //expandrow.innerText = '+';
            }
        }

        function surchargecategoryselectupdate(invoiceLang) {
            var surchargecategoryselect = document.getElementById('surchargecategoryselect');
            var selectedcategory = surchargecategoryselect.value;
            var Surchargedescriptioninput = document.getElementById('Surchargedescriptioninput');

            if (selectedcategory != "-1") {
                var stringToSend = selectedcategory + "$tp$" + invoiceLang;

                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/GetSurchargeDiscountDescription", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                Surchargedescriptioninput.value = xhrjobitems.responseText;
            }
            else {
                Surchargedescriptioninput.value = "";
            }
        }

        function discountcategoryselectupdate(invoiceLang) {
            var discountcategoryselect = document.getElementById('discountcategoryselect');
            var selectedcategory = discountcategoryselect.value;
            var Discountdescriptioninput = document.getElementById('Discountdescriptioninput');

            if (selectedcategory != "-1") {
                var stringToSend = selectedcategory + "$tp$" + invoiceLang;

                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/GetSurchargeDiscountDescription", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                Discountdescriptioninput.value = xhrjobitems.responseText;
            }
            else {
                Discountdescriptioninput.value = "";
            }
        }

        function SaveSurcharge(joborderid, surchargeid) {
            
            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }
                var errormessage = '';
                var surchargecategoryselect = document.getElementById('surchargecategoryselect');
                var Surchargedescriptioninput = document.getElementById('Surchargedescriptioninput');
                var SurchargePerc = document.getElementById('SurchargePerc');
                var SurchargeVal = document.getElementById('SurchargeVal');
                var SurchargeAmountinput = document.getElementById('SurchargeAmountinput');

                if (SurchargeAmountinput.value == "" && surchargecategoryselect.value != "-1") {
                    errormessage = '- Please enter the surcharge amount\n';
                }

                var surchargetype = false;
                if (SurchargeVal.checked) {
                    surchargetype = true;
                }

                if (errormessage === '') {
                    var stringToSend = joborderid + "$tp$" + surchargeid + "$tp$" + surchargecategoryselect.value + "$tp$" + Surchargedescriptioninput.value + "$tp$" + surchargetype + "$tp$" + SurchargeAmountinput.value;
                    var xhrjobitems = new XMLHttpRequest();
                    xhrjobitems.open("POST", "TMSJobOrder/SaveSurcharge", false);
                    xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    //xhrjobitems.ResponseType = 'text'
                    xhrjobitems.send(stringToSend);



                } else {
                    alert(errormessage);
                }


            

        }

        function SaveDiscount(joborderid, discountid) {
            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }
            var errormessage = '';
            var discountcategoryselect = document.getElementById('discountcategoryselect');
            var Discountdescriptioninput = document.getElementById('Discountdescriptioninput');
            var DiscountePerc = document.getElementById('DiscountePerc');
            var DiscounteVal = document.getElementById('DiscountVal');
            var DiscountAmountinput = document.getElementById('DiscountAmountinput');

            if (DiscountAmountinput.value == "" && discountcategoryselect.value != "-1") {
                errormessage = '- Please enter the discount amount\n';
            }

            var discounttype = 0;
            if (DiscounteVal.checked) {
                discounttype = 1;
            }

            if (errormessage === '') {
                var stringToSend = joborderid + "$tp$" + discountid + "$tp$" + discountcategoryselect.value + "$tp$" + Discountdescriptioninput.value + "$tp$" + discounttype + "$tp$" + DiscountAmountinput.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/SaveDiscount", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                //xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);



            } else {
                alert(errormessage);
            }



        }

        function savejobitem(jobitemid) {
            var errormessage = '';
            var Deadlineinput = document.getElementById(arguments[0] + '$Deadlineinput');
            //var SupplierOrContactinput = document.getElementById(arguments[0] + '$SupplierOrContactinput');
            //var SupplierOrReviewerIDinput = document.getElementById(arguments[0] + '$SupplierOrReviewerIDinput');
            var ChargeToClientinput = document.getElementById(arguments[0] + '$ChargeToClientinput');
            var PaymentToSupplierinput = document.getElementById(arguments[0] + '$PaymentToSupplierinput');
            var MinSupplierChargeAppliedinput = document.getElementById(arguments[0] + '$MinSupplierChargeAppliedinput');
            var WorkTimeHourinput = document.getElementById(arguments[0] + '$WorkTimeHourinput');
            var WorkTimeMinutesinput = document.getElementById(arguments[0] + '$WorkTimeMinutesinput');
            var NewClientWordCountinput = document.getElementById(arguments[0] + '$NewClientWordCountinput');
            var NewSupplierWordCountinput = document.getElementById(arguments[0] + '$NewSupplierWordCountinput');
            var visiblecheckbox = document.getElementById(arguments[0] + '$visiblecheckbox');
            var supplierIDlink = document.getElementById(arguments[0] + '$SupplierIDinput');

            if (WorkTimeMinutesinput.value > 59 || WorkTimeMinutesinput.value < 0) {
                errormessage = '- Please select between 0 and 59 for work minutes\n';
            }

            if (WorkTimeHourinput.value < 0) {
                errormessage = errormessage + '- Please select 0 or more for work hours\n';
            }

            if (NewClientWordCountinput.value < 0) {
                errormessage = errormessage + '- Please select 0 or more for new client word count\n';
            }

            if (NewSupplierWordCountinput.value < 0) {
                errormessage = errormessage + '- Please select 0 or more for new supplier word count\n';
            }

            var supplierid = "";
            if (supplierIDlink != null) {
                if (supplierIDlink.title != null && supplierIDlink.title != "") {
                    supplierid = supplierIDlink.title;
                }
            }

            if (errormessage === '') {
                var stringToSend = jobitemid + "$tp$" + Deadlineinput.value + "$tp$" + ChargeToClientinput.value + "$tp$" + PaymentToSupplierinput.value + "$tp$" + MinSupplierChargeAppliedinput.value + "$tp$" + WorkTimeHourinput.value + "$tp$" + WorkTimeMinutesinput.value + "$tp$" + NewClientWordCountinput.value + "$tp$" + NewSupplierWordCountinput.value + "$tp$" + visiblecheckbox.checked + "$tp$" + supplierid;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/SaveJobItem", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);
                //alert(xhrjobitems.responseText);
                //alert('here');
                //xhrjobitems.onload = function () {
                //    alert('onload');
                //    if (xhrjobitems.readyState === xhrjobitems.DONE) {
                // alert(xhrjobitems.status);
                //if (xhrjobitems.status === 200) {
                //alert(xhrjobitems.responseText);
                //        }
                //    }
                //};
                //alert(xhrjobitems.responseText);

                var TotalClientWordCountinput = document.getElementById(arguments[0] + '$TotalClientWordCount');
                var TotalSupplierWordCountinput = document.getElementById(arguments[0] + '$TotalSupplierWordCount');

                TotalClientWordCountinput.value = xhrjobitems.responseText.split(";")[0];
                TotalSupplierWordCountinput.value = xhrjobitems.responseText.split(";")[1];

                var InvisibleIcon = document.getElementById(arguments[0] + '$Invisible');
                //InvisibleIcon.hidden = xhrjobitems.responseText.split(";")[2];

                var InvisibleMessage = document.getElementById(arguments[0] + '$visiblemessage');
                if (xhrjobitems.responseText.split(";")[2] == "true") {
                    InvisibleMessage.innerHTML = "(Visible)";
                    InvisibleIcon.style = "height:16px;opacity:0";
                }
                else {
                    InvisibleMessage.innerHTML = "(Not visible)";
                    InvisibleIcon.style = "height:16px;opacity:1";
                }

                var button = document.getElementById(arguments[0] + '$Saveinput');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

            //window.location.reload(false);
        }

        function updatekeyinformation(joborderid) {
            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }
            var errormessage = '';
            var JobNameinput = document.getElementById('JobNameinput');
            var Deadlineinput = document.getElementById('Deadlineinput');
            var completedcheckbox = document.getElementById('completedcheckbox');
            var TypeofOrderinput = document.getElementById('TypeofOrderinput');
            var escalatedcheckbox = document.getElementById('escalatedcheckbox');

            var DeadlineChangeReason = "-1";
            if (document.getElementById('DeadlineReasonInput') != null) {
                DeadlineChangeReason = document.getElementById('DeadlineReasonInput').value;
            }

            var OverdueReasonID = "-1";
            if (document.getElementById('OverdueReasonIDinput') != null) {
                OverdueReasonID = document.getElementById('OverdueReasonIDinput').value;
            }

            var OverdueReasonComment = "|";
            if (document.getElementById('OverdueReasonCommentinput') != null) {
                OverdueReasonComment = document.getElementById('OverdueReasonCommentinput').value;
            }

            //if (WorkTimeMinutesinput.value > 59 || WorkTimeMinutesinput.value < 0) {
            //    errormessage = '- Please select between 0 and 59 for work minutes\n';
            //}

            //if (WorkTimeHourinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for work hours\n';
            //}

            //if (NewClientWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new client word count\n';
            //}

            //if (NewSupplierWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new supplier word count\n';
            //}
            //debugger;
            var OverallDeliveryDeadline = @Html.Raw(System.Text.Json.JsonSerializer.Serialize( Model.OverallDeliveryDeadline ));
            debugger;
            var LinkedJobOrder = "-1";
            if (document.getElementById('Linkedjoborderinput') != null) {
                LinkedJobOrder = document.getElementById('Linkedjoborderinput').value;
            }
            var errorCount = 0;
            if (Deadlineinput.value + ':00' != OverallDeliveryDeadline && DeadlineChangeReason == -1) {
                document.getElementById('DeadlineReasonLabel').hidden = false;
                document.getElementById('DeadlineReasonInput').hidden = false;
                document.getElementById('deadlineReasonRequired').hidden = false;
                errorCount++;

            }
            if (errormessage === '' && errorCount == 0) {
                var updatedeadlines = "";
                if (document.getElementById("updatedeadlinesinput") != null) { updatedeadlines = document.getElementById("updatedeadlinesinput").value; }

                var stringToSend = joborderid + "$tp$" + JobNameinput.value + "$tp$" + Deadlineinput.value + "$tp$" + completedcheckbox.checked + "$tp$" + OverdueReasonID + "$tp$" + OverdueReasonComment + "$tp$" + updatedeadlines + "$tp$" + TypeofOrderinput.value + "$tp$" + escalatedcheckbox.checked + "$tp$" + DeadlineChangeReason + "$tp$" + LinkedJobOrder;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/UpdateKeyInformation", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                var orderstatuslbl = document.getElementById('orderstatus');
                orderstatuslbl.innerHTML = xhrjobitems.responseText;

                var button = document.getElementById('updatekeyinfobutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
            } if (errormessage != '') {
                alert(errormessage);
            }



            //window.location.reload(false);
        }

        function updateprojectinformation(joborderid) {
            var errormessage = '';
            var PMEmpIDinput = document.getElementById('PMEmpIDinput');
            var JobOrderChannelinput = document.getElementById('JobOrderChannelinput');
            var ClientNotesinput = document.getElementById('ClientNotesinput');
            var InternalNotesinput = document.getElementById('InternalNotesinput');

            var trialcheckbox = document.getElementById('trialcheckbox');
            var PrintingProjectheckbox = document.getElementById('PrintingProjectheckbox');
            var IsHighlyConfidentialcheckbox = document.getElementById('IsHighlyConfidentialcheckbox');
            var Priorityinput = document.getElementById('Priorityinput');
            var PMProfilImg = document.getElementById('PMProfilImg');
            //alert("here");
            //if (WorkTimeMinutesinput.value > 59 || WorkTimeMinutesinput.value < 0) {
            //    errormessage = '- Please select between 0 and 59 for work minutes\n';
            //}

            //if (WorkTimeHourinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for work hours\n';
            //}

            //if (NewClientWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new client word count\n';
            //}

            //if (NewSupplierWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new supplier word count\n';
            //}

            if (errormessage === '') {
                var stringToSend = joborderid + "$tp$" + PMEmpIDinput.value + "$tp$" + JobOrderChannelinput.value + "$tp$" + ClientNotesinput.value + "$tp$" + InternalNotesinput.value + "$tp$" + trialcheckbox.checked + "$tp$" + PrintingProjectheckbox.checked + "$tp$" + IsHighlyConfidentialcheckbox.checked + "$tp$" + Priorityinput.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/UpdateProjectInformation", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);
                //alert("here");
                //alert(xhrjobitems.responseText);
                //alert(xhrjobitems.responseText.Split(";")[1]);

                //alert(xhrjobitems.responseText.split("$")[0]);
                PMProfilImg.removeAttribute('onclick');
                PMProfilImg.setAttribute('onclick', "javascript:window.location.href='https://myplusbeta.publicisgroupe.net/HR/EmployeeProfile/'+" + xhrjobitems.responseText.split("$")[0]);
                //alert(xhrjobitems.responseText.split("$")[1]);

                PMProfilImg.style.backgroundImage = "url('" + xhrjobitems.responseText.split("$")[1] + "')";
                //alert("here");

                var button = document.getElementById('updateprojectinfobutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

            //window.location.reload(false);
        }

        function updatefinanceinformation(joborderid) {
            //alert('here');
            var errormessage = '';
            var InvoicingNotesinput = document.getElementById('InvoicingNotesinput');
            var ClientPONumberimput = document.getElementById('ClientPONumberimput');
            var earlyinvoicingcheckbox = document.getElementById('earlyinvoicingcheckbox');
            var CustomerSpecificField1Value = document.getElementById('CustomerSpecificField1Value');
            var CustomerSpecificField2Value = document.getElementById('CustomerSpecificField2Value');
            var CustomerSpecificField3Value = document.getElementById('CustomerSpecificField3Value');
            var CustomerSpecificField4Value = document.getElementById('CustomerSpecificField4Value');
            var EarlyInvoiceByEmpId = document.getElementById('EarlyInvoiceByEmpId');
            var EarlyInvoiceDateTime = document.getElementById('EarlyInvoiceDateTime');
            var OrgHfmcodeIs = document.getElementById('OrgHfmcodeIs');
            var OrgHfmcodeBs = document.getElementById('OrgHfmcodeBs');
            var ClientCurrency = document.getElementById('ClientCurrencyinput');
            //if (WorkTimeMinutesinput.value > 59 || WorkTimeMinutesinput.value < 0) {
            //    errormessage = '- Please select between 0 and 59 for work minutes\n';
            //}

            //if (WorkTimeHourinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for work hours\n';
            //}

            //if (NewClientWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new client word count\n';
            //}

            //if (NewSupplierWordCountinput.value < 0) {
            //    errormessage = errormessage + '- Please select 0 or more for new supplier word count\n';
            //}

            if (errormessage === '') {
                //debugger;
                var discountID = document.getElementById('popup-discount-id').innerHTML;
                var surchargeID = document.getElementById('popup-surcharge-id').innerHTML;
                SaveDiscount(joborderid, discountID);
                SaveSurcharge(joborderid, surchargeID);

                if (@ViewBag.OrgGroupId == 72112 || @ViewBag.OrgGroupId == 72113 || @ViewBag.OrgGroupId == 72114 || @ViewBag.OrgGroupId == 72115) {
                    var stringToSend = joborderid + "$tp$" + InvoicingNotesinput.value + "$tp$" + ClientPONumberimput.value + "$tp$" + earlyinvoicingcheckbox.checked + "$tp$" + CustomerSpecificField1Value.value + "$tp$" + CustomerSpecificField2Value.value + "$tp$" + CustomerSpecificField3Value.value + "$tp$" + CustomerSpecificField4Value.value + "$tp$" + EarlyInvoiceByEmpId.value + "$tp$" + EarlyInvoiceDateTime.value + "$tp$" + OrgHfmcodeIs.value + "$tp$" + OrgHfmcodeBs.value + "$tp$" + ClientCurrency.value;
                }
                else {
                    var stringToSend = joborderid + "$tp$" + InvoicingNotesinput.value + "$tp$" + ClientPONumberimput.value + "$tp$" + earlyinvoicingcheckbox.checked + "$tp$" + CustomerSpecificField1Value.value + "$tp$" + CustomerSpecificField2Value.value + "$tp$" + CustomerSpecificField3Value.value + "$tp$" + CustomerSpecificField4Value.value + "$tp$" + EarlyInvoiceByEmpId.value + "$tp$" + EarlyInvoiceDateTime.value + "$tp$" + "-1" + "$tp$" + "-1" + "$tp$" + ClientCurrency.value;
                }
                // alert(stringToSend);
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/UpdateFinancialInformation", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                if (xhrjobitems.responseText != "") {
                    var earlyinvoicinglabel = document.getElementById('earlyinvoicinglabel');
                    earlyinvoicinglabel.innerHTML = xhrjobitems.responseText;
                }

                var button = document.getElementById('updatefinanceinfobutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
                location.reload();
            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

            //window.location.reload(false);
        }


        function runFEDeliveryAutomation() {

            let data = {

                "@nameof(Model.Id)": @Model.Id.ToString(),
                // key info
            }
            $.ajax({
                url: "api/RunFEMergeAutomation",
                method: 'POST',
                dataType: 'json',
                data: data,
                success: function(data) {
                    $('#FEAutomationMerge').attr('hidden', 'hidden');
                    Swal.fire("Success!", "The merge automation has been started.", "Success");
                    setTimeout(function() { setActiveMerge() }, 30000);
                },
                error: function(err) {

                    //alert('ERROR');
                    console.log(err);
                    Swal.fire("Oops!", "There was an error while starting the automation.", "error");
                },
            });

        };

        function setActive() {
            $('#FEAutomation').removeAttr('hidden');
        }

        function setActiveMerge() {
            $('#FEAutomationMerge').removeAttr('hidden');
        }

        function runFEAutomation() {

            let data = {

                "@nameof(Model.Id)": @Model.Id.ToString(),
                // key info
            }
            $.ajax({
                url: "api/RunAutomation",
                method: 'POST',
                dataType: 'json',
                data: data,
                success: function(data) {
                    $('#FEAutomation').attr('hidden', 'hidden');

                    Swal.fire("Success!", "The automation has been started.", "Success");
                    setTimeout(function() { setActive() }, 60000);
                },
                error: function(err) {

                    //alert('ERROR');
                    console.log(err);
                    Swal.fire("Oops!", "There was an error while starting the automation.", "error");
                },
            });

        };


        function updateclsinformation(joborderid) {
            var errormessage = '';
            var ThirdPartyIDinput = document.getElementById('ThirdPartyIDinput');
            var ProductionContactinput = document.getElementById('ProductionContactinput');
            var pgdStatus = document.getElementById('pgdStatus');
            var ICPOnumberinput = document.getElementById('ICPOnumberinput');
            var glossaryupdatedcheckbox = document.getElementById('glossaryupdatedcheckbox');

            var endclientselect = document.getElementById('endclient');
            var campaignselect = document.getElementById('campaign');
            var brandbrandselect = document.getElementById('brand');
            var categoryselect = document.getElementById('category');


            if (errormessage === '') {
                var stringToSend = joborderid + "$tp$" + ThirdPartyIDinput.value + "$tp$" + ProductionContactinput.value + "$tp$" + pgdStatus.value + "$tp$" + ICPOnumberinput.value + "$tp$" + glossaryupdatedcheckbox.checked + "$tp$" + endclientselect.value + "$tp$" + campaignselect.value + "$tp$" + brandbrandselect.value + "$tp$" + categoryselect.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/UpdateCLSInformation", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                if (xhrjobitems.responseText != "") {
                    var glossarystatusinput = document.getElementById('glossarystatusinput');
                    glossarystatusinput.innerHTML = xhrjobitems.responseText;
                }

                var button = document.getElementById('updateclsinfobutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

        }

        function updatepgdinformation(joborderid) {
            var errormessage = '';
            var ApprovedEndClientChargeinput = document.getElementById('ApprovedEndClientChargeinput');
            var endclientCurrencyIDinput = document.getElementById('endclientCurrencyIDinput');
            var BSHFnumberinput = document.getElementById('BSHFnumberinput');
            var ISnumberinput = document.getElementById('ISnumberinput');

            if (errormessage === '') {
                var stringToSend = joborderid + "$tp$" + ApprovedEndClientChargeinput.value + "$tp$" + endclientCurrencyIDinput.value + "$tp$" + BSHFnumberinput.value + "$tp$" + ISnumberinput.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/UpdatePGDInformation", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                if (xhrjobitems.responseText != "") {
                    var ApprovedEndClientChargeGBPinput = document.getElementById('ApprovedEndClientChargeGBPinput');
                    var Varianceinput = document.getElementById('Varianceinput');
                    var BSHFnumberinput = document.getElementById('BSHFnumberinput');
                    var ISnumberinput = document.getElementById('ISnumberinput');
                    ApprovedEndClientChargeGBPinput.innerHTML = xhrjobitems.responseText.split("$")[0];
                    Varianceinput.innerHTML = xhrjobitems.responseText.split("$")[1];
                    BSHFnumberinput.value = xhrjobitems.responseText.split("$")[2];
                    ISnumberinput.value = xhrjobitems.responseText.split("$")[3];

                }

                var button = document.getElementById('updatepgdinfobutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

        }

        function promptdeadlinesupdate(confirmvalue) {
            let text;
            if (confirmvalue == "yes") {
                text = "1";
            } else {
                text = "0";
            }
            document.getElementById("updatedeadlinesinput").value = text;
            $('#updateDeadlinesPopup').modal('hide');
        }
        function deadlineReason() {
            //debugger;
            if (document.getElementById('deadlineReasonRequired').hidden == false) {
                document.getElementById('deadlineReasonRequired').hidden = true;
            }
        }
        function importWordCounts(joborderid) {
            //debugger;

            document.getElementById('folderPathRequired').hidden = true;
            var errorCount = 0;
            var importRadio = null;
            var folderPath = document.getElementById('folder-path').value;
            var wordCountsImport = document.getElementsByName('wordCountsImport');
            if (folderPath == '') {
                document.getElementById('folderPathRequired').hidden = false;
                errorCount++;
            }
            if (wordCountsImport[0].checked == true) {
                importRadio = 2;
            }
            else if (wordCountsImport[1].checked == true) {
                importRadio = 1;
            }
            else if (wordCountsImport[2].checked == true) {
                importRadio = 0;
            }
            if (errorCount == 0) {
                var stringToSend = folderPath + '$' + importRadio + '$' + joborderid;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "TMSJobOrder/ImportWordCounts", true);
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {

                        //debugger;


                        //show job item creation successful modal
                        var response = xhr.responseText;
                        var headerText = response.split("$")[0];
                        document.getElementById('header-text').innerText = headerText;
                        if (headerText == "Success") {

                            document.getElementById('job-order-word-counts-success-string').hidden = false;
                            document.getElementById('job-order-word-counts-success-string').textContent = "";
                            document.getElementById('job-order-word-counts-success-dates').innerText = response.split("$")[1];
                            document.getElementById('job-order-word-counts-warning-string').innerText = "";
                        }
                        else {

                            document.getElementById('job-order-word-counts-success-dates').innerText = "";
                            document.getElementById('job-order-word-counts-warning-string').innerText = response.split("$")[1];
                        }
                        $('#job-order-word-counts-modal').modal("show");
                        document.getElementById('folder-path').value = '';

                    }
                    else {

                    }
                };
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send(stringToSend);
            }
        }
        function refreshPage(jobOrderID) {
            window.location.href = `TMSJobOrder/JobOrder?JobOrderId=${jobOrderID}`;
        }
        function SaveDiscountPopup() {

            var DiscountAmountinput = document.getElementById('DiscountAmountinput').value;
            var DiscountAmount = parseFloat(DiscountAmountinput);
            var DiscountePerc = document.getElementById('DiscountePerc');
            var DiscounteVal = document.getElementById('DiscountVal');
            var Prefix = @Html.Raw(JsonSerializer.Serialize(ViewBag.Prefix));
            var SubTotal = @Html.Raw(JsonSerializer.Serialize(Model.SubTotalOverallChargeToClient));


            var CurrencyName = @Html.Raw(JsonSerializer.Serialize(ViewBag.CurrencyName));

            var finalValue = "";
            var discounttype = 0;
            if (DiscounteVal.checked) {
                discounttype = 1;
            }

            if (DiscountAmount > 0) {
                if (discounttype == 1) {
                    finalValue = Prefix + DiscountAmount.toFixed(2) + CurrencyName;
                }
                else {
                    var perValue = (parseFloat(SubTotal) * parseFloat(DiscountAmount)) / 100;
                    finalValue = Prefix + perValue.toFixed(2) + CurrencyName;
                }
            }

            $('#discount-value-label').text(finalValue);

            $('#updatefinanceinfobutton').css({ background: 'red' });
        }
        function SaveSurchargePopup() {
            //debugger;
            var SurchargeAmountinput = document.getElementById('SurchargeAmountinput').value;
            var SurchargeAmount = parseFloat(SurchargeAmountinput);
            var SurchargePerc = document.getElementById('SurchargePerc');
            var SurchargeVal = document.getElementById('SurchargeVal');
            var Prefix = @Html.Raw(JsonSerializer.Serialize(ViewBag.Prefix));
            var SubTotal = @Html.Raw(JsonSerializer.Serialize(Model.SubTotalOverallChargeToClient));


            var CurrencyName = @Html.Raw(JsonSerializer.Serialize(ViewBag.CurrencyName));

            var finalValue = "";
            var surchargetype = 0;
            if (SurchargeVal.checked) {
                surchargetype = 1;
            }

            if (SurchargeAmount > 0) {
                if (surchargetype == 1) {
                    finalValue = Prefix + SurchargeAmount.toFixed(2) + CurrencyName;
                }
                else {
                    var perValue = (parseFloat(SubTotal) * parseFloat(SurchargeAmount)) / 100;
                    finalValue = Prefix + perValue.toFixed(2) + CurrencyName;
                }
            }

            $('#surcharge-value-label').text(finalValue);
            $('#updatefinanceinfobutton').css({ background: 'red' });
        }
        function cloneOrder(itemID, orderID) {

            var stringToSend = itemID + '$' + orderID;
            $('.ajax-loader').css("visibility", "visible");
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "JobItem/CloneItem", true);
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //debugger;
                    var response = xhr.responseText;
                    var headerText = response.split("$")[0];
                    //document.getElementById('header-text').innerText = headerText;

                    if (headerText == "Success") {
                        //debugger;
                        
                        var ID= response.split("$")[1]
                    //location.reload();
                    configureFolders(ID);
                        $('.ajax-loader').css("visibility", "hidden");
                    window.location.href = `JobItem/Index?Id=${ID}`;
                    
                    }
                    
                }
                else {

                }
            };
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);
        }
        function configureFolders(jobitemToSend) {
            //debugger;
            $.ajax({
                url: 'JobItem/UpdateNetworkFolder?jobItemID=' + jobitemToSend,
                success: function(data) {
                    console.log("ajax is executed");

                }
            });
        }
        $('#Deadlineinput').change(function() {
            $('#updateDeadlinesPopup').modal('show');
            //.toggleclass('modal');
            //$('#updateDeadlinesPopup').target
        })
    </script>
    @*<script src="~/js/dependency/moment/moment.js"></script>
            <script src="~/js/miscellaneous/fullcalendar/fullcalendar.bundle.js"></script>
            <script src="~/js/statistics/sparkline/sparkline.bundle.js"></script>
            <script src="~/js/statistics/easypiechart/easypiechart.bundle.js"></script>
            <script src="~/js/statistics/flot/flot.bundle.js"></script>
            <script src="~/js/miscellaneous/jqvmap/jqvmap.bundle.js"></script>
            <script>
                $(document).ready(function () {
                    //$('#js-page-content').smartPanel();
                    //
                    //
                    var dataSetPie = [
                    {
                        label: "Asia",
                        data: 4119630000,
                        color: color.primary._500
                    },
                    {
                        label: "Latin America",
                        data: 590950000,
                        color: color.info._500
                    },
                    {
                        label: "Africa",
                        data: 1012960000,
                        color: color.warning._500
                    },
                    {
                        label: "Oceania",
                        data: 95100000,
                        color: color.danger._500
                    },
                    {
                        label: "Europe",
                        data: 727080000,
                        color: color.success._500
                    },
                    {
                        label: "North America",
                        data: 344120000,
                        color: color.fusion._400
                    }];
                    $.plot($("#flotPie"), dataSetPie, {
                        series:
                        {
                            pie:
                            {
                                innerRadius: 0.5,
                                show: true,
                                radius: 1,
                                label:
                                {
                                    show: true,
                                    radius: 2 / 3,
                                    threshold: 0.1
                                }
                            }
                        },
                        legend:
                        {
                            show: false
                        }
                    });
                    $.plot('#flotBar1', [{
                        data: [
                            [1, 0],
                            [2, 0],
                            [3, 0],
                            [4, 1],
                            [5, 3],
                            [6, 3],
                            [7, 10],
                            [8, 11],
                            [9, 10],
                            [10, 9],
                            [11, 12],
                            [12, 8],
                            [13, 10],
                            [14, 6],
                            [15, 3]
                        ],
                        bars: {
                            show: true,
                            lineWidth: 0,
                            fillColor: color.fusion._50,
                            barWidth: .3,
                            order: 'left'
                        }
                    }, {
                        data: [
                            [1, 0],
                            [2, 0],
                            [3, 1],
                            [4, 2],
                            [5, 2],
                            [6, 5],
                            [7, 8],
                            [8, 12],
                            [9, 10],
                            [10, 11],
                            [11, 3]
                        ],
                        bars: {
                            show: true,
                            lineWidth: 0,
                            fillColor: color.success._500,
                            barWidth: .3,
                            align: 'right'
                        }
                    }], {
                        grid: {
                            borderWidth: 0,
                        },
                        yaxis: {
                            min: 0,
                            max: 15,
                            tickColor: 'rgba(0,0,0,0.05)',
                            ticks: [
                                [0, ''],
                                [5, '$5000'],
                                [10, '$25000'],
                                [15, '$45000']
                            ],
                            font: {
                                color: '#444',
                                size: 10
                            }
                        },
                        xaxis: {
                            mode: 'categories',
                            tickColor: 'rgba(0,0,0,0.05)',
                            ticks: [
                                [0, '3am'],
                                [1, '4am'],
                                [2, '5am'],
                                [3, '6am'],
                                [4, '7am'],
                                [5, '8am'],
                                [6, '9am'],
                                [7, '10am'],
                                [8, '11am'],
                                [9, '12nn'],
                                [10, '1pm'],
                                [11, '2pm'],
                                [12, '3pm'],
                                [13, '4pm'],
                                [14, '5pm']
                            ],
                            font: {
                                color: '#999',
                                size: 9
                            }
                        }
                    });
                    /*
                     * VECTOR MAP
                     */
                    var data_array = {
                    "af":"16.63","al":"0","dz":"158.97","ao":"85.81","ag":"1.1","ar":"351.02","am":"8.83","au":"1219.72","at":"366.26","az":"52.17","bs":"7.54","bh":"21.73","bd":"105.4","bb":"3.96","by":"52.89","be":"461.33","bz":"1.43","bj":"6.49","bt":"1.4","bo":"19.18","ba":"16.2","bw":"12.5","br":"2023.53","bn":"11.96","bg":"44.84","bf":"8.67","bi":"1.47","kh":"11.36","cm":"21.88","ca":"1563.66","cv":"1.57","cf":"2.11","td":"7.59","cl":"199.18","cn":"5745.13","co":"283.11","km":"0.56","cd":"12.6","cg":"11.88","cr":"35.02","ci":"22.38","hr":"59.92","cy":"22.75","cz":"195.23","dk":"304.56","dj":"1.14","dm":"0.38","do":"50.87","ec":"61.49","eg":"216.83","sv":"21.8","gq":"14.55","er":"2.25","ee":"19.22","et":"30.94","fj":"3.15","fi":"231.98","fr":"2555.44","ga":"12.56","gm":"1.04","ge":"11.23","de":"3305.9","gh":"18.06","gr":"305.01","gd":"0.65","gt":"40.77","gn":"4.34","gw":"0.83","gy":"2.2","ht":"6.5","hn":"15.34","hk":"226.49","hu":"132.28","is":"0","in":"1430.02","id":"695.06","ir":"337.9","iq":"84.14","ie":"204.14","il":"201.25","it":"2036.69","jm":"13.74","jp":"5390.9","jo":"27.13","kz":"129.76","ke":"32.42","ki":"0.15","kw":"117.32","kg":"4.44","la":"6.34","lv":"23.39","lb":"39.15","ls":"1.8","lr":"0.98","lt":"35.73","lu":"52.43","mk":"9.58","mg":"8.33","mw":"5.04","my":"218.95","mv":"1.43","ml":"9.08","mt":"7.8","mr":"3.49","mu":"9.43","mx":"1004.04","md":"5.36","rw":"5.69","ws":"0.55","st":"0.19","sa":"434.44","sn":"12.66","rs":"38.92","sc":"0.92","sl":"1.9","sg":"217.38","sk":"86.26","si":"46.44","sb":"0.67","za":"354.41","es":"1374.78","lk":"48.24","kn":"0.56","lc":"1","vc":"0.58","sd":"65.93","sr":"3.3","sz":"3.17","se":"444.59","ch":"522.44","sy":"59.63","tw":"426.98","tj":"5.58","tz":"22.43","th":"312.61","tl":"0.62","tg":"3.07","to":"0.3","tt":"21.2","tn":"43.86","tr":"729.05","tm":"0","ug":"17.12","ua":"136.56","ae":"239.65","gb":"2258.57","us":"14624.18","uy":"40.71","uz":"37.72","vu":"0.72","ve":"285.21","vn":"101.99","ye":"30.02","zm":"15.69","zw":"0"
                    };
                    $('#vector-map').vectorMap({
                        map: 'world_en',
                        backgroundColor: 'transparent',
                        color: color.warning._50,
                        borderOpacity: 0.5,
                        borderWidth: 1,
                        hoverColor: color.success._300,
                        hoverOpacity: null,
                        selectedColor: color.success._500,
                        selectedRegions: ['US'],
                        enableZoom: true,
                        showTooltip: true,
                        scaleColors: [color.primary._400, color.primary._50],
                        values: data_array,
                        normalizeFunction: 'polynomial',
                        onRegionClick: function(element, code, region)
                        {
                            /*var message = 'You clicked "'
                                + region
                                + '" which has the code: '
                                + code.toLowerCase();
                            console.log(message);*/
                            var randomNumber = Math.floor(Math.random() * 10000000);
                            var arrow;
                            if (Math.random() >= 0.5 == true) {
                                arrow = '<div class="ml-2 d-inline-flex"><i class="@(Settings.Theme.IconPrefix) fa-caret-up text-success fs-xs"></i></div>'
                            } else {
                                arrow = '<div class="ml-2 d-inline-flex"><i class="@(Settings.Theme.IconPrefix) fa-caret-down text-danger fs-xs"></i></div>'
                            }
                            $('.js-jqvmap-flag').attr('src','https://lipis.github.io/flag-icon-css/flags/4x3/' + code.toLowerCase() + '.svg');
                            $('.js-jqvmap-country').html(region + ' - ' + '$' + randomNumber.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") +  arrow);
                        }
                    });
                    /* TAB 1: UPDATING CHART */
                    var data = [],
                        totalPoints = 200;
                    var getRandomData = function(){
                        if (data.length > 0)
                            data = data.slice(1);
                        // do a random walk
                        while (data.length < totalPoints) {
                            var prev = data.length > 0 ? data[data.length - 1] : 50;
                            var y = prev + Math.random() * 10 - 5;
                            if (y < 0)
                                y = 0;
                            if (y > 100)
                                y = 100;
                            data.push(y);
                        }
                        // zip the generated y values with the x values
                        var res = [];
                        for (var i = 0; i < data.length; ++i)
                            res.push([i, data[i]])
                        return res;
                    }
                    // setup control widget
                    var updateInterval = 1500;
                    $("#updating-chart").val(updateInterval).change(function() {
                        var v = $(this).val();
                        if (v && !isNaN(+v)) {
                            updateInterval = +v;
                            $(this).val("" + updateInterval);
                        }
                    });
                    // setup plot
                    var options = {
                        colors: [color.primary._700],
                        series:
                        {
                            lines:
                            {
                                show: true,
                                lineWidth: 0.5,
                                fill: 0.9,
                                fillColor : {
                                    colors : [{
                                        opacity : 0.6
                                    }, {
                                        opacity : 0
                                    }]
                                },
                            },
                            shadowSize: 0 // Drawing is faster without shadows
                        },
                        grid:
                        {
                            borderColor: 'rgba(0,0,0,0.05)',
                            borderWidth: 1,
                            labelMargin: 5
                        },
                        xaxis:
                        {
                            color: '#F0F0F0',
                            tickColor: 'rgba(0,0,0,0.05)',
                            font:
                            {
                                size: 10,
                                color: '#999'
                            }
                        },
                        yaxis:
                        {
                            min: 0,
                            max: 100,
                            color: '#F0F0F0',
                            tickColor: 'rgba(0,0,0,0.05)',
                            font:
                            {
                                size: 10,
                                color: '#999'
                            }
                        }
                    };
                    var plot = $.plot($("#updating-chart"), [getRandomData()], options);
                    /* live switch */
                    $('input[type="checkbox"]#start_interval').click(function() {
                        if ($(this).prop('checked')) {
                            $on = true;
                            updateInterval = 1500;
                            update();
                        } else {
                            clearInterval(updateInterval);
                            $on = false;
                        }
                    });
                    var update = function(){
                        if ($on == true) {
                            plot.setData([getRandomData()]);
                            plot.draw();
                            setTimeout(update, updateInterval);
                        } else {
                            clearInterval(updateInterval)
                        }
                    }
                    /*calendar */
                    var todayDate = moment().startOf('day');
                    var YM = todayDate.format('YYYY-MM');
                    var YESTERDAY = todayDate.clone().subtract(1, 'day').format('YYYY-MM-DD');
                    var TODAY = todayDate.format('YYYY-MM-DD');
                    var TOMORROW = todayDate.clone().add(1, 'day').format('YYYY-MM-DD');
                    var calendarEl = document.getElementById('calendar');
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        plugins: ['dayGrid', 'list', 'timeGrid', 'interaction', 'bootstrap'],
                        themeSystem: 'bootstrap',
                        timeZone: 'UTC',
                        //dateAlignment: "month", //week, month
                        buttonText: {
                          today:    'today',
                          month:    'month',
                          week:     'week',
                          day:      'day',
                          list:     'list'
                        },
                        eventTimeFormat: {
                            hour: 'numeric',
                            minute: '2-digit',
                            meridiem: 'short'
                        },
                        navLinks: true,
                        header: {
                            left: 'title',
                            center: '',
                            right: 'today prev,next'
                        },
                        footer: {
                            left:   'dayGridMonth,timeGridWeek,timeGridDay,listWeek',
                            center: '',
                            right:  ''
                        },
                        editable: true,
                        eventLimit: true, // allow "more" link when too many events
                        events: [
                            {
                                title: 'All Day Event',
                                start: YM + '-01',
                                description: 'This is a test description', //this is currently bugged: https://github.com/fullcalendar/fullcalendar/issues/1795
                                className: "border-warning bg-warning text-dark"
                            },
                            {
                                title: 'Reporting',
                                start: YM + '-14T13:30:00',
                                end: YM + '-14',
                                className: "bg-white border-primary text-primary"
                            },
                            {
                                title: 'Surgery oncall',
                                start: YM + '-02',
                                end: YM + '-03',
                                className: "bg-primary border-primary text-white"
                            },
                            {
                                title: 'NextGen Expo 2019 - Product Release',
                                start: YM + '-03',
                                end: YM + '-05',
                                className: "bg-info border-info text-white"
                            },
                            {
                                title: 'Dinner',
                                start: YM + '-12',
                                end: YM + '-10'
                            },
                            {
                                id: 999,
                                title: 'Repeating Event',
                                start: YM + '-09T16:00:00',
                                className: "bg-danger border-danger text-white"
                            },
                            {
                                id: 1000,
                                title: 'Repeating Event',
                                start: YM + '-16T16:00:00'
                            },
                            {
                                title: 'Conference',
                                start: YESTERDAY,
                                end: TOMORROW,
                                className: "bg-success border-success text-white"
                            },
                            {
                                title: 'Meeting',
                                start: TODAY + 'T10:30:00',
                                end: TODAY + 'T12:30:00',
                                className: "bg-primary text-white border-primary"
                            },
                            {
                                title: 'Lunch',
                                start: TODAY + 'T12:00:00',
                                className: "bg-info border-info"
                            },
                            {
                                title: 'Meeting',
                                start: TODAY + 'T14:30:00',
                                className: "bg-warning text-dark border-warning"
                            },
                            {
                                title: 'Happy Hour',
                                start: TODAY + 'T17:30:00',
                                className: "bg-success border-success text-white"
                            },
                            {
                                title: 'Dinner',
                                start: TODAY + 'T20:00:00',
                                className: "bg-danger border-danger text-white"
                            },
                            {
                                title: 'Birthday Party',
                                start: TOMORROW + 'T07:00:00',
                                className: "bg-primary text-white border-primary text-white"
                            },
                            {
                                title: 'Gotbootstrap Meeting',
                                url: 'http://gotbootstrap.com/',
                                start: YM + '-28',
                                className: "bg-info border-info text-white"
                            }
                        ],
                        viewSkeletonRender: function() {
                            $('.fc-toolbar .btn-default').addClass('btn-sm');
                            $('.fc-header-toolbar h2').addClass('fs-md');
                            $('#calendar').addClass('fc-reset-order')
                        },
                    });
                    calendar.render();
                });
        </script>*@
    }
