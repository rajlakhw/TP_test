@{
    ViewData["Title"] = "Quote";
    ViewData["PageName"] = "quote";
    ViewData["Category1"] = "TMS";
    ViewData["Heading"] = "";
    @using ViewModels.Quotes;
    @model QuotesViewModel;
    @using Data;
    @using System.Text.Json;
}
@section HeadBlock {
    <link rel="stylesheet" media="screen, print" href="css/fa-solid.css">
    <link rel="stylesheet" media="screen, print" href="css/fa-duotone.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/reactions/reactions.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/fullcalendar/fullcalendar.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/miscellaneous/jqvmap/jqvmap.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/fa-regular.css">
    <link rel="stylesheet" media="screen, print" href="~/css/notifications/sweetalert2/sweetalert2.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/formplugins/select2/select2.bundle.css">
    <link rel="stylesheet" media="screen, print" href="~/css/formplugins/bootstrap-datepicker/bootstrap-datepicker.css">
}
    <style>

        .select2-container--default .select2-dropdown {
            z-index: 10000;
        }

        .select2-container .select2-search--inline:first-child .select2-search__field {
            width: 120% !important;
        }
        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }

        .custom-control-input:checked ~ .custom-control-label::before {
            color: #fff;
            border-color: #8a9a5a;
            background-color: #67B4AC;
        }

        .custom-control-input:focus:not(:checked) ~ .custom-control-label::before {
            border-color: #adb987;
        }



        .custom-control-label::before {
            background-color: #fff;
            border: #adb5bd solid 2px;
        }

        .bg-primary-50 {
            background-color: #bcdedb;
            color: rgba(0, 0, 0, 0.8);
        }
    </style>
    @section ScriptsBlock {
    <script src="~/js/formplugins/select2/select2.bundle.js"></script>
    <script src="~/js/formplugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <script src="~/js/formplugins/dropzone/dropzone.js"></script>
    <script src="~/js/tinymce/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        $("input, textarea, select, span").on("input", function() {
            try {
                $(this).parents('form').children('div.flex-row-reverse').children('button.btn-outline-default').css({ background: 'red' });
                $(this).parents('form').children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children().children('button.btn-outline-default').css({ background: 'red' });
            }
            catch (e) {
                alert("error");
            }
        });

        $('#EditQuoteItemsTable').on('change', function() {

            if ($('.modal.show[name="' + 'QuoteItemPopupModal' + '"]').length > 0) {
                $('button[name="updateQuoteItemButton"]').css({ background: 'red' });
            } else {
                $('#editquoteitemsbutton').css({ background: 'red' });
            }

            $('#updatequotebutton').css({ background: '' });
        });

        var runDatePicker = function() {
            // orientation
            $('.delivery-datepicker').datepicker({
                orientation: "top left",
                todayHighlight: true,
                //templates: controls,
                format: "dd/mm/yyyy",
                startDate: new Date()
            });
        }

        //$('#additional-details-link').click(function(e) {
        //    debugger;
        //    e.preventDefault();
        //    var id = $(this).data('id');
        //    additionalDetailsLink(id);
        //})

        $(document).ready(function() {
            $("#quotedate-input").focus(function() {
                $(this).attr({ type: 'date' });
            });
            var EditPageEnabled = @(JsonSerializer.Serialize(Model.EditPageEnabled));
            if (!EditPageEnabled) {
                $('input').attr('disabled', 'disabled');
                $('select').attr('disabled', 'disabled');
                $('textarea').attr('disabled', 'disabled');
                $('radio').attr('disabled', 'disabled');
                //$("#form *").prop("disabled", true);
            }

            $(function() {
                runDatePicker();
                $.fn.modal.Constructor.prototype.enforceFocus = function() { };
                //$('.select2').select2({
                //    dropdownParent: $('#QuoteItemPopup')
                //});
                $('.select2').select2({ dropdownAutoWidth: true });
                $(".select2-placeholder-multiple").select2({
                    placeholder: "Select"
                });
                $(".js-hide-search").select2({
                    minimumResultsForSearch: 1 / 0
                });
                $(".js-max-length").select2({
                    maximumSelectionLength: 2,
                    placeholder: "Select maximum 2 items"
                });
                $(".select2-placeholder").select2({
                    placeholder: "Select",
                    allowClear: true
                });
                $(".js-select2-icons").select2({
                    minimumResultsForSearch: 1 / 0,
                    templateResult: icon,
                    templateSelection: icon,
                    escapeMarkup: function(elm) {
                        return elm
                    }
                });

                $("#countriesinput").select2({
                });
                $("#target-language-input").select2({
                    dropdownParent: $('#QuoteItemPopup'),
                    placeholder: "Select Target Language(s)"
                });
                $("#language-service-input").select2({
                    dropdownParent: $('#QuoteItemPopup'),
                    placeholder: "Select Language Service(s)"
                });
                $("#source-language-input").select2({
                    dropdownParent: $('#QuoteItemPopup'),
                    placeholder: "Select Source Language"
                });
                $("input[id~='interpretingLocationCountryIdinput']").select2({
                    dropdownParent: $("input[id^='QuoteItemPopup']"),
                    placeholder: "Select Country"
                });
                $("#addtarget-language-input").select2({
                    dropdownParent: $('#createQuoteItemPopup'),
                    placeholder: "Select Target Language(s)"
                });
                $("#addlanguage-service-input").select2({
                    dropdownParent: $('#createQuoteItemPopup'),
                    placeholder: "Select Language Service"
                });
                $("#addlanguage-service-category-input").select2({
                    dropdownParent: $('#createQuoteItemPopup'),
                    placeholder: "Select Category"
                });
                $("#addsource-language-input").select2({
                    dropdownParent: $('#createQuoteItemPopup'),
                    placeholder: "Select Source Language"
                });
                function icon(elm) {
                    elm.element;
                    return elm.id ? "<i class='" + $(elm.element).data("icon") + " mr-2'></i>" + elm.text : elm.text
                }

            });
            
            var QuoteItemPopupID = @(JsonSerializer.Serialize(Model.QuoteItemPopupID));
            if(QuoteItemPopupID>0){
                $('#QuoteItemPopup' + QuoteItemPopupID).modal('show');
            }
        });

        function updatequoteinformation(quoteid) {

            var currencyinput = document.getElementById('currencyinput').value;
            var languageinput = document.getElementById('languageinput').value;
            var quotetitleinput = document.getElementById('quotetitleinput').value;
            var quotefilenameinput = document.getElementById('quotefilenameinput').value;
            var internalnotesinput = document.getElementById('internal-notes-textarea').value;

            var stringToSend = quoteid + '$' + currencyinput + '$' + languageinput + '$' + quotetitleinput + '$' + quotefilenameinput + '$' + internalnotesinput;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/UpdateQuoteInformation", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            //xhr.ResponseType = 'text'
            xhr.send(stringToSend);

            var button = document.getElementById('updatequoteinfobutton');
            button.style.backgroundColor = "lightgreen";
            setTimeout(() => button.style.backgroundColor = 'white', 3000);

            try {
                event.preventDefault();
            } catch (er) {
                alert("er1");
                alert(er);
            }
            location.reload();
        }

        function updatequoteoptions(quoteid) {

            var timelinevalueinput = document.getElementById('timelinevalueinput').value;
            var timelineunitinput = document.getElementById('timelineunitinput').value;
            var wordcountsinput = document.getElementById('wordcountsinput').value;
            var ShowInterpretingDurationinput = document.getElementById('ShowInterpretingDurationinput').checked;
            var ShowWorkDurationinput = document.getElementById('ShowWorkDurationinput').checked;
            var ShowPagesOrSlidesinput = document.getElementById('ShowPagesOrSlidesinput').checked;
            var ShowNumberOfCharactersinput = document.getElementById('ShowNumberOfCharactersinput').checked;
            var ShowNumberOfDocumentsinput = document.getElementById('ShowNumberOfDocumentsinput').checked;
            var ponumberinput = document.getElementById('ponumberinput').value;
            var CustomerSpecificField1Valueinput = document.getElementById('CustomerSpecificField1Valueinput').value;
            var CustomerSpecificField2Valueinput = document.getElementById('CustomerSpecificField2Valueinput').value;
            var CustomerSpecificField3Valueinput = document.getElementById('CustomerSpecificField3Valueinput').value;
            var CustomerSpecificField4Valueinput = document.getElementById('CustomerSpecificField4Valueinput').value;
            var ShowCustomerSpecificField1input = document.getElementById('ShowCustomerSpecificField1input').checked;
            var ShowCustomerSpecificField2input = document.getElementById('ShowCustomerSpecificField2input').checked;
            var ShowCustomerSpecificField3input = document.getElementById('ShowCustomerSpecificField3input').checked;
            var ShowCustomerSpecificField4input = document.getElementById('ShowCustomerSpecificField4input').checked;
            var salutationnameinput = document.getElementById('salutationnameinput').value;

            //debugger;
            var discountID = document.getElementById('popup-discount-id').innerHTML;
            var surchargeID = document.getElementById('popup-surcharge-id').innerHTML;
            SaveDiscount(quoteid, discountID);
            SaveSurcharge(quoteid, surchargeID);

            var stringToSend = quoteid + '$' + timelinevalueinput + '$' + timelineunitinput + '$' + wordcountsinput + '$' + ShowInterpretingDurationinput + '$' + ShowWorkDurationinput + '$' + ShowPagesOrSlidesinput + '$' + ShowNumberOfCharactersinput + '$' + ShowNumberOfDocumentsinput + '$' + ponumberinput + '$' + CustomerSpecificField1Valueinput + '$' + CustomerSpecificField2Valueinput + '$' + CustomerSpecificField3Valueinput + '$' + CustomerSpecificField4Valueinput + '$' + ShowCustomerSpecificField1input + '$' + ShowCustomerSpecificField2input + '$' + ShowCustomerSpecificField3input + '$' + ShowCustomerSpecificField4input + '$' + salutationnameinput;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/UpdateQuoteOptions", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

            var button = document.getElementById('updatequoteoptionsbutton');
            button.style.backgroundColor = "lightgreen";
            setTimeout(() => button.style.backgroundColor = 'white', 3000);

            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }
            location.reload();
        }

        function loadquoteitem(quoteitemid) {

            var stringToSend = quoteitemid;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }
        }

        function generatequotepdf(quoteid) {

            var stringToSend = quoteid;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/GeneratePDFQuote", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

            alert("This has been sent for processing. You will receive an e-mail notification once the PDF quote has been generated.");

            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }
        }

        function updatequoteitem(quoteitemid) {
            //debugger;
            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }
            var languageservicecategoryinput = document.getElementById(quoteitemid + '$language-service-category-input').value;
            var languageserviceinput = document.getElementById(quoteitemid + '$language-service-input').value;
            var sourcelanguageinput = document.getElementById(quoteitemid + '$source-language-input').value;
            var targetlanguageinput = document.getElementById(quoteitemid + '$target-language-input').value;
            var wordcountnewinput = document.getElementById(quoteitemid + '$wordcountnewinput').value;
            var wordcountexactinput = document.getElementById(quoteitemid + '$wordcountexactinput').value;
            var wordcountrepetitionsinput = document.getElementById(quoteitemid + '$wordcountrepetitionsinput').value;
            var wordcountperfectinput = document.getElementById(quoteitemid + '$wordcountperfectinput').value;
            var wordcountfuzzyband1input = document.getElementById(quoteitemid + '$wordcountfuzzyband1input').value;
            var wordcountfuzzyband2input = 0;
            if (document.getElementById(quoteitemid + '$wordcountfuzzyband2input') != null) { wordcountfuzzyband2input = document.getElementById(quoteitemid + '$wordcountfuzzyband2input').value };
            var wordcountfuzzyband3input = 0;
            if (document.getElementById(quoteitemid + '$wordcountfuzzyband3input') != null) { wordcountfuzzyband3input = document.getElementById(quoteitemid + '$wordcountfuzzyband3input').value };
            var wordcountfuzzyband4input = 0;
            if (document.getElementById(quoteitemid + '$wordcountfuzzyband4input') != null) { wordcountfuzzyband4input = document.getElementById(quoteitemid + '$wordcountfuzzyband4input').value };

            var chargetoclientinput = document.getElementById(quoteitemid + '$chargetoclientinput').value;
            var pagesinput = document.getElementById(quoteitemid + '$pagesinput').value;
            var charactersinput = document.getElementById(quoteitemid + '$charactersinput').value;
            var documentsinput = document.getElementById(quoteitemid + '$documentsinput').value;
            var workhourinput = document.getElementById(quoteitemid + '$workhourinput').value;
            var workminuteinput = document.getElementById(quoteitemid + '$workminuteinput').value;
            var audiohourinput = document.getElementById(quoteitemid + '$audiohourinput').value;
            var audiominuteinput = document.getElementById(quoteitemid + '$audiominuteinput').value;
            var interpretinghourinput = document.getElementById(quoteitemid + '$interpretinghourinput').value;
            var interpretingminuteinput = document.getElementById(quoteitemid + '$interpretingminuteinput').value;
            var InterpretingLocationOrgNameinput = document.getElementById(quoteitemid + '$InterpretingLocationOrgNameinput').value;
            var InterpretingLocationAddress1input = document.getElementById(quoteitemid + '$InterpretingLocationAddress1input').value;
            var InterpretingLocationAddress2input = document.getElementById(quoteitemid + '$InterpretingLocationAddress2input').value;
            var InterpretingLocationAddress3input = document.getElementById(quoteitemid + '$InterpretingLocationAddress3input').value;
            var InterpretingLocationAddress4input = document.getElementById(quoteitemid + '$InterpretingLocationAddress4input').value;
            var InterpretingLocationCountyOrStateinput = document.getElementById(quoteitemid + '$InterpretingLocationCountyOrStateinput').value;
            var InterpretingLocationPostcodeOrZipinput = document.getElementById(quoteitemid + '$InterpretingLocationPostcodeOrZipinput').value;
            var interpretingLocationCountryIdinput = document.getElementById(quoteitemid + '$interpretingLocationCountryIdinput').value;
            var externalnotestextarea = document.getElementById(quoteitemid + '$external-notes-textarea').value;
            //debugger;
            var workminutes = (workhourinput * 60) + parseInt(workminuteinput);
            var audiominutes = (audiohourinput * 60) + parseInt(audiominuteinput);
            var interpretingminutes = (interpretinghourinput * 60) + parseInt(interpretingminuteinput);

            if (interpretingLocationCountryIdinput == "") {
                interpretingLocationCountryIdinput = 0;
            }
            if (languageservicecategoryinput == "") {
                document.getElementById(quoteitemid + '$language-service-category-input-mandatory').hidden = false;
                return;
            }
            if (languageserviceinput == "") {
                if (languageservicecategoryinput != "") {
                    document.getElementById(quoteitemid + '$language-service-category-input-mandatory').hidden = true;

                }
                document.getElementById(quoteitemid + '$language-service-input-mandatory').hidden = false;
                return;
            }

            var stringToSend = quoteitemid + '$' + languageserviceinput + '$' + sourcelanguageinput + '$' + targetlanguageinput + '$' + wordcountnewinput + '$' + wordcountexactinput + '$' + wordcountrepetitionsinput + '$' + wordcountperfectinput + '$' + wordcountfuzzyband1input + '$' + wordcountfuzzyband2input + '$' + wordcountfuzzyband3input + '$' + wordcountfuzzyband4input + '$' + chargetoclientinput + '$' + pagesinput + '$' + charactersinput + '$' + documentsinput + '$' + workminutes + '$' + audiominutes + '$' + interpretingminutes + '$' + InterpretingLocationOrgNameinput + '$' + InterpretingLocationAddress1input + '$' + InterpretingLocationAddress2input + '$' + InterpretingLocationAddress3input + '$' + InterpretingLocationAddress4input + '$' + InterpretingLocationCountyOrStateinput + '$' + InterpretingLocationPostcodeOrZipinput + '$' + interpretingLocationCountryIdinput + '$' + externalnotestextarea + '$' + languageservicecategoryinput;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/UpdateQuoteItem", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

            //var button = document.getElementById(quoteitemid + '$updatequoteitembutton');
            //button.style.backgroundColor = "lightgreen";
            //setTimeout(() => button.style.backgroundColor = 'white', 3000);


            location.reload();
        }

        function updatequote(quoteid) {

            var count = 0;
            var quotedateinput = document.getElementById('quotedate-input').value;
            var OrgNameinput = document.getElementById('OrgNameinput').value;
            var Address1input = document.getElementById('Address1input').value;
            var Address2input = document.getElementById('Address2input').value;
            var Address3input = document.getElementById('Address3input').value;
            var Address4input = document.getElementById('Address4input').value;
            var AddressCountyOrStateinput = document.getElementById('AddressCountyOrStateinput').value;
            var AddressPostcodeOrZipinput = document.getElementById('AddressPostcodeOrZipinput').value;
            var countriesinput = document.getElementById('countriesinput').value;
            var quotetitleinput = document.getElementById('quotetitle-input').value;

            //var openingsectiontext = document.getElementById('openingsectiontext').value;
            //var closingsectiontext = document.getElementById('closingsectiontext').value;
            var salescontactselect = document.getElementById('sales-contact-select').value;
            //debugger;
            if (salescontactselect == "0") {
                document.getElementById('sales-contact-required').hidden = false;
                count++;
            }

            if (count == 0) {
                var openingsectiontext = tinymce.get('openingsectiontext').getContent();
                var closingsectiontext = tinymce.get('closingsectiontext').getContent();

                var stringToSend = quoteid + '$tp$' + quotedateinput + '$tp$' + OrgNameinput + '$tp$' + Address1input + '$tp$' + Address2input + '$tp$' + Address3input + '$tp$' + Address4input + '$tp$' + AddressCountyOrStateinput + '$tp$' + AddressPostcodeOrZipinput + '$tp$' + countriesinput + '$tp$' + quotetitleinput + '$tp$' + openingsectiontext + '$tp$' + closingsectiontext + '$tp$' + salescontactselect;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "Quote/UpdateQuotePDFDetails", false);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send(stringToSend);

                var button = document.getElementById('updatequotebutton');
                button.style.backgroundColor = "lightgreen";
                setTimeout(() => button.style.backgroundColor = 'white', 3000);
                location.reload();
            }
            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }

        }

        function removeexistingRow(quoteitemid) {

            let text = "Do you really want to delete quote item ID " + quoteitemid + "?";
            if (confirm(text) == true) {
                var stringToSend = quoteitemid;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "Quote/DeleteQuoteItem", false);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send(stringToSend);

                try {
                    event.preventDefault();
                } catch (er) {
                    alert("er2");
                    alert(er);
                }
                location.reload();
            }
        }

        function addquoteitems(sourcepath) {
            try {
                event.preventDefault();
            } catch (er) {
                alert(er);
            }
            //alert("here");
            //quoteitemstablerows = "<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>";
            //document.getElementById('quoteitemstable').hidden = false;
            //var quoteitemstable = document.getElementById("quoteitemstable");
            //quoteitemstable.style.visibility = "visible";

            var categoryinput = document.getElementById('addlanguage-service-category-input');
            var languageserviceinput = document.getElementById('addlanguage-service-input');
            var sourcelanguageinput = document.getElementById('addsource-language-input');
            var targetlanguageinput = document.getElementById('addtarget-language-input');


            // Find a <table> element with id="myTable":
            var table = document.getElementById("quoteitemstable");
            table.style.visibility = "visible";
            document.getElementById("quoteitemsText").hidden = false;
            for (var lscoption of categoryinput.options) {
                if (lscoption.selected) {

                    for (var lsoption of languageserviceinput.options) {
                        if (lsoption.selected) {

                            for (var sloption of sourcelanguageinput.options) {
                                if (sloption.selected) {

                                    for (var tloption of targetlanguageinput.options) {
                                        if (tloption.selected) {
                                            // Create an empty <tr> element and add it to the 1st position of the table:
                                            var row = table.insertRow();

                                            // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                                            var cell1 = row.insertCell(0);
                                            cell1.style = "text-align:center"
                                            var cell2 = row.insertCell(1);
                                            cell2.style = "text-align:center"
                                            var cell3 = row.insertCell(2);
                                            cell3.style = "text-align:center"
                                            var cell4 = row.insertCell(3);
                                            cell4.style = "text-align:center"

                                            // Add some text to the new cells:
                                            cell1.innerHTML = lsoption.innerText;
                                            cell2.innerHTML = sloption.innerText;
                                            cell3.innerHTML = tloption.innerText;
                                            cell4.innerHTML = "<img id='row" + row.rowIndex + "' src='/img/close.png' title='Remove' alt='Remove' onclick=(removeRow(" + row.rowIndex + "))><font style='opacity:0;font-size:1px;'>$" + lsoption.value + "," + sloption.value + "," + tloption.value + "," + lscoption.value + "$</font>";
                                            /*cell4.innerHTML = lsoption.value + "," + sloption.value + "," + tloption.value + "$<img id='row" + row.rowIndex + " src='/img/close.png' title='Remove' alt='Remove' onclick=(document.getElementById('quoteitemstable').deleteRow(" + row.rowIndex + "))>";*/
                                            //var img = document.createElement("img");
                                            //img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
                                            //cell4.
                                            //row.delete
                                            //table.deleteRow(row.rowIndex)

                                        }
                                    }
                                }

                            }
                        }
                    }
                }
            }
            var addquoteitembutton = document.getElementById("addquoteitembutton");
            addquoteitembutton.blur();

            var addnewquoteitemsbutton = document.getElementById('addnewquoteitemsbutton');
            addnewquoteitemsbutton.style.backgroundColor = "red";
            addnewquoteitemsbutton.style.visibility = "visible";

        }

        function removeRow(rowIndex) {
            var table = document.getElementById("quoteitemstable");

            var imgrow = document.getElementById("row" + rowIndex);
            var row = imgrow.parentElement.parentElement;
            table.deleteRow(row.rowIndex);

        }

        function addnewquoteitems(quoteid) {
            try {
                event.preventDefault();
            } catch (er) {
                alert(er);
            }

            var table = document.getElementById("quoteitemstable");
            var quoteitems = "";
            for (var i = 1, row; row = table.rows[i]; i++) {
                if (quoteitems == "") {
                    quoteitems += row.childNodes[3].innerHTML.split('$')[1];
                }
                else {
                    quoteitems += "$" + row.cells[3].innerHTML.split('$')[1];
                }
            }

            var dataToSend = quoteid + "$" + quoteitems;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/AddNewQuoteItems", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.ResponseType = 'text'
            xhr.send(dataToSend);

            //var existingtable = document.getElementById("existingquoteitemstable");
            //for (var i = 1, row; row = table.rows[i]; i++) {

            //    var tablerow = existingtable.insertRow();

            //    // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
            //    var cell1 = tablerow.insertCell(0);
            //    cell1.style = "text-align:center"
            //    var cell2 = tablerow.insertCell(1);
            //    cell2.style = "text-align:center"
            //    var cell3 = tablerow.insertCell(2);
            //    cell3.style = "text-align:center"
            //    var cell4 = tablerow.insertCell(3);
            //    cell4.style = "text-align:center"

            //    // Add some text to the new cells:
            //    cell1.innerHTML = row.cells[0].innerHTML;
            //    cell2.innerHTML = row.cells[1].innerHTML;
            //    cell3.innerHTML = row.cells[2].innerHTML;

            //    cell4.innerHTML = "<img id='row" + tablerow.rowIndex + "' src='/img/close.png' title='Remove' alt='Remove' onclick=(removeexistingRow(" + tablerow.rowIndex + "$" + xhr.responseText.split(",")[(i - 1)] + "))>";
            //}
            //var rowCount = table.rows.length;
            //for (var x = rowCount - 1; x > 0; x--) {
            //    table.deleteRow(x);
            //}
            location.reload();
            //var button = document.getElementById('addnewquoteitemsbutton');
            //button.style.backgroundColor = "lightgreen";
            //setTimeout(() => button.style.backgroundColor = 'white', 3000);
        }
        function importQuoteWordCounts(quoteId) {
            //debugger;

            document.getElementById('folderPathRequired').hidden = true;
            var folderPath = document.getElementById('folder-path').value;
            if (folderPath == '') {
                document.getElementById('folderPathRequired').hidden = false;
                return;
            }

            var stringToSend = folderPath + '$' + quoteId;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/ImportWordCounts", true);
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {

                    //debugger;


                    //show job item creation successful modal
                    var response = xhr.responseText;
                    var headerText = response.split("$")[0];
                    document.getElementById('header-text').innerText = headerText;
                    if (headerText == "Success") {

                        document.getElementById('quote-word-counts-success-string').hidden = false;
                        document.getElementById('quote-word-counts-success-string').textContent = "";
                        document.getElementById('quote-word-counts-success-dates').innerText = response.split("$")[1];
                        document.getElementById('quote-word-counts-warning-string').innerText = "";
                    }
                    else {

                        document.getElementById('quote-word-counts-success-dates').innerText = "";
                        document.getElementById('quote-word-counts-warning-string').innerText = response.split("$")[1];
                    }
                    $('#quote-word-counts-modal').modal("show");
                    document.getElementById('folder-path').value = '';

                }
                else {

                }
            };
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

        }
        function refreshPage(quoteID) {
            window.location.href = `Quote/Index?ID=${quoteID}`;
        }
        function importQuoteID(quoteItemID) {
            document.getElementById('word-counts-quote-id').innerText = "";
            document.getElementById('word-counts-quote-id').innerText = quoteItemID;
        }
        function additionalDetailsLink(quoteItemID) {

            //e.preventDefault();
            $('#' + quoteItemID + '\\$details').slideToggle("slow");

        }
        function importQuoteItemWordCounts() {
            //debugger;
            var quoteItemID = document.getElementById('word-counts-quote-id').innerText;
            document.getElementById('quoteItemFolderPathRequired').hidden = true;
            var folderPath = document.getElementById('quote-item-folder-path').value;
            if (folderPath == '') {
                document.getElementById('quoteItemFolderPathRequired').hidden = false;
                return;
            }

            var stringToSend = folderPath + '$' + quoteItemID;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/ImportQuoteItemWordCounts", true);
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {

                    //debugger;


                    //show job item creation successful modal
                    var response = xhr.responseText;
                    var headerText = response.split("$")[0];
                    document.getElementById('header-text').innerText = headerText;
                    if (headerText == "Success") {

                        document.getElementById('quote-word-counts-success-string').hidden = false;
                        document.getElementById('quote-word-counts-success-string').textContent = "";
                        document.getElementById('quote-word-counts-success-dates').innerText = response.split("$")[1];
                        document.getElementById('quote-word-counts-warning-string').innerText = "";
                    }
                    else {

                        document.getElementById('quote-word-counts-success-dates').innerText = "";
                        document.getElementById('quote-word-counts-warning-string').innerText = response.split("$")[1];
                    }
                    $('#quote-word-counts-modal').modal("show");
                    document.getElementById('folder-path').value = '';

                }
                else {

                }
            };
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

        }
        function onCategorySelect(selectObject) {
            var selectId = selectObject.id;
            var values = $('#' + selectId).val();
            var hiddenId = "hidden" + selectId;
            $('#' + hiddenId + 'Values').val(values);
            document.getElementById('addlanguage-service-input').disabled = false;
            $.ajax({
                beforeSend: function() {
                    // add loading spinner
                },
                url: "api/GetServices",
                method: 'POST',
                dataType: 'json',
                data: { 'SelectedField': values },
                success: function(data) {
                    //confirm update was successfull

                    var select = $("#addlanguage-service-input");
                    select.empty();
                    select.append("<option value=''>(Please select)</option>"); // add "Please select" option
                    for (let index = 0; index < data.length; ++index) {
                        const element = data[index];
                        var opt = document.createElement('option');

                        opt.value = element.id;
                        opt.innerHTML = element.name;
                        select.append(opt);
                        // ...use `element`...
                    }
                    select.val(null);

                },
                error: function(err) {
                    //show that there was an error
                    alert('ERROR');
                    console.log(err);
                },
                complete: function() {
                    // remove the spinner
                }
            });
        }
        function onServiceCategorySelect(selectObject,jobitemID) {

            var selectId = selectObject.id;
            var values = $('#' + selectId.replace(/\$/g, '\\$')).val();
            //var values = $('#' + selectId).val();
            //var hiddenId = "hidden" + selectId;
            //$('#' + hiddenId + 'Values').val(values);
            //document.getElementById('addlanguage-service-input').disabled = false;
            $.ajax({
                beforeSend: function() {
                    // add loading spinner
                },
                url: "api/GetServices",
                method: 'POST',
                dataType: 'json',
                data: { 'SelectedField': values },
                success: function(data) {
                    //debugger;
                    var select = $("select[id='" + jobitemID + "\\$language-service-input']");
                    //var select = $("#addlanguage-service-input");
                    select.empty();
                    select.append("<option value=''>(Please select)</option>"); // add "Please select" option
                    for (let index = 0; index < data.length; ++index) {
                        const element = data[index];
                        var opt = document.createElement('option');

                        opt.value = element.id;
                        opt.innerHTML = element.name;
                        select.append(opt);
                        // ...use `element`...
                    }
                    select.val(null);

                },
                error: function(err) {
                    //show that there was an error
                    alert('ERROR');
                    console.log(err);
                },
                complete: function() {
                    // remove the spinner
                }
            });
        }
        function editquoteitems() {


            var editedData = [];

            $('#EditQuoteItemsTable tr').each(function() {

                var ID = $(this).find('#quote-item-id').text();
                var LanguageService = $(this).find('select[name="edit-language-service-input"]').val();
                var WordCountNew = $(this).find('input[name="WordCountNew"]').val();
                var WordCountFuzzyBand1 = $(this).find('input[name="WordCountFuzzyBand1"]').val();
                var WordCountFuzzyBand2 = $(this).find('input[name="WordCountFuzzyBand2"]').val();
                var WordCountFuzzyBand3 = $(this).find('input[name="WordCountFuzzyBand3"]').val();
                var WordCountFuzzyBand4 = $(this).find('input[name="WordCountFuzzyBand4"]').val();
                var WordCountExact = $(this).find('input[name="WordCountExact"]').val();
                var WordCountRepetitions = $(this).find('input[name="WordCountRepetitions"]').val();
                var WordCountPerfectMatches = $(this).find('input[name="WordCountPerfectMatches"]').val();
                var InterpretingExpectedDurationHour = $(this).find('input[name="InterpretingExpectedDurationHour"]').val();
                var InterpretingExpectedDurationMinutes = $(this).find('input[name="InterpretingExpectedDurationMinutes"]').val();
                var WorkDurationInBreakdownHour = $(this).find('input[name="WorkDurationInBreakdownHour"]').val();
                var WorkDurationInBreakdownMinutes = $(this).find('input[name="WorkDurationInBreakdownMinutes"]').val();
                var Pages = $(this).find('input[name="Pages"]').val();
                var Characters = $(this).find('input[name="Characters"]').val();
                var Documents = $(this).find('input[name="Documents"]').val();
                var ChargeToClient = $(this).find('input[name="ChargeToClient"]').val();

                InterpretingExpectedDurationHour = parseInt(InterpretingExpectedDurationHour);
                InterpretingExpectedDurationMinutes = parseInt(InterpretingExpectedDurationMinutes);
                WorkDurationInBreakdownHour = parseInt(WorkDurationInBreakdownHour);
                WorkDurationInBreakdownMinutes = parseInt(WorkDurationInBreakdownMinutes);
                if (LanguageService != undefined) {
                    var editedRow = {
                        Id: ID,
                        LanguageServiceId: LanguageService,
                        WordCountNew: WordCountNew,
                        WordCountFuzzyBand1: WordCountFuzzyBand1,
                        WordCountFuzzyBand2: WordCountFuzzyBand2,
                        WordCountFuzzyBand3: WordCountFuzzyBand3,
                        WordCountFuzzyBand4: WordCountFuzzyBand4,
                        WordCountExact: WordCountExact,
                        WordCountRepetitions: WordCountRepetitions,
                        WordCountPerfectMatches: WordCountPerfectMatches,
                        InterpretingExpectedDurationMinutes: (InterpretingExpectedDurationHour * 60) + InterpretingExpectedDurationMinutes,
                        WorkMinutes: (WorkDurationInBreakdownHour * 60) + WorkDurationInBreakdownMinutes,
                        Pages: Pages,
                        Characters: Characters,
                        Documents: Documents,
                        ChargeToClient: ChargeToClient
                    };

                    editedData.push(editedRow);
                }
            });
            var tableData = JSON.stringify(editedData);

            var stringToSend = tableData;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "Quote/UpdateQuoteItems", false);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(stringToSend);

            var button = document.getElementById('editquoteitemsbutton');
            button.style.backgroundColor = "lightgreen";
            setTimeout(() => button.style.backgroundColor = 'white', 3000);

            try {
                event.preventDefault();
            } catch (er) {
                alert("er2");
                alert(er);
            }
            location.reload();
        }
        function surchargecategoryselectupdate(invoiceLang) {
            var surchargecategoryselect = document.getElementById('surchargecategoryselect');
            var selectedcategory = surchargecategoryselect.value;
            var Surchargedescriptioninput = document.getElementById('Surchargedescriptioninput');

            if (selectedcategory != "-1") {
                var stringToSend = selectedcategory + "$tp$" + invoiceLang;

                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/GetSurchargeDiscountDescription", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                Surchargedescriptioninput.value = xhrjobitems.responseText;
            }
            else {
                Surchargedescriptioninput.value = "";
            }
        }

        function discountcategoryselectupdate(invoiceLang) {
            var discountcategoryselect = document.getElementById('discountcategoryselect');
            var selectedcategory = discountcategoryselect.value;
            var Discountdescriptioninput = document.getElementById('Discountdescriptioninput');

            if (selectedcategory != "-1") {
                var stringToSend = selectedcategory + "$tp$" + invoiceLang;

                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "TMSJobOrder/GetSurchargeDiscountDescription", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                Discountdescriptioninput.value = xhrjobitems.responseText;
            }
            else {
                Discountdescriptioninput.value = "";
            }
        }
        function SaveSurcharge(quoteId, surchargeid) {
            var errormessage = '';
            var surchargecategoryselect = document.getElementById('surchargecategoryselect');
            var Surchargedescriptioninput = document.getElementById('Surchargedescriptioninput');
            var SurchargePerc = document.getElementById('SurchargePerc');
            var SurchargeVal = document.getElementById('SurchargeVal');
            var SurchargeAmountinput = document.getElementById('SurchargeAmountinput');

            if (SurchargeAmountinput.value == "" && surchargecategoryselect.value != "-1") {
                errormessage = '- Please enter the surcharge amount\n';
            }

            var surchargetype = false;
            if (SurchargeVal.checked) {
                surchargetype = true;
            }

            if (errormessage === '') {
                var stringToSend = quoteId + "$tp$" + surchargeid + "$tp$" + surchargecategoryselect.value + "$tp$" + Surchargedescriptioninput.value + "$tp$" + surchargetype + "$tp$" + SurchargeAmountinput.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "Quote/SaveSurcharge", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                //xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                //location.reload();

            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

        }

        function SaveDiscount(quoteId, discountid) {
            var errormessage = '';
            var discountcategoryselect = document.getElementById('discountcategoryselect');
            var Discountdescriptioninput = document.getElementById('Discountdescriptioninput');
            var DiscountePerc = document.getElementById('DiscountePerc');
            var DiscounteVal = document.getElementById('DiscountVal');
            var DiscountAmountinput = document.getElementById('DiscountAmountinput');

            if (DiscountAmountinput.value == "" && discountcategoryselect.value != "-1") {
                errormessage = '- Please enter the discount amount\n';
            }

            var discounttype = 0;
            if (DiscounteVal.checked) {
                discounttype = 1;
            }

            if (errormessage === '') {
                var stringToSend = quoteId + "$tp$" + discountid + "$tp$" + discountcategoryselect.value + "$tp$" + Discountdescriptioninput.value + "$tp$" + discounttype + "$tp$" + DiscountAmountinput.value;
                var xhrjobitems = new XMLHttpRequest();
                xhrjobitems.open("POST", "Quote/SaveDiscount", false);
                xhrjobitems.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                //xhrjobitems.ResponseType = 'text'
                xhrjobitems.send(stringToSend);

                //location.reload();

            } else {
                alert(errormessage);
            }

            try {
                event.preventDefault();
            } catch (er) {
                alert("er");
                alert(er);
            }

        }
        function SaveDiscountPopup() {

            var DiscountAmountinput = document.getElementById('DiscountAmountinput').value;
            var DiscountAmount = parseFloat(DiscountAmountinput);
            var DiscountePerc = document.getElementById('DiscountePerc');
            var DiscounteVal = document.getElementById('DiscountVal');
            var Prefix = @Html.Raw(JsonSerializer.Serialize(ViewBag.Prefix));
            var SubTotal = @Html.Raw(JsonSerializer.Serialize(Model.SubTotalOverallChargeToClient));


            var CurrencyName = @Html.Raw(JsonSerializer.Serialize(ViewBag.CurrencyName));

            var finalValue = "";
            var discounttype = 0;
            if (DiscounteVal.checked) {
                discounttype = 1;
            }

            if (DiscountAmount > 0) {
                if (discounttype == 1) {
                    finalValue = Prefix + DiscountAmount.toFixed(2) + CurrencyName;
                }
                else {
                    var perValue = (parseFloat(SubTotal) * parseFloat(DiscountAmount)) / 100;
                    finalValue = Prefix + perValue.toFixed(2) + CurrencyName;
                }
            }

            $('#discount-value-label').text(finalValue);

            $('#updatequoteoptionsbutton').css({ background: 'red' });
        }
        function SaveSurchargePopup() {
            //debugger;
            var SurchargeAmountinput = document.getElementById('SurchargeAmountinput').value;
            var SurchargeAmount = parseFloat(SurchargeAmountinput);
            var SurchargePerc = document.getElementById('SurchargePerc');
            var SurchargeVal = document.getElementById('SurchargeVal');
            var Prefix = @Html.Raw(JsonSerializer.Serialize(ViewBag.Prefix));
            var SubTotal = @Html.Raw(JsonSerializer.Serialize(Model.SubTotalOverallChargeToClient));


            var CurrencyName = @Html.Raw(JsonSerializer.Serialize(ViewBag.CurrencyName));

            var finalValue = "";
            var surchargetype = 0;
            if (SurchargeVal.checked) {
                surchargetype = 1;
            }

            if (SurchargeAmount > 0) {
                if (surchargetype == 1) {
                    finalValue = Prefix + SurchargeAmount.toFixed(2) + CurrencyName;
                }
                else {
                    var perValue = (parseFloat(SubTotal) * parseFloat(SurchargeAmount)) / 100;
                    finalValue = Prefix + perValue.toFixed(2) + CurrencyName;
                }
            }

            $('#surcharge-value-label').text(finalValue);
            $('#updatequoteoptionsbutton').css({ background: 'red' });
        }

        tinymce.init({
            selector: 'textarea.tinymce',
            plugins: 'autoresize a11ychecker image imagetools image code advcode advlist casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker autolink link',
            toolbar: 'insertfile undo redo | fontselect fontsizeselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image | print preview media fullpage | forecolor backcolor emoticons | a11ycheck addcomment showcomments link| casechange checklist code formatpainter pageembed permanentpen table',
            fontsize_formats: '8pt 10pt 11pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 36pt',
            toolbar_mode: 'wrap',
            toolbar_sticky: 'true',
            tinycomments_mode: 'embedded',
            tinycomments_author: 'Author name',
            menubar: 'file edit insert view format table tools help',
            file_picker_types: 'image',
            default_link_target: '_blank',
            block_unsupported_drop: true,
            setup: function(editor) {
                // Listen for changes in the textarea
                editor.on('change', function() {
                    // Trigger a function when the content changes
                    try {
                        $('#updatequotebutton').css({ background: 'red' });
                    }
                    catch (e) {
                        alert("error");
                    }
                });
                // Modify the behavior of paste events
                editor.on('paste', function(e) {
                    
                    e.preventDefault(); // Prevent default paste behavior

                    // Get the pasted content as plain text
                    var clipboardData = e.clipboardData || window.clipboardData;
                    var pastedText = clipboardData.getData('text/plain');

                    // Modify the font size of the pasted content
                    var modifiedContent = '<span style="font-size: 11pt;">' + pastedText + '</span>';

                    // Insert the modified content into the editor
                    editor.insertContent(modifiedContent);
                });
            },
            branding: false,
            autoresize_min_height: 'auto',
            autoresize_max_height: 'auto',
            /* and here's our custom image picker*/
            file_picker_callback: function(cb, value, meta) {
                var input = document.createElement('input');
                input.setAttribute('type', 'file');
                input.setAttribute('accept', 'image/*');
                /* Note: In modern browsers input[type="file"] is functional without
                  even adding it to the DOM, but that might not be the case in some older
                  or quirky browsers like IE, so you might want to add it to the DOM
                  just in case, and visually hide it. And do not forget do remove it
                  once you do not need it anymore. */
                input.onchange = function() {
                    var file = this.files[0];

                    var reader = new FileReader();
                    reader.onload = function() {
                        /* Note: Now we need to register the blob in TinyMCEs image blob
            registry. In the next release this part hopefully won't be
            necessary, as we are looking to handle it internally. */
                        var id = 'blobid' + (new Date()).getTime();
                        var blobCache = tinymce.activeEditor.editorUpload.blobCache;
                        var base64 = reader.result.split(',')[1];
                        var blobInfo = blobCache.create(id, file, base64);
                        blobCache.add(blobInfo);

                        /* call the callback and populate the Title field with the file name */
                        cb(blobInfo.blobUri(), { title: file.name });
                    };
                    reader.readAsDataURL(file);
                };
                input.click();
            }
        });
    </script>
}

    <div class="row justify-content-between px-5">
        <div class="col-lg-6 mb-3 text-center">
            <div class="row">
                <label class="form-label col-lg-3 d-flex align-items-center px-0">Group</label>
                <div class="col text-left">
                    <a target="_blank" style="text-decoration: none !important; color: #BA9765;" asp-controller="OrgGroup" asp-action="Index" asp-route-GroupID="@Model.OrgGroupId">
                        @(Model.OrgGroupId + " - " + Model.OrgGroupName)
                    </a>
                </div>
            </div>
            <div class="row">
                <label class="form-label col-lg-3 d-flex align-items-center px-0">Organisation</label>
                <div class="col text-left">
                    <a target="_blank" style="text-decoration: none !important;" asp-controller="Organisation" asp-action="Index" asp-route-Id="@Model.OrgId">
                        @(Model.OrgId + " - " + Model.OrgName)
                    </a>
                </div>
            </div>
            <div class="row">
                <label class="form-label col-lg-3 d-flex align-items-center px-0">Contact</label>
                <div class="col text-left">
                    <a target="_blank" style="text-decoration: none !important;" asp-controller="Contact" asp-action="Index" asp-route-ContactID="@Model.ContactId">
                        @(Model.ContactId + " - " + Model.ContactName)
                    </a>
                    @if (ViewBag.ContactDeleted != "")
                {
                    <span class="font-italic" style="color: red;">@Html.Raw(ViewBag.ContactDeleted)</span>
                }
            </div>
        </div>
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Enquiry</label>
            <div class="col text-left">
                <a target="_blank" style="text-decoration: none !important;" asp-controller="Enquiry" asp-action="Index" asp-route-ID="@Model.EnquiryId">
                    @(Model.EnquiryId + " - " + Model.QuoteFileName)
                </a>
            </div>
        </div>
        <div class="row">
            <label class="form-label col-lg-3 d-flex align-items-center px-0">Quote</label>
            <div class="col text-left">
                @(Model.Id + " - " + Model.QuoteFileName)
            </div>
        </div>
    </div>

    <div class="col-lg-4 mb-3 text-center">
        <div class="row justify-content-lg-end">
            @{
                if (Model.EnquiryFolder != null && Model.EnquiryFolder != "")
                {
                    if (Model.QuotePDFPath != null && Model.QuotePDFPath != "")
                    {

                            <a href="@Model.QuotePDFPath">
                                <i class="fal fa-file-invoice fa-2x color-black d-block"></i>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quote PDF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </a>
                    }

                        <a href="@Model.EnquiryFolder">
                            <i class="fal fa-folder-open fa-2x color-black d-block"></i>
                            Enquiry folder
                        </a>
                }
                else
                {
                        <i class="fal fa-folder-open fa-2x color-black d-block"></i>

                    if (Model.ArchivedDateTime != null)
                    {
                            <label class="form-label col-lg-3 d-flex align-items-center px-0">&nbsp;Archived - please contact IT Support</label>
                    }
                    if (Model.ArchivedToLionBoxDateTime != null)
                    {
                            <label class="form-label col-lg-3 d-flex align-items-center px-0">&nbsp;Archived to LionBox - please contact IT Support</label>
                    }
                    if (Model.ArchivedToAmazonS3dateTime != null)
                    {
                            <label class="form-label">&nbsp;Archived to AWS - please contact IT Support</label>
                    }
                }
            }
        </div>
        @*<div class="row justify-content-lg-end">
        @{
        if (Model.QuotePDFPath != "")
        {

        <a href="@Model.QuotePDFPath">
        <i class="fal fa-file-invoice fa-2x color-black d-block"></i>
        Quote PDF
        </a>
        }
        }
        </div>*@
    </div>
</div>

<div class="panel-container show">
    <div class="modal fade" id="createQuoteItemPopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="createquoteitemHeader">
                        <strong><label id="modal_header1">Create Quote item</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <form>
                        <div class="row">
                            <div class="col-md-12">
                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Language&nbsp;service&nbsp;category</label>
                                <select name="" id="addlanguage-service-category-input" class="select2-placeholder-multiple custom-select" onchange="onCategorySelect(this);">
                                    <option value="">Select</option>
                                    @for (var i = 0; i < Model.LanguageServiceCategory.Count(); i++)
                                    {
                                        <option value="@Model.LanguageServiceCategory.ElementAt(i).Id">@Model.LanguageServiceCategory.ElementAt(i).Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12">
                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Language&nbsp;service</label>
                                <select name="" id="addlanguage-service-input" class="select2-placeholder-multiple custom-select" disabled>
                                    <option value="">Select</option>
                                    @for (var i = 0; i < Model.LanguageServices.Count(); i++)
                                    {
                                        <option value="@Model.LanguageServices.ElementAt(i).Id">@Model.LanguageServices.ElementAt(i).Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12">
                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Source&nbsp;language</label>
                                <select name="" class="select2 form-control w-100" id="addsource-language-input">
                                    <option value="">Select</option>
                                    @for (var i = 0; i < Model.Languages.Count(); i++)
                                    {
                                        <option value="@Model.Languages.ElementAt(i).StringValue">@Model.Languages.ElementAt(i).Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12">
                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Target&nbsp;language(s)</label>
                                <select name="" class="select2-placeholder-multiple custom-select" multiple="multiple" id="addtarget-language-input">
                                    @for (var i = 0; i < Model.Languages.Count(); i++)
                                    {
                                        <option value="@Model.Languages.ElementAt(i).StringValue">@Model.Languages.ElementAt(i).Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <br />
                        <br />
                        <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:20px">
                            @{
                                var sourcepath = ViewBag.CurrentDirectory + "/img/close.png";
                            }
                            <button id="addquoteitembutton" class="@(Settings.Theme.IconPrefix) btn btn-success" type="submit" title="Add" onclick="addquoteitems('@sourcepath')"><i class="ni ni-plus fa-2x"></i></button>
                        </div>
                        <br />
                        <br />
                        <label id="quoteitemsRequired" class="text-danger" hidden>You need to add at least one quote item</label>
                        <label id="quoteitemsText" class="text-danger" hidden>The below item(s) will be added to Existing quote item(s)</label>
                        <div class="row">
                            <div class="col-md-12">
                                <table border="1" id="quoteitemstable" style="width:100%;visibility:hidden">
                                    <thead>
                                        <tr>
                                            <th style="text-align:center">
                                                Language Service
                                            </th>
                                            <th style="text-align:center">
                                                Source Language
                                            </th>
                                            <th style="text-align:center">
                                                Target Language
                                            </th>
                                            <th style="text-align:center">
                                                Remove
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@{
                                        <label id="quoteitemstablerows" />
                                        }*@
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <br />
                        <br />

                        <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:5px">
                            <button id="addnewquoteitemsbutton" style="visibility:hidden" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="addnewquoteitems(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                        </div>

                        <hr />
                        <label class="form-label col-sm-2 d-flex align-items-center px-0">Existing&nbsp;quote&nbsp;item(s)</label>
                        <div class="row">
                            <div class="col-md-12">
                                <table border="1" id="existingquoteitemstable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th style="text-align:center">
                                                Language&nbsp;Service
                                            </th>
                                            <th style="text-align:center">
                                                Source&nbsp;Language
                                            </th>
                                            <th style="text-align:center">
                                                Target&nbsp;Language
                                            </th>
                                            @*<th style="text-align:center">
                                            Remove
                                            </th>*@
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            for (var j = 0; j < Model.QuoteItems.Count(); j++)
                                            {
                                                    <tr>
                                                        <td style="text-align:center">
                                                            @for (var i = 0; i < Model.LanguageServices.Count(); i++)
                                                        {
                                                            if (Model.QuoteItems.ElementAt(j).LanguageServiceId == Model.LanguageServices.ElementAt(i).Id)
                                                            {
                                                                    @Model.LanguageServices.ElementAt(i).Name
                                                            }
                                                        }
                                                        </td>

                                                        <td style="text-align:center">
                                                            @for (var i = 0; i < Model.Languages.Count(); i++)
                                                        {
                                                            if (Model.QuoteItems.ElementAt(j).SourceLanguageIanacode == Model.Languages.ElementAt(i).StringValue)
                                                            {
                                                                    @Model.Languages.ElementAt(i).Name
                                                            }
                                                        }
                                                        </td>

                                                        <td style="text-align:center">
                                                            @for (var i = 0; i < Model.Languages.Count(); i++)
                                                        {
                                                            if (Model.QuoteItems.ElementAt(j).TargetLanguageIanacode == Model.Languages.ElementAt(i).StringValue)
                                                            {
                                                                    @Model.Languages.ElementAt(i).Name
                                                            }
                                                        }
                                                        </td>

                                                        @*<td style="text-align:center">
                                            @{var rowid = j + "$" + Model.EnquiryQuoteItems.ElementAt(j).Id.ToString();
                                            var row = "row" + j;
                                            <img id=@row src="/img/close.png" title="Remove" alt="Remove" onclick="removeexistingRow('@rowid')" />
                                            }
                                            </td>*@
                                                    </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-lg-6">
        <div class="panel" data-panel-fullscreen="false" data-panel-close="false">
            <div class="panel-hdr">
                <i class="fal fa-info fa-2x color-black"></i> &nbsp; &nbsp;
                <h2>
                    General information
                </h2>
                <div class="panel-toolbar">
                    <button class="btn btn-panel" data-action="panel-collapse" data-toggle="tooltip" data-offset="0,10" data-original-title="Collapse/Expand"></button>
                </div>
            </div>
            <div class="panel-container expanded">
                <div class="panel-content p-0">
                    <div class="d-flex flex-column">
                        @*<div class="bg-subtlelight-fade custom-scroll" style="height: fit-content">*@
                        <div class="h-100" style="width:100%">
                            <div class="d-flex flex-row px-3 pt-3 pb-2">
                                <table width="100%">
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Quote created on:</label>&nbsp;
                                        </td>
                                        <td>
                                            <input type="text" readonly="readonly" id="SetUpDateinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.CreatedDateTime.ToString("dddd dd MMMM yyyy HH:mm")">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Quote set up by:</label>&nbsp;
                                        </td>
                                        <td>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <div class="d-inline-block align-middle status status-success mr-3">
                                                            @{
                                                                var profileImage = ViewBag.SetUpByEmployeeImageBase64 != null ? ViewBag.SetUpByEmployeeImageBase64 : "/img/demo/avatars/" + (Settings.Theme.Avatar);
                                                            }
                                                            <span class="profile-image rounded-circle d-block" style="background-image:url('@(profileImage)'); background-size: cover;"></span>
                                                        </div>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.SetUpByEmployee)</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Quote last modified:</label>&nbsp;
                                        </td>
                                        <td>
                                            @*<input type="text" readonly="readonly" id="LastModifiedDateinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.LastModifiedDate">*@
                                            <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.LastModifiedDate)</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="form-label" for="simpleinput">Quote last modified by:</label>&nbsp;
                                        </td>
                                        <td>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <div class="d-inline-block align-middle status status-success mr-3">
                                                            @{
                                                                var profileImageBase64 = ViewBag.LastModifiedByEmployeeImageBase64 != null ? ViewBag.LastModifiedByEmployeeImageBase64 : "/img/demo/avatars/" + (Settings.Theme.Avatar);
                                                            }
                                                            <span class="profile-image rounded-circle d-block" style="background-image:url('@(profileImageBase64)'); background-size: cover;"></span>
                                                        </div>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput">@Html.Raw(ViewBag.LastModifiedByEmployee)</label>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="panel-8" class="panel panel-locked" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-color="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
            <div class="panel-hdr">
                <h2>
                    Quote details
                </h2>
            </div>
            <div class="panel-container expanded">
                <div class="panel-content">
                    <div class="container">
                        <form>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="current-version-checkbox">Is current version:</label>
                                        <div class="custom-control custom-switch">
                                            @{
                                                var currentversionischecked = "";
                                                if (@Model.IsCurrentVersion == true)
                                                {
                                                    currentversionischecked = "checked";
                                                }
                                            }

                                            <input type="checkbox" class="custom-control-input" id="current-version-checkbox" name="current-version-checkbox" @currentversionischecked>&nbsp;
                                            <label id="currentversionlabel" class="custom-control-label" for="current-version-checkbox">Current version</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label class="form-label">Client currency:</label>
                                            <br />
                                            <select id="currencyinput" class="select2 form-control w200" placeholder="">
                                                @foreach (var currency in Model.Currencies)
                                                {
                                                    @if (Model.QuoteCurrencyId == currency.Id)
                                                    {
                                                        <option value="@currency.Id" selected="selected">@currency.Name (@currency.StringValue)</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@currency.Id">@currency.Name (@currency.StringValue)</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Language:</label>
                                            <br />

                                            <select id="languageinput" class="select2 form-control w200" placeholder="">
                                                @for (var i = 0; i < Model.Languages.Where(o => o.StringValue == "en" || o.StringValue == "de" || o.StringValue == "sv" || o.StringValue == "da").OrderBy(o => o.Name).ToList().Count(); i++)
                                                {
                                                    @if (Model.LangIanacode == @Model.Languages.Where(o => o.StringValue == "en" || o.StringValue == "de" || o.StringValue == "sv" || o.StringValue == "da").OrderBy(o => o.Name).ElementAt(i).StringValue)
                                                    {
                                                        <option value="@Model.Languages.Where(o=>o.StringValue == "en" || o.StringValue == "de" || o.StringValue=="sv" || o.StringValue == "da").OrderBy(o => o.Name).ElementAt(i).StringValue" selected="selected">@Model.Languages.Where(o=>o.StringValue == "en" || o.StringValue == "de" || o.StringValue=="sv" || o.StringValue == "da").OrderBy(o => o.Name).ElementAt(i).Name</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@Model.Languages.Where(o=>o.StringValue == "en" || o.StringValue == "de" || o.StringValue=="sv" || o.StringValue == "da").OrderBy(o => o.Name).ElementAt(i).StringValue">@Model.Languages.Where(o=>o.StringValue == "en" || o.StringValue == "de" || o.StringValue=="sv" || o.StringValue == "da").OrderBy(o => o.Name).ElementAt(i).Name</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="quotetitleinput">Quote title/file name(s):</label><br />
                                        <textarea class="form-control" id="quotetitleinput" placeholder="" rows="5">@Html.Raw(Model.Title.Replace("#", Environment.NewLine))</textarea>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="quotefilenameinput">Quote file name:</label><br />
                                        <input type="text" class="form-control" id="quotefilenameinput" placeholder="" value="@Model.QuoteFileName" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="internal-notes-textarea">Internal Notes:</label><br />(These notes will not be visible to the client, including on invoices.)
                                        <textarea class="form-control" id="internal-notes-textarea" placeholder="Notes or additional information" rows="5">@Model.InternalNotes</textarea>
                                    </div>
                                </div>
                            </div>
                            <br /><br />
                            @*<div class="row">
                            <div class="col-md-12">
                            <div class="form-group">
                            <label class="form-label" for="contactnameinput">Contact name:</label><br />
                            <input type="text" class="form-control" id="contactnameinput" placeholder="" value="@Model.ContactName" />
                            </div>
                            </div>
                            </div>
                            <br /><br />*@
                            @if (Model.EditPageEnabled)
                            {
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:6px">
                                    <button id="updatequoteinfobutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatequoteinformation(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                </div>
                            }
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6">
        <div id="panel-8" class="panel panel-locked" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-color="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
            <div class="panel-hdr">
                <h2>
                    Quote options
                </h2>
            </div>
            <div class="panel-container expanded">
                <div class="panel-content">
                    <div class="container">
                        <form>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label class="form-label">Turnaround time:</label>
                                            <input type="text" class="form-control" id="timelinevalueinput" value="@Model.TimelineValue" /><br />
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">&nbsp;</label>
                                            <select id="timelineunitinput" class="select2 form-control w200" placeholder="">
                                                @if (Model.TimelineUnit == 1)
                                                {
                                                    <option value="1" selected="selected">Working days</option>
                                                    <option value="2">Working weeks</option>
                                                }
                                                else
                                                {
                                                    <option value="1">Working days</option>
                                                    <option value="2" selected="selected">Working weeks</option>
                                                }
                                            </select>
                                        </div>
                                        <br />
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Word counts:</label>
                                        <br />
                                        <select id="wordcountsinput" class="select2 form-control w200" placeholder="">
                                            @{
#nullable enable
                                                string? DoNotShow = Model.WordCountPresentationOption == 0 ? "selected" : null;
                                                string? ShowTotalsOnly = Model.WordCountPresentationOption == 1 ? "selected" : null;
                                                string? ShowStandard = Model.WordCountPresentationOption == 2 ? "selected" : null;
                                                string? ShowPerfect = Model.WordCountPresentationOption == 3 ? "selected" : null;
                                            }

                                            <option value="0" selected="@DoNotShow">Do not show</option>
                                            <option value="1" selected="@ShowTotalsOnly">Show totals only</option>
                                            <option value="2" selected="@ShowStandard">Show standard memory categories</option>
                                            <option value="3" selected="@ShowPerfect">Show standard categories and perfect matches</option>

                                        </select>
                                        <br />
                                    </div>
                                </div>
                            </div>
                            <br />


                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Show on quote:</label>
                                        <br />

                                        <div class="custom-control custom-switch">
                                            @{
                                                var ShowInterpretingDurationInBreakdownischecked = "";
                                                if (@Model.ShowInterpretingDurationInBreakdown == true)
                                                {
                                                    ShowInterpretingDurationInBreakdownischecked = "checked";
                                                }
                                            }
                                            <input type="checkbox" class="custom-control-input" id="ShowInterpretingDurationinput" @ShowInterpretingDurationInBreakdownischecked>
                                            <label class="custom-control-label" for="ShowInterpretingDurationinput">Interpreting duration</label><br />
                                        </div>
                                        <div class="custom-control custom-switch">
                                            @{
                                                var ShowWorkDurationInBreakdownischecked = "";
                                                if (@Model.ShowWorkDurationInBreakdown == true)
                                                {
                                                    ShowWorkDurationInBreakdownischecked = "checked";
                                                }
                                            }
                                            <input type="checkbox" class="custom-control-input" id="ShowWorkDurationinput" @ShowWorkDurationInBreakdownischecked>
                                            <label class="custom-control-label" for="ShowWorkDurationinput">Work hours (e.g. for testing/proofreading)</label><br />
                                        </div>
                                        <div class="custom-control custom-switch">
                                            @{
                                                var ShowPagesOrSlidesInBreakdownischecked = "";
                                                if (@Model.ShowPagesOrSlidesInBreakdown == true)
                                                {
                                                    ShowPagesOrSlidesInBreakdownischecked = "checked";
                                                }
                                            }
                                            <input type="checkbox" class="custom-control-input" id="ShowPagesOrSlidesinput" @ShowPagesOrSlidesInBreakdownischecked>
                                            <label class="custom-control-label" for="ShowPagesOrSlidesinput">Pages/slides (e.g. for DTP/PowerPoint)</label><br />
                                        </div>
                                        <div class="custom-control custom-switch">
                                            @{
                                                var ShowNumberOfCharactersInBreakdownischecked = "";
                                                if (@Model.ShowNumberOfCharactersInBreakdown == true)
                                                {
                                                    ShowNumberOfCharactersInBreakdownischecked = "checked";
                                                }
                                            }
                                            <input type="checkbox" class="custom-control-input" id="ShowNumberOfCharactersinput" @ShowNumberOfCharactersInBreakdownischecked>
                                            <label class="custom-control-label" for="ShowNumberOfCharactersinput">Characters</label><br />
                                        </div>
                                        <div class="custom-control custom-switch">
                                            @{
                                                var ShowNumberOfDocumentsInBreakdownischecked = "";
                                                if (@Model.ShowNumberOfDocumentsInBreakdown == true)
                                                {
                                                    ShowNumberOfDocumentsInBreakdownischecked = "checked";
                                                }
                                            }
                                            <input type="checkbox" class="custom-control-input" id="ShowNumberOfDocumentsinput" @ShowNumberOfDocumentsInBreakdownischecked>
                                            <label class="custom-control-label" for="ShowNumberOfDocumentsinput">Documents</label><br />
                                        </div>
                                        <br />
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="ponumberinput">Salutation name:</label><br />
                                        <input type="text" class="form-control" id="salutationnameinput" placeholder="" value="@Model.AddresseeSalutationName" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label" for="ponumberinput">The client's PO number:</label><br />
                                        <input type="text" class="form-control" id="ponumberinput" placeholder="" value="@Model.ClientPonumber" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-10">
                                            <label class="form-label" for="CustomerSpecificField1Valueinput">@ViewBag.CustomerSpecificData1:</label><br />
                                            <input type="text" class="form-control" id="CustomerSpecificField1Valueinput" placeholder="" value="@Model.CustomerSpecificField1Value" />&nbsp;
                                        </div>
                                        <div class="col-md-2 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            @{
                                                var ShowCustomerSpecificField1Valueischecked = "";
                                                if (@Model.ShowCustomerSpecificField1Value == true)
                                                {
                                                    ShowCustomerSpecificField1Valueischecked = "checked";
                                                }
                                            }
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="ShowCustomerSpecificField1input" @ShowCustomerSpecificField1Valueischecked>
                                                <label class="custom-control-label" for="ShowCustomerSpecificField1input">Show?</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-10">
                                            <label class="form-label" for="CustomerSpecificField2Valueinput">@ViewBag.CustomerSpecificData2:</label><br />
                                            <input type="text" class="form-control" id="CustomerSpecificField2Valueinput" placeholder="" value="@Model.CustomerSpecificField2Value" />&nbsp;
                                        </div>
                                        <div class="col-md-2 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            @{
                                                var ShowCustomerSpecificField2Valueischecked = "";
                                                if (@Model.ShowCustomerSpecificField2Value == true)
                                                {
                                                    ShowCustomerSpecificField2Valueischecked = "checked";
                                                }
                                            }
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="ShowCustomerSpecificField2input" @ShowCustomerSpecificField2Valueischecked>
                                                <label class="custom-control-label" for="ShowCustomerSpecificField2input">Show?</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-10">
                                            <label class="form-label" for="CustomerSpecificField3Valueinput">@ViewBag.CustomerSpecificData3:</label><br />
                                            <input type="text" class="form-control" id="CustomerSpecificField3Valueinput" placeholder="" value="@Model.CustomerSpecificField3Value" />&nbsp;
                                        </div>
                                        <div class="col-md-2 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            @{
                                                var ShowCustomerSpecificField3Valueischecked = "";
                                                if (@Model.ShowCustomerSpecificField3Value == true)
                                                {
                                                    ShowCustomerSpecificField3Valueischecked = "checked";
                                                }
                                            }
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="ShowCustomerSpecificField3input" @ShowCustomerSpecificField3Valueischecked>
                                                <label class="custom-control-label" for="ShowCustomerSpecificField3input">Show?</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-10">
                                            <label class="form-label" for="CustomerSpecificField4Valueinput">@ViewBag.CustomerSpecificData4:</label><br />
                                            <input type="text" class="form-control" id="CustomerSpecificField4Valueinput" placeholder="" value="@Model.CustomerSpecificField4Value" />&nbsp;
                                        </div>
                                        <div class="col-md-2 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            @{
                                                var ShowCustomerSpecificField4Valueischecked = "";
                                                if (@Model.ShowCustomerSpecificField4Value == true)
                                                {
                                                    ShowCustomerSpecificField4Valueischecked = "checked";
                                                }
                                            }
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="ShowCustomerSpecificField4input" @ShowCustomerSpecificField4Valueischecked>
                                                <label class="custom-control-label" for="ShowCustomerSpecificField4input">Show?</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label class="form-label" for="simpleinput">Surcharge value:</label>
                                            @if (true)
                                            {
                                                <a id="surcharge-btn" href="#" data-toggle="modal" data-target="#surchargePopup" class="btn">
                                                    <i class="ni ni-settings"></i>
                                                </a>
                                            }
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput" id="surcharge-value-label">@Html.Raw(ViewBag.SurchargeValue)</label>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label class="form-label" for="simpleinput">Discount value:</label>&nbsp;&nbsp;
                                            @if (true)
                                            {
                                                <a id="discount-btn" href="#" data-toggle="modal" data-target="#discountPopup" class="btn">
                                                    <i class="ni ni-settings"></i>
                                                </a>
                                            }
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-center align-items-center">
                                            <label class="form-label">&nbsp;</label>
                                            <label class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" for="simpleinput" id="discount-value-label">@Html.Raw(ViewBag.DiscountValue)</label>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br /><br />
                            @if (Model.EditPageEnabled)
                            {
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:5px">
                                    <button id="updatequoteoptionsbutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatequoteoptions(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                </div>
                            }
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-sm-12">
        <div id="panel-8" class="panel panel-locked" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-color="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
            <div class="panel-hdr">
                <h2>
                    Quote action centre
                </h2>
            </div>
            <div class="panel-hdr">
                <div class="panel-toolbar pr-3 align-self-end">
                    <ul id="demo_panel-tabs" class="nav nav-tabs border-bottom-0 nav-tabs-clean" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#tab_default-1" role="tab"><i class="fal fa-cogs fa-1x"></i>&nbsp;Automation</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab_default-2" role="tab"><i class="fal fa-ballot-check fa-1x"></i>&nbsp;Quote management</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="tab-content p-3">
                <div class="tab-pane fade show active" id="tab_default-1" role="tabpanel">
                    <div class="row justify-content-center">
                        @{
                            var generatePDFEnabled = ""; if (Model.EditPageEnabled == true) { generatePDFEnabled = "generatequotepdf(" + @Model.Id + ");"; }
                        }
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a id="create-ncc-btn" href="#" data-toggle="modal" class="btn" onclick="@generatePDFEnabled">
                                    <div class="rounded-top w-100 bg-info-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class='icon-stack fa-6x'>
                                                <i class="base base-4 icon-stack-3x opacity-100 color-info-300"></i>
                                                <i class="base base-4 icon-stack-2x opacity-100 color-info-100"></i>
                                                <i class="fal fa-list-alt icon-stack-1x opacity-100 color-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Generate PDF Quote</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        @*<div class="col-md col-lg-2 justify-content-center align-items-center">
                        <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                        <a id="create-ncc-btn" href="#" data-toggle="modal" data-target="#createStudioTaskPopup" class="btn">
                        <div class="rounded-top w-100 bg-success-50">
                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                        <div class="icon-stack fa-6x">
                        <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                        <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                        <i class="fal fa-list icon-stack-1x text-white"></i>
                        </div>
                        </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                        <span class="d-block text-truncate text-muted">Trados Studio automation</span>
                        </div>
                        </a>
                        </div>
                        </div>*@
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            @{
                                var importWordCountsEnabled = ""; if (Model.EditPageEnabled == true) { importWordCountsEnabled = "#importQuoteWordCounts"; }
                            }
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                @*<a href="http://myplus/Quote.aspx?QuoteID=@Model.Id" class="btn">*@
                                <a class="btn btn-icon align-middle" id="select-div" href="#" data-toggle="modal"
                                   data-target="@importWordCountsEnabled" style="display:contents;">
                                    <div class="rounded-top w-100 bg-warning-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class='icon-stack fa-6x'>
                                                <i class="base base-3 icon-stack-3x opacity-100 color-warning-600"></i>
                                                <i class="base base-3 icon-stack-2x opacity-100 color-warning-300"></i>
                                                <i class="fal fa-file-word icon-stack-1x opacity-100 color-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Import word counts</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="http://myplus/CalculateQuoteCosts.aspx?QuoteID=@Model.Id" target="_blank" class="btn">
                                    <div class="rounded-top w-100 bg-success-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class="icon-stack fa-6x">
                                                <i class="base base-7 icon-stack-3x opacity-100 color-success-900"></i>
                                                <i class="base base-7 icon-stack-2x opacity-100 color-success-500"></i>
                                                <i class="fal fa-calculator color-primary-500 icon-stack-1x text-white"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Calculate cost</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab_default-2" role="tabpanel">
                    <div class="row justify-content-center">
                        @*<div class="col-md col-lg-2 justify-content-center align-items-center">
                        <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                        <a href="https://myplusbeta.publicisgroupe.net/Quote/Index?id=@Model.Id" class="btn">
                        <div class="rounded-top w-100 bg-danger-50">
                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                        <span class="icon-stack fa-6x">
                        <i class="base-2 icon-stack-3x color-danger-600"></i>
                        <i class="base-3 icon-stack-2x color-danger-700"></i>
                        <i class="fal fa-trash-alt icon-stack-1x text-white"></i>
                        </span>
                        </div>
                        </div>
                        <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                        <span class="d-block text-truncate text-muted">Delete this quote</span>
                        </div>
                        </a>
                        </div>
                        </div>*@
                        <div class="col-md col-lg-2 justify-content-center align-items-center">
                            <div class="rounded bg-white p-0 m-0 d-flex flex-column w-100 h-100">
                                <a href="https://myplus.publicisgroupe.net/AutoQuoting.aspx?EnquiryID=@Model.EnquiryId" class="btn">
                                    <div class="rounded-top w-100 bg-info-50">
                                        <div class="rounded-top d-flex align-items-center justify-content-center w-100 pt-3 pb-3 pr-2 pl-2 hover-bg">
                                            <div class='icon-stack fa-6x'>
                                                <i class="base base-4 icon-stack-3x opacity-100 color-info-300"></i>
                                                <i class="base base-4 icon-stack-2x opacity-100 color-info-100"></i>
                                                <i class="fal fa-file-plus icon-stack-1x text-white"></i>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-bottom p-1 w-100 d-flex justify-content-center align-items-center text-center">
                                        <span class="d-block text-truncate text-muted">Create a quote automatically</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <hr />
        <div id="quotepanel" class="panel panel-locked" data-panel-lock="false" data-panel-close="false" data-panel-fullscreen="false" data-panel-collapsed="false" data-panel-color="false" data-panel-locked="false" data-panel-refresh="false" data-panel-reset="false">
            <div class="panel-hdr">
                <h2>
                    Quote
                </h2>
            </div>
            <div class="panel-container expanded">
                <div class="panel-content">
                    <div class="container">
                        <form>
                            <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:5px">
                                @*@{var dateformat = "D";
                                if (Model.LangIanacode == "en")
                                {
                                dateformat = "dddd d MMMM yyyy";
                                }
                                <input type="text" class="rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" id="quotedate-input" value="@Model.QuoteDate.ToString(dateformat, System.Globalization.CultureInfo.GetCultureInfo(Model.LangIanacode))">*@
                                <input type="date" class="rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 px-0 bg-transparent" id="quotedate-input" value="@Model.QuoteDate.ToString("yyyy-MM-dd")">
                                @*}*@
                            </div>
                            <div class="form-group-row d-flex" style="padding-bottom:5px">
                                <table width="350px">
                                    <tr>
                                        <td>
                                            <input type="text" id="ContactNameinput" readonly asp-for="ContactName" placeholder="Address1" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.ContactName">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="OrgNameinput" asp-for="QuoteOrgName" placeholder="Address1" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteOrgName">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="Address1input" asp-for="QuoteAddress1" placeholder="Address1" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteAddress1">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="Address2input" asp-for="QuoteAddress2" placeholder="Address2" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteAddress2">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="Address3input" asp-for="QuoteAddress3" placeholder="Address3" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteAddress3">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="Address4input" asp-for="QuoteAddress4" placeholder="Address4" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteAddress4">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="AddressCountyOrStateinput" asp-for="QuoteCountyOrState" placeholder="CountyOrState" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuoteCountyOrState">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="AddressPostcodeOrZipinput" asp-for="QuotePostcodeOrZip" placeholder="postcodeOrZip" class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.QuotePostcodeOrZip">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="countriesinput" class="select2 form-control w200" placeholder="">
                                                @foreach (var country in Model.Countries)
                                                {
                                                    @if (Model.QuoteCountryId == country.Id)
                                                    {
                                                        <option value="@country.Id" selected="selected">@country.CountryName</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@country.Id">@country.CountryName</option>
                                                    }
                                                }
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-lg-12 text-center">
                                <table width="100%">
                                    <tr>
                                        <td>
                                            @*<input type="text" style="text-decoration: none !important; color: #BA9765; width:800px; align-items:center" class="form-control-lg rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent text-center" id="quotetitle-input" value="@Html.Raw(Model.Title.Replace("#", Environment.NewLine))">*@
                                            <label type="text" style="text-decoration: none !important; color: #BA9765; width:800px; align-items:center" class="form-control-lg rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent text-center" id="quotetitle-input">@Html.Raw(Model.Title.ToString().Replace("#", "<br/>"))</label>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <br />
                            <div class="col-lg-12 text-center">
                                <textarea class="tinymce" id="openingsectiontext" placeholder="Notes or additional information" rows="5">@Model.OpeningSectionText</textarea>
                            </div>
                            <br /><br />
                            <div class="col-lg-12">
                                <div id="panel-6" class="panel" data-panel-fullscreen="false" data-panel-close="false">
                                    <div class="panel-hdr">
                                        <h2>
                                            Quote items
                                            @if (Model.DeletedDateTime == null && Model.EditPageEnabled)
                                            {
                                                <a id="create-quoteitem-btn" href="#" data-toggle="modal" data-target="#createQuoteItemPopup" class="btn p-1"><i class="fad fa-plus-circle d-flex align-items-center" style="--fa-primary-color: white; --fa-secondary-color: green; font-size: 18px;"></i></a>
                                            }
                                        </h2>
                                    </div>
                                    <div class="panel-container show">
                                        <div class="panel-content p-0">
                                            <div class="d-flex flex-column">
                                                <div class="custom-scroll" style="height: fit-content; width: 100%">
                                                    <div class="w-100" style="width:100%">
                                                        @*<form method="post">*@
                                                        <div class="px-3 pt-3 pb-2" width="100%">
                                                            <div width="100%">
                                                                @if (Model.QuoteItems != null)
                                                                {
                                                                    <div class="table-responsive">
                                                                        <table id="EditQuoteItemsTable" class="table-sm table table-bordered table-hover table-striped" style="width:100%;">
                                                                            <thead class="bg-warning-200" style="background-color: #e84133; color:white">
                                                                                <tr style="text-align: center;">
                                                                                    <th>
                                                                                        <b>ID</b>
                                                                                    </th>
                                                                                    <th>
                                                                                        <b>Service</b>
                                                                                    </th>
                                                                                    <th>
                                                                                        <b>Source language</b>
                                                                                    </th>
                                                                                    <th>
                                                                                        <b>Target language</b>
                                                                                    </th>
                                                                                    @{
                                                                                        if (Model.WordCountPresentationOption > 1)
                                                                                        {
                                                                                                <th style="white-space: nowrap;">
                                                                                                    &nbsp;<b>New words</b>&nbsp;
                                                                                                </th>

                                                                                                <th>
                                                                                                    <b>@ViewBag.FuzzyBand1Title</b>
                                                                                                </th>

                                                                                            if (ViewBag.FuzzyBand2Title != null)
                                                                                            {
                                                                                                    <th>
                                                                                                        <b>@ViewBag.FuzzyBand2Title</b>
                                                                                                    </th>
                                                                                            }
                                                                                            if (ViewBag.FuzzyBand3Title != null)
                                                                                            {
                                                                                                    <th>
                                                                                                        <b>@ViewBag.FuzzyBand3Title</b>
                                                                                                    </th>
                                                                                            }
                                                                                            if (ViewBag.FuzzyBand4Title != null)
                                                                                            {
                                                                                                    <th>
                                                                                                        <b>@ViewBag.FuzzyBand4Title</b>
                                                                                                    </th>
                                                                                            }

                                                                                                <th style="white-space: nowrap;">
                                                                                                    <b>Exact words</b>
                                                                                                </th>
                                                                                                <th>
                                                                                                    <b>Repetition words</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.WordCountPresentationOption == 3)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>match plus™ words</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.WordCountPresentationOption > 0)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>Total words</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.ShowInterpretingDurationInBreakdown)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>Duration</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.ShowWorkDurationInBreakdown)
                                                                                        {
                                                                                                <th>
                                                                                                    &nbsp;&nbsp;&nbsp;&nbsp;<b>Time</b>&nbsp;&nbsp;&nbsp;&nbsp;
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>Pages/slides</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>Characters</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    @{
                                                                                        if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                        {
                                                                                                <th>
                                                                                                    <b>Documents</b>
                                                                                                </th>
                                                                                        }
                                                                                    }
                                                                                    <th>
                                                                                        &nbsp;&nbsp;&nbsp;&nbsp;<b>Cost</b>&nbsp;&nbsp;&nbsp;&nbsp;
                                                                                    </th>
                                                                                    @if (Model.EditPageEnabled)
                                                                                    {
                                                                                        <th>
                                                                                            &nbsp;&nbsp;<b>Actions</b>&nbsp;&nbsp;
                                                                                        </th>
                                                                                    }
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @{
                                                                                    var rowindex = 0;
                                                                                }
                                                                                @foreach (var row in Model.QuoteItems)
                                                                                {
                                                                                    @*@rowindex += 1;*@

                                                                                    <tr>
                                                                                        <td>
                                                                                            @{
                                                                                                var modalname = "QuoteItemPopup" + row.Id;
                                                                                            }
                                                                                            <label class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent"><a id="create-ncc-btn" href="#" data-toggle="modal" data-target="#@modalname">@row.Id</a></label>

                                                                                            <div class="panel-container show">
                                                                                                <div class="modal" id="@modalname" name="QuoteItemPopupModal" role="form" data-backdrop="static">
                                                                                                    <div class="modal-dialog modal-xl" role="form" style="max-width: 1500px; width: 90%;">
                                                                                                        <div class="modal-content border-0 shadow-3">
                                                                                                            <div class="modal-header">
                                                                                                                <h5 class="modal-title" id="quoteitemsHeader">
                                                                                                                    <strong><label id="modal_header1">Quote Item ID: @row.Id</label> </strong>
                                                                                                                </h5>
                                                                                                                <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                                                                                                                    <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                                                                                                                </button>
                                                                                                            </div>
                                                                                                            <div class="modal-body" data-backdrop="false" style="padding-left: 50px;padding-right: 50px;">
                                                                                                                <div class="row">
                                                                                                                    <div class="col-sm-6" style="padding-right:40px;">
                                                                                                                        @*<form>*@
                                                                                                                        <div class="row">
                                                                                                                            <div class="col-md-12">
                                                                                                                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Language&nbsp;service&nbsp;category</label>
                                                                                                                                <select name="language-service-category-input" id="@row.Id$language-service-category-input" class="select2 form-control" onchange="onServiceCategorySelect(this,@row.Id);">
                                                                                                                                    <option value="">Select</option>
                                                                                                                                    @{
                                                                                                                                        var languageServiceCategoryID = Model.LanguageServices.Where(o => o.Id == row.LanguageServiceId).Select(o => o.LanguageServiceCategoryID).FirstOrDefault(); if (languageServiceCategoryID.Contains(",")) { languageServiceCategoryID = languageServiceCategoryID.Split(",")[0]; }
                                                                                                                                    }
                                                                                                                                    @for (var i = 0; i < Model.LanguageServiceCategory.Count(); i++)
                                                                                                                                    {
                                                                                                                                        if (row.LanguageServiceCategoryId > 0)
                                                                                                                                        {
                                                                                                                                            if (@Model.LanguageServiceCategory.ElementAt(i).Id == row.LanguageServiceCategoryId)
                                                                                                                                            {
                                                                                                                                                <option value="@Model.LanguageServiceCategory.ElementAt(i).Id" selected>@Model.LanguageServiceCategory.ElementAt(i).Name</option>
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                <option value="@Model.LanguageServiceCategory.ElementAt(i).Id">@Model.LanguageServiceCategory.ElementAt(i).Name</option>
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (@Model.LanguageServiceCategory.ElementAt(i).Id == Convert.ToInt32(languageServiceCategoryID))
                                                                                                                                            {
                                                                                                                                                <option value="@Model.LanguageServiceCategory.ElementAt(i).Id" selected>@Model.LanguageServiceCategory.ElementAt(i).Name</option>
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                <option value="@Model.LanguageServiceCategory.ElementAt(i).Id">@Model.LanguageServiceCategory.ElementAt(i).Name</option>
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                </select>
                                                                                                                                <label class="text-danger" id="@row.Id$language-service-category-input-mandatory" hidden>&nbsp;Please select category</label>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <br />
                                                                                                                        <div class="row">
                                                                                                                            <div class="col-md-12">
                                                                                                                                <label class="form-label col-sm-2 d-flex align-items-center px-0">Language&nbsp;service</label>
                                                                                                                                <select name="language-service-input" id="@row.Id$language-service-input" class="select2 form-control">
                                                                                                                                    <option value="">Select</option>
                                                                                                                                    @for (var i = 0; i < Model.LanguageServices.Count(); i++)
                                                                                                                                    {
                                                                                                                                        if (@Model.LanguageServices.ElementAt(i).Id == row.LanguageServiceId)
                                                                                                                                        {
                                                                                                                                            <option value="@Model.LanguageServices.ElementAt(i).Id" selected>@Model.LanguageServices.ElementAt(i).Name</option>
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            <option value="@Model.LanguageServices.ElementAt(i).Id">@Model.LanguageServices.ElementAt(i).Name</option>
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                </select>
                                                                                                                                <label class="text-danger" id="@row.Id$language-service-input-mandatory" hidden>&nbsp;Please select language service</label>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <br />
                                                                                                                        <table width="100%" border="0">
                                                                                                                            <tr>
                                                                                                                                <td width="50%">
                                                                                                                                    <div class="row">
                                                                                                                                        <div class="col-md-12">
                                                                                                                                            <label class="form-label col-sm-2 d-flex align-items-center px-0">Source&nbsp;language</label>
                                                                                                                                            <select name="source-language-input" class="select2 form-control w200" id="@row.Id$source-language-input">
                                                                                                                                                <option value="">Select</option>
                                                                                                                                                @for (var i = 0; i < Model.Languages.Count(); i++)
                                                                                                                                                {
                                                                                                                                                    if (@Model.Languages.ElementAt(i).StringValue == row.SourceLanguageIanacode)
                                                                                                                                                    {
                                                                                                                                                        <option value="@Model.Languages.ElementAt(i).StringValue" selected>@Model.Languages.ElementAt(i).Name</option>
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        <option value="@Model.Languages.ElementAt(i).StringValue">@Model.Languages.ElementAt(i).Name</option>
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            </select>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td width="50%">
                                                                                                                                    <div class="row">
                                                                                                                                        <div class="col-md-12">
                                                                                                                                            <label class="form-label col-sm-2 d-flex align-items-center px-0">Target&nbsp;language(s)</label>
                                                                                                                                            <select name="target-language-input" class="select2 form-control w200" id="@row.Id$target-language-input">
                                                                                                                                                @for (var i = 0; i < Model.Languages.Count(); i++)
                                                                                                                                                {
                                                                                                                                                    if (@Model.Languages.ElementAt(i).StringValue == row.TargetLanguageIanacode)
                                                                                                                                                    {
                                                                                                                                                        <option value="@Model.Languages.ElementAt(i).StringValue" selected>@Model.Languages.ElementAt(i).Name</option>
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        <option value="@Model.Languages.ElementAt(i).StringValue">@Model.Languages.ElementAt(i).Name</option>
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            </select>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        </table>


                                                                                                                        <br />
                                                                                                                        <div class="form-group row">
                                                                                                                            @{
                                                                                                                                var totalCount = row.WordCountNew.GetValueOrDefault() + row.WordCountExact.GetValueOrDefault() + row.WordCountRepetitions.GetValueOrDefault() + row.WordCountPerfectMatches.GetValueOrDefault() + row.WordCountFuzzyBand1.GetValueOrDefault() + row.WordCountFuzzyBand2.GetValueOrDefault() + row.WordCountFuzzyBand3.GetValueOrDefault() + row.WordCountFuzzyBand4.GetValueOrDefault();
                                                                                                                            }
                                                                                                                            <label class="form-label col-lg-3 d-flex align-items-center">Word counts</label>
                                                                                                                            <span class="help-block col-2 m-0 px-0 d-flex align-items-center">New</span>
                                                                                                                            <input type="number" id="@row.Id$wordcountnewinput" asp-for="@row.WordCountNew" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                            <span class="help-block col-lg-2 m-0 px-0 d-flex align-items-center">Exact</span>
                                                                                                                            <input type="number" id="@row.Id$wordcountexactinput" asp-for="@row.WordCountExact" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                            <span class="help-block col-lg-2 m-0 px-0 d-flex align-items-center">Repetitions</span>
                                                                                                                            <input type="number" id="@row.Id$wordcountrepetitionsinput" asp-for="@row.WordCountRepetitions" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                            <span class="help-block col-lg-2 m-0 px-0 d-flex align-items-center">Perfect matches</span>
                                                                                                                            <input type="number" id="@row.Id$wordcountperfectinput" asp-for="@row.WordCountPerfectMatches" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            <div class="col-5"></div>

                                                                                                                            @{
#nullable enable
                                                                                                                                string band1Label = "Band 1";
                                                                                                                                string? band1Disabled = null;
                                                                                                                                string band2Label = "Band 2";
                                                                                                                                string? band2Disabled = "disabled";
                                                                                                                                string band3Label = "Band 3";
                                                                                                                                string? band3Disabled = "disabled";
                                                                                                                                string band4Label = "Band 4";
                                                                                                                                string? band4Disabled = "disabled";

                                                                                                                                band1Disabled = null;
                                                                                                                                band1Label = String.Format("{0} ({1}%)", band1Label, ViewBag.FuzzyBand1Title);

                                                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                                                {
                                                                                                                                    band2Disabled = null;
                                                                                                                                    band2Label = String.Format("{0} ({1}%)", band2Label, ViewBag.FuzzyBand2Title);
                                                                                                                                }
                                                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                                                {
                                                                                                                                    band3Disabled = null;
                                                                                                                                    band3Label = String.Format("{0} ({1}%)", band3Label, ViewBag.FuzzyBand3Title);
                                                                                                                                }
                                                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                                                {
                                                                                                                                    band4Disabled = null;
                                                                                                                                    band4Label = String.Format("{0} ({1}%)", band4Label, ViewBag.FuzzyBand4Title);
                                                                                                                                }
                                                                                                                            }
                                                                                                                            @if (band1Disabled != "disabled")
                                                                                                                            {
                                                                                                                                <div class="px-4 col-lg-3 col-12 d-flex align-items-center"><label class="px-2">Fuzzy</label></div>
                                                                                                                                <span class="help-block col-2 m-0 px-0 d-flex align-items-center">@band1Label</span>
                                                                                                                                <input type="number" id="@row.Id$wordcountfuzzyband1input" asp-for="@row.WordCountFuzzyBand1" disabled="@band1Disabled" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            }
                                                                                                                            @if (band2Disabled != "disabled")
                                                                                                                            {
                                                                                                                                <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                                <span class="help-block col-2 m-0 px-0 d-flex align-items-center">@band2Label</span>
                                                                                                                                <input type="number" id="@row.Id$wordcountfuzzyband2input" asp-for="@row.WordCountFuzzyBand2" disabled="@band2Disabled" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            }
                                                                                                                            @if (band3Disabled != "disabled")
                                                                                                                            {
                                                                                                                                <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                                <span class="help-block col-2 m-0 px-0 d-flex align-items-center">@band3Label</span>
                                                                                                                                <input type="number" id="@row.Id$wordcountfuzzyband3input" asp-for="@row.WordCountFuzzyBand3" disabled="@band3Disabled" class="col-lg-3 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            }
                                                                                                                            @if (band4Disabled != "disabled")
                                                                                                                            {
                                                                                                                                <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                                <span class="help-block col-2 m-0 px-0 d-flex align-items-center">@band4Label</span>
                                                                                                                                <input type="number" id="@row.Id$wordcountfuzzyband4input" asp-for="@row.WordCountFuzzyBand4" disabled="@band4Disabled" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            }
                                                                                                                            <div class="col-5"></div> <div class="col-3"></div>
                                                                                                                            <div class="col-2 d-flex align-items-center px-0"><label class="form-label mt-3">Total</label></div>
                                                                                                                            <label class="form-label mt-3 col px-0" id="total-word-count">@totalCount</label>
                                                                                                                            @*<div class="col-3"></div>*@

                                                                                                                            <div class="col-3 d-flex align-items-center justify-content-center">
                                                                                                                                <label class="form-label">Charge to client</label>
                                                                                                                            </div>

                                                                                                                            <input type="number" id="@row.Id$chargetoclientinput" value="@row.ChargeToClient.GetValueOrDefault().ToString("F2")" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            <div class="col-11"></div>
                                                                                                                            <span class="help-block col-1 m-0 px-0">(@ViewBag.CurrencyName)</span>


                                                                                                                        </div>
                                                                                                                        <hr />
                                                                                                                        <div class="form-group row">
                                                                                                                            <div class="col-3 d-flex align-items-center justify-content-start">
                                                                                                                                <label class="form-label">Work time</label>
                                                                                                                            </div>
                                                                                                                            @{
                                                                                                                                int workhour = 0;
                                                                                                                                int workminute = 0;
                                                                                                                                if (row.WorkMinutes >= 60)
                                                                                                                                {
                                                                                                                                    workhour = (int)row.WorkMinutes / 60;

                                                                                                                                }
                                                                                                                                workminute = (int)row.WorkMinutes % 60;

                                                                                                                                    <input type="number" id="@row.Id$workhourinput" value="@workhour" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                    <div class="col-0"></div>
                                                                                                                                    <input type="number" id="@row.Id$workminuteinput" value="@workminute" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            }
                                                                                                                            <div class="col-6"></div>
                                                                                                                            <div class="col-3"></div>
                                                                                                                            <span class="help-block col-1 m-0 px-0">Hours</span>
                                                                                                                            <div class="col-0"></div>
                                                                                                                            <span class="help-block col-lg-1 m-0 px-0">Minutes</span>
                                                                                                                        </div>

                                                                                                                        <br />
                                                                                                                    </div>

                                                                                                                    <div class="col-sm-6">
                                                                                                                        <div class="form-group row">
                                                                                                                            @*<a href="javascript:void(0);" id="additional-details-link" class="form-label col d-flex align-items-center" onclick="additionalDetailsLink(@row.Id)">Show additional details...</a>*@
                                                                                                                            <a id="additional-details-link" class="form-label col d-flex align-items-center">Additional details...</a>
                                                                                                                        </div>
                                                                                                                        <div id="@row.Id$details" style="">
                                                                                                                            <div class="form-group row">
                                                                                                                                <label class="form-label col-lg-3 d-flex align-items-center justify-content-start">Pages/slides</label>
                                                                                                                                <input type="number" id="@row.Id$pagesinput" asp-for="@row.Pages" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />

                                                                                                                                <div class="col-lg-3 d-flex align-items-center justify-content-center"><label class="form-label">Characters</label></div>
                                                                                                                                <input type="number" id="@row.Id$charactersinput" asp-for="@row.Characters" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />

                                                                                                                                <div class="col-lg-3 d-flex align-items-center justify-content-center"><label class="form-label">Documents</label></div>
                                                                                                                                <input type="number" id="@row.Id$documentsinput" asp-for="@row.Documents" class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                            </div>
                                                                                                                            <hr />
                                                                                                                            <div class="form-group row">
                                                                                                                                <div class="col-lg-3 d-flex align-items-center justify-content-start">
                                                                                                                                    <label class="form-label">Interpreting duration</label>
                                                                                                                                </div>
                                                                                                                                @{
                                                                                                                                    int interpretinghour = 0;
                                                                                                                                    int interpretingminute = 0;
                                                                                                                                    if (row.InterpretingExpectedDurationMinutes >= 60)
                                                                                                                                    {
                                                                                                                                        interpretinghour = (int)row.InterpretingExpectedDurationMinutes / 60;

                                                                                                                                    }
                                                                                                                                    interpretingminute = (int)row.InterpretingExpectedDurationMinutes % 60;

                                                                                                                                        <input type="number" id="@row.Id$interpretinghourinput" value="@interpretinghour" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                        <div class="col-0"></div>
                                                                                                                                        <input type="number" id="@row.Id$interpretingminuteinput" value="@interpretingminute" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                }


                                                                                                                                <div class="col-3 d-flex align-items-center justify-content-center">
                                                                                                                                    <label class="form-label">Audio time</label>
                                                                                                                                </div>
                                                                                                                                @{
                                                                                                                                    int audiohour = 0;
                                                                                                                                    int audiominute = 0;
                                                                                                                                    if (row.AudioMinutes >= 60)
                                                                                                                                    {
                                                                                                                                        audiohour = (int)row.AudioMinutes / 60;

                                                                                                                                    }
                                                                                                                                    audiominute = (int)row.AudioMinutes % 60;

                                                                                                                                        <input type="number" id="@row.Id$audiohourinput" value="@audiohour" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                        <div class="col-0"></div>
                                                                                                                                        <input type="number" id="@row.Id$audiominuteinput" value="@audiominute" class="col-1 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                }


                                                                                                                                <div class="col-3"></div>
                                                                                                                                <span class="help-block col-1 m-0 px-0">Hours</span>
                                                                                                                                <div class="col-0"></div>
                                                                                                                                <span class="help-block col-lg-1 m-0 px-0">Minutes</span>
                                                                                                                                <div class="col-3"></div>
                                                                                                                                <span class="help-block col-1 m-0 px-0">Hours</span>
                                                                                                                                <div class="col-0"></div>
                                                                                                                                <span class="help-block col-lg-1 m-0 px-0">Minutes</span>
                                                                                                                            </div>



                                                                                                                            <hr />
                                                                                                                            <div class="form-group row mt-4">
                                                                                                                                <label class="form-label col-12 d-flex align-items-center">Interpreting assignment location</label>
                                                                                                                                <label class="px-4 col-3 d-flex align-items-center">Organisation name</label>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationOrgNameinput" asp-for="@row.InterpretingLocationOrgName" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <label class="px-4 col-3 d-flex align-items-center">Address</label>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationAddress1input" asp-for="@row.InterpretingLocationAddress1" class="col-lg-4 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <div class="col-1"></div>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationAddress2input" asp-for="@row.InterpretingLocationAddress2" class="col-lg-4 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <div class="col-3"></div>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationAddress3input" asp-for="@row.InterpretingLocationAddress3" class="col-lg-4 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <div class="col-1"></div>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationAddress4input" asp-for="@row.InterpretingLocationAddress4" class="col-lg-4 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <label class="px-4 col-3 d-flex align-items-center">County/state</label>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationCountyOrStateinput" asp-for="@row.InterpretingLocationCountyOrState" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <label class="px-4 col-3 d-flex align-items-center">Postcode/zip</label>
                                                                                                                                <input type="text" id="@row.Id$InterpretingLocationPostcodeOrZipinput" asp-for="@row.InterpretingLocationPostcodeOrZip" class="col-lg-9 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" />
                                                                                                                                <label class="px-4 col-3 d-flex align-items-center">Country</label>
                                                                                                                                <select id="@row.Id$interpretingLocationCountryIdinput" class="select2 col-lg-3 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">
                                                                                                                                    <option></option>
                                                                                                                                    @foreach (var country in Model.Countries)
                                                                                                                                    {
                                                                                                                                        @if (row.InterpretingLocationCountryId == country.Id)
                                                                                                                                        {
                                                                                                                                            <option value="@country.Id" selected="selected">@country.CountryName</option>
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            <option value="@country.Id">@country.CountryName</option>
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                </select>
                                                                                                                            </div>
                                                                                                                            <div class="form-group row">
                                                                                                                                <label class="form-label col-lg-3 d-flex align-items-center" for="external-notes-textarea">External Notes:</label>&nbsp;(Be aware that these notes will be visible to the client, including invoices.)
                                                                                                                                <textarea class="form-control col-lg-12 d-flex align-items-center" id="@row.Id$external-notes-textarea" placeholder="Notes or additional information" rows="3">@row.ExternalNotes</textarea>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <br />


                                                                                                                        @if (Model.EditPageEnabled)
                                                                                                                        {
                                                                                                                            <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:5px">
                                                                                                                                @{
                                                                                                                                    var buttonname = row.Id + "$QuoteItemPopup";
                                                                                                                                }
                                                                                                                                <button id="@buttonname" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" name="updateQuoteItemButton" onclick="updatequoteitem(@row.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                                                                                                            </div>
                                                                                                                        }
                                                                                                                        @*</form>*@
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>

                                                                                        </td>






                                                                                        <td>
                                                                                            <label id="quote-item-id" hidden>@row.Id</label>
                                                                                            <select name="edit-language-service-input" id="" class="select2 form-control">
                                                                                                <option value="">Select</option>
                                                                                                @for (var i = 0; i < Model.LanguageServices.Count(); i++)
                                                                                                {
                                                                                                    if (@Model.LanguageServices.ElementAt(i).Id == row.LanguageServiceId)
                                                                                                    {
                                                                                                        <option value="@Model.LanguageServices.ElementAt(i).Id" selected>@Model.LanguageServices.ElementAt(i).Name&nbsp;&nbsp;&nbsp;</option>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <option value="@Model.LanguageServices.ElementAt(i).Id">@Model.LanguageServices.ElementAt(i).Name&nbsp;&nbsp;&nbsp;</option>
                                                                                                    }
                                                                                                }
                                                                                            </select>

                                                                                        </td>
                                                                                        <td>
                                                                                            @for (var i = 0; i < Model.Languages.Count(); i++)
                                                                                            {
                                                                                                if (row.SourceLanguageIanacode == Model.Languages.ElementAt(i).StringValue)
                                                                                                {
                                                                                                    <label class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent">@Model.Languages.ElementAt(i).Name</label>
                                                                                                }
                                                                                            }
                                                                                        </td>
                                                                                        <td>
                                                                                            @for (var i = 0; i < Model.Languages.Count(); i++)
                                                                                            {
                                                                                                if (row.TargetLanguageIanacode == Model.Languages.ElementAt(i).StringValue)
                                                                                                {
                                                                                                    <label class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent">@Model.Languages.ElementAt(i).Name</label>
                                                                                                }
                                                                                            }
                                                                                        </td>
                                                                                        @{
                                                                                            if (Model.WordCountPresentationOption > 1)
                                                                                            {
                                                                                                    <td><input type="number" name="WordCountNew" id="@row.Id$WordCountNew" asp-for="@row.WordCountNew" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                    <td><input type="number" name="WordCountFuzzyBand1" id="@row.Id$CountFuzzyBand1" asp-for="@row.WordCountFuzzyBand1" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                {
                                                                                                        <td><input type="number" name="WordCountFuzzyBand2" id="@row.Id$WordCountFuzzyBand2" asp-for="@row.WordCountFuzzyBand2" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                {
                                                                                                        <td><input type="number" name="WordCountFuzzyBand3" id="@row.Id$WordCountFuzzyBand3" asp-for="@row.WordCountFuzzyBand3" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                {
                                                                                                        <td><input type="number" name="WordCountFuzzyBand4" id="@row.Id$WordCountFuzzyBand4" asp-for="@row.WordCountFuzzyBand4" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                }
                                                                                                    <td><input type="number" name="WordCountExact" id="@row.Id$WordCountExact" asp-for="@row.WordCountExact" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="text-align: center;" /></td>
                                                                                                    <td><input type="number" name="WordCountRepetitions" id="@row.Id$WordCountRepetitions" asp-for="@row.WordCountRepetitions" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>

                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.WordCountPresentationOption == 3)
                                                                                            {
                                                                                                    <td><input type="number" name="WordCountPerfectMatches" id="@row.Id$WordCountPerfectMatches" asp-for="@row.WordCountPerfectMatches" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /></td>
                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.WordCountPresentationOption > 0)
                                                                                            {
                                                                                                var totalwordcount = 0;

                                                                                                totalwordcount = (int)row.WordCountNew + (int)row.WordCountFuzzyBand1 + (int)row.WordCountFuzzyBand2 + (int)row.WordCountFuzzyBand3 + (int)row.WordCountFuzzyBand4 + (int)row.WordCountExact + (int)row.WordCountRepetitions + (int)row.WordCountPerfectMatches;
                                                                                                    <td><label class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;">@totalwordcount.ToString()</label></td>
                                                                                            }
                                                                                        }

                                                                                        @{
                                                                                            if (Model.ShowInterpretingDurationInBreakdown)
                                                                                            {
                                                                                                int hour = 0;
                                                                                                int minute = 0;
                                                                                                if (row.InterpretingExpectedDurationMinutes >= 60)
                                                                                                {
                                                                                                    hour = (int)row.InterpretingExpectedDurationMinutes / 60;

                                                                                                }
                                                                                                minute = (int)row.InterpretingExpectedDurationMinutes % 60;
                                                                                                    <td>
                                                                                                        <div class="form-row">
                                                                                                            <input type="number" name="InterpretingExpectedDurationHour" id="@row.Id$InterpretingExpectedDurationHour" value="@hour" class="col-5 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /><label class="col-lg-2 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent">:</label><input type="number" name="InterpretingExpectedDurationMinutes" id="@row.Id$InterpretingExpectedDurationMinutes" value="@minute" class="col-5 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" />
                                                                                                        </div>
                                                                                                    </td>
                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.ShowWorkDurationInBreakdown)
                                                                                            {
                                                                                                int hour = 0;
                                                                                                int minute = 0;
                                                                                                if (row.WorkMinutes >= 60)
                                                                                                {
                                                                                                    hour = (int)row.WorkMinutes / 60;

                                                                                                }
                                                                                                minute = (int)row.WorkMinutes % 60;
                                                                                                    <td>
                                                                                                        <div class="form-row">
                                                                                                            <input type="number" name="WorkDurationInBreakdownHour" id="@row.Id$WorkDurationInBreakdownHour" value="@hour" class="col-5 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" /><label class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent">:</label><input type="number" name="WorkDurationInBreakdownMinutes" id="@row.Id$WorkDurationInBreakdownMinutes" value="@minute" class="col-5 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" />
                                                                                                        </div>
                                                                                                    </td>
                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                            {
                                                                                                    <td>
                                                                                                        <input type="number" name="Pages" id="@row.Id$Pages" asp-for="@row.Pages" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" />

                                                                                                    </td>
                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                            {
                                                                                                    <td>
                                                                                                        <input type="number" name="Characters" id="@row.Id$Characters" asp-for="@row.Characters" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" />

                                                                                                    </td>
                                                                                            }
                                                                                        }
                                                                                        @{
                                                                                            if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                            {
                                                                                                    <td>
                                                                                                        <input type="number" name="Documents" id="@row.Id$Documents" asp-for="@row.Documents" class="col-lg-12 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 bg-transparent" style="text-align: center;" />

                                                                                                    </td>
                                                                                            }
                                                                                        }
                                                                                        <td>
                                                                                            <div class="form-row">
                                                                                                <label class="col-lg-1 form-control form-control-md rounded-0 border-top-0 border-bottom-0 border-left-0 border-right-0 bg-transparent">@ViewBag.Prefix</label>&nbsp;<input type="number" name="ChargeToClient" id="@row.Id$ChargeToClient" asp-for="@row.ChargeToClient" class="col-lg-8 form-control form-control-md rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" style="text-align: center;" value="@row.ChargeToClient.GetValueOrDefault().ToString("F2")" />
                                                                                            </div>
                                                                                        </td>
                                                                                        @if (Model.EditPageEnabled)
                                                                                        {
                                                                                            <td style="text-align:center">
                                                                                                @{
                                                                                                    var quoteitemid = rowindex + '$' + @row.Id;
                                                                                                        <a class="btn btn-icon align-middle" id="select-div" href="#" data-toggle="modal"
                                                                                               data-target="#importQuoteItemWordCounts" style="display:contents;">
                                                                                                            <img id="" src="/img/import.jpg" style="height:33px;" title="Import Word Counts" alt="Import Word Counts" onclick="importQuoteID(@row.Id);" />
                                                                                                        </a>
                                                                                                        <img id="" src="/img/close.png" title="Remove" alt="Remove" onclick="removeexistingRow(@row.Id)" />
                                                                                                }
                                                                                            </td>
                                                                                        }
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                            <tfoot>
                                                                                @if (Model.SubTotalOverallChargeToClient != null && Model.QuoteItems.Any() && (Model.SurchargeAmount > 0 || Model.DiscountAmount > 0))
                                                                                {
                                                                                    <tr>
                                                                                        <td style="text-align:center"><b>Sub-total</b></td>

                                                                                        @{
                                                                                            int colspan = 3;

                                                                                                @if (Model.WordCountPresentationOption > 1)
                                                                                            {
                                                                                                colspan += 4;

                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                {
                                                                                                    colspan += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                {
                                                                                                    colspan += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                {
                                                                                                    colspan += 1;
                                                                                                }
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption == 3)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption > 0)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.ShowInterpretingDurationInBreakdown)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.ShowWorkDurationInBreakdown)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                            {
                                                                                                colspan += 1;
                                                                                            }


                                                                                        }
                                                                                        <td colspan="@colspan"></td>
                                                                                        <td style="text-align:center"><b>@ViewBag.Prefix@Model.SubTotalOverallChargeToClient.Value.ToString("F2", System.Globalization.CultureInfo.GetCultureInfo(@Model.LangIanacode))</b></td>
                                                                                        <td></td>
                                                                                    </tr>
                                                                                }
                                                                                @if (Model.SurchargeId != null && Model.QuoteItems.Any())
                                                                                {
                                                                                    <tr>
                                                                                        <td style="text-align:center">Surcharge</td>

                                                                                        @{
                                                                                            int colspan1 = 3;

                                                                                                @if (Model.WordCountPresentationOption > 1)
                                                                                            {
                                                                                                colspan1 += 4;

                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                {
                                                                                                    colspan1 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                {
                                                                                                    colspan1 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                {
                                                                                                    colspan1 += 1;
                                                                                                }
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption == 3)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption > 0)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.ShowInterpretingDurationInBreakdown)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.ShowWorkDurationInBreakdown)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                            {
                                                                                                colspan1 += 1;
                                                                                            }


                                                                                        }
                                                                                        <td colspan="@colspan1"></td>
                                                                                        <td style="text-align:center"><b>@ViewBag.Prefix@Model.SurchargeAmount.Value.ToString("F2", System.Globalization.CultureInfo.GetCultureInfo(@Model.LangIanacode))</b></td>
                                                                                        <td></td>
                                                                                    </tr>
                                                                                }
                                                                                @if (Model.DiscountId != null && Model.QuoteItems.Any())
                                                                                {
                                                                                    <tr>
                                                                                        <td style="text-align:center;color:green;">Discount</td>

                                                                                        @{
                                                                                            int colspan2 = 3;

                                                                                                @if (Model.WordCountPresentationOption > 1)
                                                                                            {
                                                                                                colspan2 += 4;

                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                {
                                                                                                    colspan2 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                {
                                                                                                    colspan2 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                {
                                                                                                    colspan2 += 1;
                                                                                                }
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption == 3)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption > 0)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.ShowInterpretingDurationInBreakdown)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.ShowWorkDurationInBreakdown)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                            {
                                                                                                colspan2 += 1;
                                                                                            }


                                                                                        }
                                                                                        <td colspan="@colspan2"></td>
                                                                                        <td style="text-align:center;color:green;">-<b>@ViewBag.Prefix@Model.DiscountAmount.Value.ToString("F2", System.Globalization.CultureInfo.GetCultureInfo(@Model.LangIanacode))</b></td>
                                                                                        <td></td>
                                                                                    </tr>
                                                                                }
                                                                                @if (Model.OverallChargeToClient != null && Model.QuoteItems.Any())
                                                                                {
                                                                                    <tr>
                                                                                        <td style="text-align:center"><b>Total</b></td>

                                                                                        @{
                                                                                            int colspan3 = 3;

                                                                                                @if (Model.WordCountPresentationOption > 1)
                                                                                            {
                                                                                                colspan3 += 4;

                                                                                                if (ViewBag.FuzzyBand2Title != null)
                                                                                                {
                                                                                                    colspan3 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand3Title != null)
                                                                                                {
                                                                                                    colspan3 += 1;
                                                                                                }
                                                                                                if (ViewBag.FuzzyBand4Title != null)
                                                                                                {
                                                                                                    colspan3 += 1;
                                                                                                }
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption == 3)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.WordCountPresentationOption > 0)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.ShowInterpretingDurationInBreakdown)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.ShowWorkDurationInBreakdown)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.ShowPagesOrSlidesInBreakdown)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfCharactersInBreakdown)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }
                                                                                            if (Model.ShowNumberOfDocumentsInBreakdown)
                                                                                            {
                                                                                                colspan3 += 1;
                                                                                            }


                                                                                        }
                                                                                        <td colspan="@colspan3"></td>
                                                                                        <td style="text-align:center"><b>@ViewBag.Prefix@Model.OverallChargeToClient.Value.ToString("F2", System.Globalization.CultureInfo.GetCultureInfo(@Model.LangIanacode))</b></td>
                                                                                        <td></td>
                                                                                    </tr>
                                                                                }
                                                                            </tfoot>
                                                                        </table>
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                        @*</form>*@
                                                        @if (Model.EditPageEnabled && Model.QuoteItems.Any())
                                                        {
                                                            <button id="editquoteitemsbutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="editquoteitems()" style="float:right;margin-right: 20px;margin-bottom: 10px;"><i class="far fa-cloud-upload fa-2x"></i></button>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="col-lg-12 text-center">
                                <div>
                                    <i>@ViewBag.VatLabel</i>
                                </div>
                                <div>
                                    <i>@ViewBag.VatLabel2 </i>
                                </div>
                                <div>
                                    <i>@ViewBag.VatLabel3</i>
                                </div>
                                <div>
                                    <i>@ViewBag.VatLabel4</i>
                                </div>
                                @*<input type="text" class="rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.VatLabel">
                                <input type="text" class="rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.VatLabel2">
                                <input type="text" class="rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.VatLabel3">
                                <input type="text" class="rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@ViewBag.VatLabel4">*@
                            </div>
                            <br /><br />
                            <div class="col-lg-12 text-center">
                                <textarea class="tinymce" id="closingsectiontext" placeholder="Notes or additional information" rows="5">@Model.ClosingSectionText</textarea>
                            </div>

                            <br /><br />

                            <div class="form-group-row d-flex" style="padding-bottom:5px">
                                <table width="350px">
                                    <tr>
                                        <td>
                                            @* <a class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" href='@string.Format("http://myplusbeta/HR/EmployeeProfile/{0}",@Model.SalesContactEmployeeId)'>@Model.SalesContactName</a>*@
                                            <select id="sales-contact-select" class="select2 form-control w-200">
                                                <option value="0">(Please select sales contact)</option>
                                                @for (var c = 0; c < Model.ListOfEmployees.Count(); c++)
                                                {
                                                    <option value="@Model.ListOfEmployees.ElementAt(c).Id" selected="@(Model.ListOfEmployees.ElementAt(c).Id == (@Model.SalesContactEmployeeId))">@Model.ListOfEmployees.ElementAt(c).FirstName @Model.ListOfEmployees.ElementAt(c).Surname</option>
                                                }
                                            </select>
                                            <label class="text-danger" id="sales-contact-required" hidden>Please select sales employee contact</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" readonly class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.SalesContactEmail" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" readonly class="form-control form-control-sm rounded-0 border-bottom-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@Model.SalesContactNumber" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <br /><br />
                            @if (Model.EditPageEnabled)
                            {
                                <div class="form-group-row d-flex flex-row-reverse" style="padding-bottom:5px">
                                    <button id="updatequotebutton" class="@(Settings.Theme.IconPrefix) btn btn-outline-default" type="submit" title="Save" onclick="updatequote(@Model.Id);"><i class="far fa-cloud-upload fa-2x"></i></button>
                                </div>
                            }
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="importQuoteWordCounts" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 shadow-3">
            <div class="modal-header">
                <h5 class="modal-title" id="timeLogEditHeader">
                    <strong><label id="importWordCountsHeader">Import word counts</label></strong>
                </h5>
                <a onclick="" data-dismiss="modal" class="close" aria-label="Close">
                    <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                </a>
            </div>
            <div class="modal-body bg-faded">
                <label class="form-label">Please paste the folder where the analysis XMLs for this enquiries are stored. <label class="text-danger">(The folder should be on the server where the enquiries is stored.)</label> </label>
                <br />
                <br />
                <input type="text" id="folder-path" class="form-control form-control-sm rounded-0" placeholder="Folder path">
                <label id="folderPathRequired" class="text-danger" hidden>Please enter folder path.</label><br />
                <br />
                <br />
                <br />
                <br />
                <div style="position:relative;left:365px;">
                    <button type="button" class="btn btn-success" data-toggle="modal" data-dismiss="modal" onclick="importQuoteWordCounts(@Model.Id);">Import</button>
                </div>

            </div>
        </div>
    </div>
</div>
<div id="importQuoteItemWordCounts" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 shadow-3">
            <div class="modal-header">
                <h5 class="modal-title" id="timeLogEditHeader">
                    <strong><label id="importWordCountsHeader">Import word counts</label></strong>
                </h5>
                <a onclick="" data-dismiss="modal" class="close" aria-label="Close">
                    <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                </a>
            </div>
            <div class="modal-body bg-faded">
                <label class="form-label">Please paste the path to the analysis XML file.  <label class="text-danger">(The file should be on the server where the enquiries is stored. The path must contain the XML along with its extension.) </label> </label><br />

                <input type="text" id="quote-item-folder-path" class="form-control form-control-sm rounded-0" placeholder="File path">
                <label id="quoteItemFolderPathRequired" class="text-danger" hidden>Please enter file path.</label><br />
                <label id="word-counts-quote-id" hidden></label><br />
                <br />
                <br />
                <br />
                <br />
                <div style="position:relative;left:365px;">
                    <button type="button" class="btn btn-success" data-toggle="modal" data-dismiss="modal" onclick="importQuoteItemWordCounts();">Import</button>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal modal-alert fade" id="quote-word-counts-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><label id="header-text"></label></h5>
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                </button>*@
            </div>
            <div class="modal-body">
                <label id="quote-word-counts-success-string"></label>&nbsp;<label class="text-success md-header" id="quote-word-counts-success-dates"></label>
                <label class="text-warning md-header" id="quote-word-counts-warning-string"></label>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="refreshPage(@Model.Id)">Close</button>

                @*<button type="button" class="btn btn-primary">Save changes</button>*@
            </div>
        </div>
    </div>
</div>

<div class="panel-container show">
    <div class="modal fade" id="surchargePopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="surchargeHeader">
                        <strong><label id="modal_header1">Surcharge</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <table class="table table-borderless" style="width:450px;" id="breakdownTable2">
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Surcharge:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <table id="innerCategoryTable2" style="width: 100%; border-spacing: 0px; padding: 0px;">
                                    <tr>
                                        <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; width: 320px;border: hidden;">
                                            <select class="select2 form-control w-100" id="surchargecategoryselect" onchange="surchargecategoryselectupdate('@ViewBag.InvoiceLang.ToString()')">
                                                <option value="-1" selected>No Surcharge</option>
                                                @for (var j = 0; j < Model.SurchargesCategories.Count(); j++)
                                                {
                                                    @if (Model.SurchargeDetails != null)
                                                    {
                                                        @if (Model.SurchargesCategories.ElementAt(j).Id == Model.SurchargeDetails.SurchargeCategory)
                                                        {
                                                            <option value="@Model.SurchargesCategories.ElementAt(j).Id" selected>@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@Model.SurchargesCategories.ElementAt(j).Id">@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <option value="@Model.SurchargesCategories.ElementAt(j).Id">@Model.SurchargesCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                    }
                                                }
                                            </select>
                                        </td>
                                        <td style="border: hidden;">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Description:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    string surchargedesc = "";
                                        @if (Model.SurchargeDetails != null)
                                    {
                                        surchargedesc = @Model.SurchargeDetails.Description;
                                    }
                                }
                                <textarea id="Surchargedescriptioninput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">@surchargedesc</textarea>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Percentage or value:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    var percentchecked = "";
                                    var valuechecked = "";
                                        @if (Model.SurchargeDetails != null)
                                    {
                                            @if (Model.SurchargeDetails.PercentageOrValue == true)
                                        {
                                            valuechecked = "checked";
                                        }
                                        else
                                        {
                                            percentchecked = "checked";
                                        }
                                    }
                                }
                                <input type="radio" id="SurchargePerc" name="SurchargePercOrValue" value="0" @percentchecked>
                                <label for="SurchargePerc">Percentage</label><br>
                                <input type="radio" id="SurchargeVal" name="SurchargePercOrValue" value="1" @valuechecked>
                                <label for="SurchargeVal">Value</label><br>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                <label class="form-label" for="simpleinput">Amount</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                @{
                                    decimal surchargeamount = 0;
                                        @if (Model.SurchargeDetails != null)
                                    {
                                        surchargeamount = @Model.SurchargeDetails.SurchargeAmount;
                                    }
                                }
                                <input type="number" id="SurchargeAmountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@surchargeamount">
                                <br />@ViewBag.Currency
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;" align="right">
                                <br />
                                @{
                                    var surchargeid = 0;

                                        @if (@Model.SurchargeDetails != null)
                                    {
                                        surchargeid = @Model.SurchargeDetails.SurchargeId;
                                    }
                                }
                                @if (Model.EditPageEnabled)
                                {
                                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick="SaveSurchargePopup();">Save</button>
                                    <label id="popup-surcharge-id" style="display: none;">@surchargeid</label>
                                    @*<a class="btn btn-success" onclick="SaveSurcharge(@Model.Id, @surchargeid);">Save</a>*@
                                }
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel-container show">
    <div class="modal fade" id="discountPopup" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-0 shadow-3">
                <div class="modal-header">
                    <h5 class="modal-title" id="discountHeader">
                        <strong><label id="modal_header1">Discount</label> </strong>
                    </h5>
                    <button type="submit" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="@(Settings.Theme.IconPrefix) fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body bg-faded">
                    <table class="table table-borderless" style="width:450px;" id="breakdownTable2">
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Discount:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <table id="innerCategoryTable2" style="width: 100%; border-spacing: 0px; padding: 0px;">

                                    <tr>
                                        <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; width: 320px;border: hidden;">
                                            <select class="select2 form-control w-100" id="discountcategoryselect" onchange="discountcategoryselectupdate('@ViewBag.InvoiceLang.ToString()')">
                                                <option value="-1" selected>No Discount</option>
                                                @for (var j = 0; j < Model.DiscountCategories.Count(); j++)
                                                {
                                                    @if (Model.DiscountDetails != null)
                                                    {
                                                        @if (Model.DiscountCategories.ElementAt(j).Id == Model.DiscountDetails.DiscountCategory)
                                                        {
                                                            <option value="@Model.DiscountCategories.ElementAt(j).Id" selected>@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@Model.DiscountCategories.ElementAt(j).Id">@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <option value="@Model.DiscountCategories.ElementAt(j).Id">@Model.DiscountCategories.ElementAt(j).DiscountOrSurchargeCategory</option>
                                                    }
                                                }
                                            </select>
                                        </td>
                                        <td style="border: hidden;">
                                            &nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Description:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    string discountdesc = "";
                                        @if (Model.DiscountDetails != null)
                                    {
                                        discountdesc = @Model.DiscountDetails.Description;
                                    }
                                }
                                <textarea id="Discountdescriptioninput" rows="5" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent">@discountdesc</textarea>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                <label class="form-label" for="simpleinput">Percentage or value:</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle; border: hidden;">
                                @{
                                    percentchecked = "";
                                    valuechecked = "";
                                        @if (Model.DiscountDetails != null)
                                    {
                                            @if (Model.DiscountDetails.PercentageOrValue == true)
                                        {
                                            valuechecked = "checked";
                                        }
                                        else
                                        {
                                            percentchecked = "checked";
                                        }
                                    }
                                }
                                <input type="radio" id="DiscountPerc" name="DiscountePercOrValue" value="0" @percentchecked>
                                <label for="DiscountPerc">Percentage</label><br>
                                <input type="radio" id="DiscountVal" name="DiscountePercOrValue" value="1" @valuechecked>
                                <label for="DiscountVal">Value</label><br>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                <label class="form-label" for="simpleinput">Amount</label>&nbsp;
                            </td>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;">
                                @{
                                    decimal discountamount = 0;
                                        @if (Model.DiscountDetails != null)
                                    {
                                        discountamount = @Model.DiscountDetails.DiscountAmount;
                                    }
                                }
                                <input type="number" id="DiscountAmountinput" class="form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0 px-0 bg-transparent" value="@discountamount">
                                <br />@ViewBag.Currency
                            </td>
                        </tr>
                        <tr>
                            <td style="border-spacing: 0px; padding: 0px; vertical-align: middle;border:hidden;" align="right">
                                <br />
                                @{
                                    var discountid = 0;

                                        @if (@Model.DiscountDetails != null)
                                    {
                                        discountid = @Model.DiscountDetails.DiscountId;
                                    }
                                }
                                @if (Model.EditPageEnabled)
                                {
                                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick="SaveDiscountPopup();">Save</button>
                                    <label id="popup-discount-id" style="display: none;">@discountid</label>
                                    @*<a class="btn btn-success" onclick="SaveDiscount(@Model.Id, @discountid);">Save</a>*@
                                }
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>